"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[6595],{1176:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[];function d(e){const r={a:"a",code:"code",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{style:{textAlign:"left"},children:"Parameter"}),(0,t.jsx)(r.th,{style:{textAlign:"left"},children:"Type"}),(0,t.jsx)(r.th,{style:{textAlign:"left"},children:"Required in\xa0request"}),(0,t.jsx)(r.th,{style:{textAlign:"left"},children:"Nullable in\xa0request"}),(0,t.jsx)(r.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"purchase_type"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"String"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2795"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsxs)(r.td,{style:{textAlign:"left"},children:["The type of product purchased. Possible value: ",(0,t.jsx)(r.code,{children:"subscription"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"store"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"String"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2795"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsxs)(r.td,{style:{textAlign:"left"},children:["Store where the product was bought. Options include ",(0,t.jsx)(r.code,{children:"app_store"}),", ",(0,t.jsx)(r.code,{children:"play_store"}),", ",(0,t.jsx)(r.code,{children:"stripe"}),", or the Store ID of your ",(0,t.jsx)(r.a,{href:"custom-store",children:"custom store"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"environment"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"String"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsxs)(r.td,{style:{textAlign:"left"},children:["Environment where the transaction took place. Options are ",(0,t.jsx)(r.code,{children:"Sandbox"})," or ",(0,t.jsx)(r.code,{children:"Production"}),". ",(0,t.jsx)(r.code,{children:"Production"})," is used by default."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"store_product_id"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"String"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2795"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"ID of the product in the app store (App Store, Google Play, Stripe, etc.) that unlocked this access level."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"store_transaction_id"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"String"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2795"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"Transaction ID in the app store (App Store, Google Play, Stripe, etc.)."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"store_original_transaction_id"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"String"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2795"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsxs)(r.td,{style:{textAlign:"left"},children:[(0,t.jsx)("p",{children:"For subscriptions, this ID links to the first transaction in a renewal chain. Each renewal is connected to this original transaction."}),(0,t.jsxs)("p",{children:["If there\u2019s no renewal, ",(0,t.jsx)(r.code,{children:"store_original_transaction_id"})," matches ",(0,t.jsx)(r.code,{children:"store_transaction_id"}),"."]})]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"offer"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"Object"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2795"}),(0,t.jsxs)(r.td,{style:{textAlign:"left"},children:["The offer used in the purchase, provided as an ",(0,t.jsx)(r.a,{href:"server-side-api-objects#offer",children:"Offer"})," object."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"is_family_shared"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"Boolean"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsxs)(r.td,{style:{textAlign:"left"},children:["A Boolean value indicating whether the product supports family sharing in App Store Connect. iOS only. Always ",(0,t.jsx)(r.code,{children:"false"})," for iOS below 14.0 and macOS below 11.0. ",(0,t.jsx)(r.code,{children:"false"})," is used by default."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"price"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"Object"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2795"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsxs)(r.td,{style:{textAlign:"left"},children:["Price of the subscription or purchase as a ",(0,t.jsx)(r.a,{href:"server-side-api-objects#price",children:"Price"})," object. An initial subscription purchase with zero cost is a free trial; a renewal with zero cost is a free renewal."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"purchased_at"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"ISO 8601 date"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2795"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"The datetime of the most recent access level purchase."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"refunded_at"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"ISO 8601 date"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"The datetime when the subscription was refunded, if applicable."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"cancellation_reason"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"String"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsxs)(r.td,{style:{textAlign:"left"},children:["Possible reasons for cancellation include: ",(0,t.jsx)(r.code,{children:"voluntarily_cancelled"}),", ",(0,t.jsx)(r.code,{children:"billing_error"}),", ",(0,t.jsx)(r.code,{children:"price_increase"}),", ",(0,t.jsx)(r.code,{children:"product_was_not_available"}),", ",(0,t.jsx)(r.code,{children:"refund"}),", ",(0,t.jsx)(r.code,{children:"upgraded"}),", or ",(0,t.jsx)(r.code,{children:"unknown"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"variation_id"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"String"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"The variation ID used to trace purchases to the specific paywall they were made from."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"originally_purchased_at"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"ISO 8601 date"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2795"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsxs)(r.td,{style:{textAlign:"left"},children:["For subscription chains, this is the purchase date of the original transaction, linked by ",(0,t.jsx)(r.code,{children:"store_original_transaction_id"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"expires_at"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"ISO 8601 date"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2795"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsxs)(r.td,{style:{textAlign:"left"},children:["The datetime when the access level expires. It may be in the past and ",(0,t.jsx)(r.code,{children:"null"})," for lifetime access."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"renew_status"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"Boolean"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2795"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"Indicates if auto-renewal is enabled for the subscription."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"renew_status_changed_at"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"ISO 8601 date"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"The datetime when auto-renewal was either enabled or disabled."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"billing_issue_detected_at"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"ISO 8601 date"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"The datetime when a billing issue was detected (e.g., a failed card charge). The subscription might still be active. This is cleared if the payment goes through."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"grace_period_expires_at"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"ISO 8601 date"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsx)(r.td,{style:{textAlign:"left"},children:"\u2796"}),(0,t.jsxs)(r.td,{style:{textAlign:"left"},children:["The datetime when the ",(0,t.jsx)(r.a,{href:"https://developer.apple.com/news/?id=09122019c",children:"grace period"})," will end if the subscription is currently in one."]})]})]})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},2670:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[{value:"Body",id:"body",level:4},{value:"Response example",id:"response-example",level:4}];function d(e){const r={code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:["The request failed because the ",(0,t.jsx)(r.code,{children:"offer_category"})," parameter has a value other than ",(0,t.jsx)(r.code,{children:"introductory"})," or ",(0,t.jsx)(r.code,{children:"offer_type"})," but doesn\u2019t include an ",(0,t.jsx)(r.code,{children:"offer_id"}),". In this case, either provide an ",(0,t.jsx)(r.code,{children:"offer_id"})," or remove the ",(0,t.jsx)(r.code,{children:"offer_category"})," or ",(0,t.jsx)(r.code,{children:"offer_type"})," from the request."]}),"\n",(0,t.jsxs)(r.p,{children:["Another possible reason is that the ",(0,t.jsx)(r.code,{children:"offer_id"})," parameter was added but left as ",(0,t.jsx)(r.code,{children:"null"}),", even though it can\u2019t be null. If that\u2019s the case, either add a value for ",(0,t.jsx)(r.code,{children:"offer_id"})," or remove the parameter entirely."]}),"\n",(0,t.jsx)(r.h4,{id:"body",children:"Body"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"errors"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"source"}),": (string) Always ",(0,t.jsx)(r.code,{children:"offer.category"})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"errors"}),": A description of the error. "]})]})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"error_code"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsxs)(r.td,{children:["Short error name. Possible value: ",(0,t.jsx)(r.code,{children:"missing_offer_id"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"status_code"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsxs)(r.td,{children:["HTTP status. Always ",(0,t.jsx)(r.code,{children:"400"}),"."]})]})]})]}),"\n",(0,t.jsx)(r.h4,{id:"response-example",children:"Response example"}),"\n",(0,t.jsx)(r.p,{children:"The profile is not found"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "errors": [\n    {\n      "source": "offer_category",\n      "errors": [\n        "offer_id must be specified for all offer types except \'introductory\'."\n      ]\n    }\n  ],\n  "error_code": "missing_offer_id",\n  "status_code": 400\n}\n'})})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},2769:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[{value:"Body",id:"body",level:4},{value:"Response example",id:"response-example",level:4}];function d(e){const r={a:"a",code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{}),"\n",(0,t.jsxs)(r.p,{children:["The request failed due to missing or incorrect authorization. Check the ",(0,t.jsx)(r.a,{href:"ss-authorization",children:"Authorization"})," page, paying close attention to the ",(0,t.jsx)(r.strong,{children:"Authorization header"}),"."]}),"\n",(0,t.jsx)(r.p,{children:"The request also failed because the specified profile wasn\u2019t found."}),"\n",(0,t.jsx)(r.h4,{id:"body",children:"Body"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"errors"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"source"}),": (string) Always ",(0,t.jsx)(r.code,{children:"non_field_errors"}),"."]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"errors"}),": A description of the error."]})]})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"error_code"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsxs)(r.td,{children:["Short error name. Always ",(0,t.jsx)(r.code,{children:"not_authenticated"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"status_code"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsxs)(r.td,{children:["HTTP status. Always ",(0,t.jsx)(r.code,{children:"401."})]})]})]})]}),"\n",(0,t.jsx)(r.h4,{id:"response-example",children:"Response example"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "errors": [\n    {\n      "source": "non_field_errors",\n      "errors": [\n        "Authentication credentials were not provided."\n      ]\n    }\n  ],\n  "error_code": "not_authenticated",\n  "status_code": 401\n}\n'})})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},9887:(e,r,s)=>{s.d(r,{Ay:()=>c,RM:()=>d});var t=s(74848),n=s(28453),i=s(43467);const d=[{value:"data object structure",id:"data-object-structure",level:3},...i.RM];function l(e){const r={a:"a",code:"code",h3:"h3",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{}),"\n",(0,t.jsxs)(r.p,{children:["The request is successful. The response body contains the ",(0,t.jsx)(r.code,{children:"data"})," field, which encapsulates the user's profile and associated information."]}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Nullable"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsx)(r.tbody,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"data"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsxs)(r.td,{children:["Contains the ",(0,t.jsx)(r.a,{href:"server-side-api-objects#profile",children:"Profile"})," object with user details and metadata."]})]})})]}),"\n",(0,t.jsx)(r.h3,{id:"data-object-structure",children:"data object structure"}),"\n",(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"data"})," field is the primary container for the user profile. It includes several fields:"]}),"\n",(0,t.jsx)(i.Ay,{})]})}function c(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},11470:(e,r,s)=>{s.d(r,{A:()=>v});var t=s(96540),n=s(34164),i=s(23104),d=s(56347),l=s(205),c=s(57485),a=s(31682),o=s(70679);function h(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function x(e){const{values:r,children:s}=e;return(0,t.useMemo)((()=>{const e=r??function(e){return h(e).map((e=>{let{props:{value:r,label:s,attributes:t,default:n}}=e;return{value:r,label:s,attributes:t,default:n}}))}(s);return function(e){const r=(0,a.X)(e,((e,r)=>e.value===r.value));if(r.length>0)throw new Error(`Docusaurus error: Duplicate values "${r.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[r,s])}function j(e){let{value:r,tabValues:s}=e;return s.some((e=>e.value===r))}function u(e){let{queryString:r=!1,groupId:s}=e;const n=(0,d.W6)(),i=function(e){let{queryString:r=!1,groupId:s}=e;if("string"==typeof r)return r;if(!1===r)return null;if(!0===r&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:r,groupId:s});return[(0,c.aZ)(i),(0,t.useCallback)((e=>{if(!i)return;const r=new URLSearchParams(n.location.search);r.set(i,e),n.replace({...n.location,search:r.toString()})}),[i,n])]}function p(e){const{defaultValue:r,queryString:s=!1,groupId:n}=e,i=x(e),[d,c]=(0,t.useState)((()=>function(e){let{defaultValue:r,tabValues:s}=e;if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(r){if(!j({value:r,tabValues:s}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${r}" but none of its children has the corresponding value. Available values are: ${s.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return r}const t=s.find((e=>e.default))??s[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:r,tabValues:i}))),[a,h]=u({queryString:s,groupId:n}),[p,_]=function(e){let{groupId:r}=e;const s=function(e){return e?`docusaurus.tab.${e}`:null}(r),[n,i]=(0,o.Dv)(s);return[n,(0,t.useCallback)((e=>{s&&i.set(e)}),[s,i])]}({groupId:n}),f=(()=>{const e=a??p;return j({value:e,tabValues:i})?e:null})();(0,l.A)((()=>{f&&c(f)}),[f]);return{selectedValue:d,selectValue:(0,t.useCallback)((e=>{if(!j({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);c(e),h(e),_(e)}),[h,_,i]),tabValues:i}}var _=s(92303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var y=s(74848);function g(e){let{className:r,block:s,selectedValue:t,selectValue:d,tabValues:l}=e;const c=[],{blockElementScrollPositionUntilNextRender:a}=(0,i.a_)(),o=e=>{const r=e.currentTarget,s=c.indexOf(r),n=l[s].value;n!==t&&(a(r),d(n))},h=e=>{let r=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const s=c.indexOf(e.currentTarget)+1;r=c[s]??c[0];break}case"ArrowLeft":{const s=c.indexOf(e.currentTarget)-1;r=c[s]??c[c.length-1];break}}r?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.A)("tabs",{"tabs--block":s},r),children:l.map((e=>{let{value:r,label:s,attributes:i}=e;return(0,y.jsx)("li",{role:"tab",tabIndex:t===r?0:-1,"aria-selected":t===r,ref:e=>c.push(e),onKeyDown:h,onClick:o,...i,className:(0,n.A)("tabs__item",f.tabItem,i?.className,{"tabs__item--active":t===r}),children:s??r},r)}))})}function b(e){let{lazy:r,children:s,selectedValue:n}=e;const i=(Array.isArray(s)?s:[s]).filter(Boolean);if(r){const e=i.find((e=>e.props.value===n));return e?(0,t.cloneElement)(e,{className:"margin-top--md"}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:i.map(((e,r)=>(0,t.cloneElement)(e,{key:r,hidden:e.props.value!==n})))})}function m(e){const r=p(e);return(0,y.jsxs)("div",{className:(0,n.A)("tabs-container",f.tabList),children:[(0,y.jsx)(g,{...r,...e}),(0,y.jsx)(b,{...r,...e})]})}function v(e){const r=(0,_.A)();return(0,y.jsx)(m,{...e,children:h(e.children)},String(r))}},19365:(e,r,s)=>{s.d(r,{A:()=>d});s(96540);var t=s(34164);const n={tabItem:"tabItem_Ymn6"};var i=s(74848);function d(e){let{children:r,hidden:s,className:d}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,t.A)(n.tabItem,d),hidden:s,children:r})}},22128:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[{value:"Body",id:"body",level:4},{value:"Response example",id:"response-example",level:4}];function d(e){const r={code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:["Renewal is a prolongation of a subscription. The user can cancel the subscription prolongation and then again prolong it. The time of both these actions is stored in the ",(0,t.jsx)(r.code,{children:"renew_status_changed_at"})," parameter. And it can never happen earlier than the transaction itself."]}),"\n",(0,t.jsxs)(r.p,{children:["To fix the issue, make sure the ",(0,t.jsx)(r.code,{children:"renew_status_changed_at"})," is later than the time of the transaction (",(0,t.jsx)(r.code,{children:"purchased_at"}),")."]}),"\n",(0,t.jsx)(r.h4,{id:"body",children:"Body"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"errors"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"source"}),": (string) Always ",(0,t.jsx)(r.code,{children:"originally_purchased_at"})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"errors"}),": A description of the error."]})]})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"error_code"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsxs)(r.td,{children:["Short error name. Always ",(0,t.jsx)(r.code,{children:"originally_purchased_date_error"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"status_code"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsxs)(r.td,{children:["HTTP status. Always ",(0,t.jsx)(r.code,{children:"400"}),"."]})]})]})]}),"\n",(0,t.jsx)(r.h4,{id:"response-example",children:"Response example"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "errors": [\n    {\n      "source": "renew_status_changed_at",\n      "errors": [\n        "renew_status_changed_at must be later than purchased_at."\n      ]\n    }\n  ],\n  "error_code": "renew_status_changed_date_error",\n  "status_code": 400\n}\n'})})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},23397:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[{value:"Body",id:"body",level:4},{value:"Response example",id:"response-example",level:4}];function d(e){const r={code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:["The start of a grace period counts as a billing issue. So, if the grace period has started (indicated by the ",(0,t.jsx)(r.code,{children:"grace_period_expires_at"})," parameter being filled in), its start date should be recorded in the ",(0,t.jsx)(r.code,{children:"billing_issue_detected_at"})," parameter."]}),"\n",(0,t.jsxs)(r.p,{children:["To fix this, either set the start of the grace period in ",(0,t.jsx)(r.code,{children:"billing_issue_detected_at"})," or, if the grace period hasn\u2019t started yet, remove the ",(0,t.jsx)(r.code,{children:"grace_period_expires_at"})," parameter."]}),"\n",(0,t.jsx)(r.h4,{id:"body",children:"Body"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"errors"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"source"}),": (string) Always ",(0,t.jsx)(r.code,{children:"grace_period_billing_error"})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"errors"}),": A description of the error."]})]})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"error_code"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsxs)(r.td,{children:["Short error name. Always ",(0,t.jsx)(r.code,{children:"grace_period_billing_error"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"status_code"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsxs)(r.td,{children:["HTTP status. Always ",(0,t.jsx)(r.code,{children:"400"}),"."]})]})]})]}),"\n",(0,t.jsx)(r.h4,{id:"response-example",children:"Response example"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "errors": [\n    {\n      "source": "grace_period_billing_error",\n      "errors": [\n        "If grace_period_expires_at is specified, billing_issue_detected_at must also be specified."\n      ]\n    }\n  ],\n  "error_code": "grace_period_billing_error",\n  "status_code": 400\n}\n'})})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},31454:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[];function d(e){const r={a:"a",code:"code",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Required in\xa0request"}),(0,t.jsx)(r.th,{children:"Nullable in\xa0request"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"purchase_type"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsx)(r.td,{children:"\u2795"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsxs)(r.td,{children:["The type of product purchased. Possible value: ",(0,t.jsx)(r.code,{children:"one_time_purchase"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"store"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsx)(r.td,{children:"\u2795"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsxs)(r.td,{children:["Store where the product was bought. Possible values: ",(0,t.jsx)(r.code,{children:"app_store"}),", ",(0,t.jsx)(r.code,{children:"play_store"}),", ",(0,t.jsx)(r.code,{children:"stripe"}),", or the Store ID of your ",(0,t.jsx)(r.a,{href:"custom-store",children:"custom store"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"environment"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsxs)(r.td,{children:["Transaction environment that provided the access level. Options: ",(0,t.jsx)(r.code,{children:"Sandbox"}),", ",(0,t.jsx)(r.code,{children:"Production"}),". ",(0,t.jsx)(r.code,{children:"Production"})," is used by default."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"store_product_id"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsx)(r.td,{children:"\u2795"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsx)(r.td,{children:"The product ID in the app store (App Store, Google Play, Stripe, etc.) that unlocked this access level."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"store_transaction_id"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsx)(r.td,{children:"\u2795"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsx)(r.td,{children:"Transaction ID in the app store (App Store, Google Play, Stripe, etc.)."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"store_original_transaction_id"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsx)(r.td,{children:"\u2795"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsxs)(r.td,{children:[(0,t.jsx)("p",{children:"For recurring subscriptions, this is the original transaction ID that links the chain of renewals. The original transaction is the first in the chain; later transactions are extensions of it."}),(0,t.jsxs)("p",{children:["If there are no extensions, ",(0,t.jsx)(r.code,{children:"store_original_transaction_id"})," matches ",(0,t.jsx)(r.code,{children:"store_transaction_id"}),"."]})]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"offer"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsx)(r.td,{children:"\u2795"}),(0,t.jsxs)(r.td,{children:["The offer used for the purchase as an ",(0,t.jsx)(r.a,{href:"server-side-api-objects#offer",children:"Offer"})," object."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"is_family_shared"}),(0,t.jsx)(r.td,{children:"Boolean"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsxs)(r.td,{children:["A Boolean value indicating whether the product supports family sharing in App Store Connect. iOS only. Always ",(0,t.jsx)(r.code,{children:"false"})," for iOS below 14.0 and macOS below 11.0. ",(0,t.jsx)(r.code,{children:"false"})," is used by default."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"price"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:"\u2795"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsxs)(r.td,{children:["Price of the one-time purchase as a ",(0,t.jsx)(r.a,{href:"server-side-api-objects#price",children:"Price"})," object. An initial subscription purchase with zero cost is a free trial; a renewal with zero cost is a free renewal."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"purchased_at"}),(0,t.jsx)(r.td,{children:"ISO 8601 date"}),(0,t.jsx)(r.td,{children:"\u2795"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsx)(r.td,{children:"The datetime when the access level was last purchased."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"refunded_at"}),(0,t.jsx)(r.td,{children:"ISO 8601 date"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsx)(r.td,{children:"If refunded, shows the datetime of the refund."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"cancellation_reason"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsxs)(r.td,{children:["Possible reasons for cancellation: ",(0,t.jsx)(r.code,{children:"voluntarily_cancelled"}),", ",(0,t.jsx)(r.code,{children:"billing_error"}),", ",(0,t.jsx)(r.code,{children:"price_increase"}),", ",(0,t.jsx)(r.code,{children:"product_was_not_available"}),", ",(0,t.jsx)(r.code,{children:"refund"}),", ",(0,t.jsx)(r.code,{children:"cancelled_by_developer"}),", ",(0,t.jsx)(r.code,{children:"new_subscription_replace"}),", ",(0,t.jsx)(r.code,{children:"upgraded"}),", ",(0,t.jsx)(r.code,{children:"unknown"}),", ",(0,t.jsx)(r.code,{children:"adapty_revoked"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"variation_id"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsx)(r.td,{children:"The variation ID used to trace purchases to the specific paywall they were made from."})]})]})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},32713:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[{value:"Body",id:"body",level:4},{value:"Response example",id:"response-example",level:4}];function d(e){const r={a:"a",code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:["The request failed because the ",(0,t.jsx)(r.code,{children:"is_family_shared"})," parameter is set to ",(0,t.jsx)(r.code,{children:"true"}),", meaning the access level is shared with a family member for free. However, the ",(0,t.jsx)(r.code,{children:"value"})," parameter of the ",(0,t.jsx)(r.a,{href:"server-side-api-objects#price",children:"Price"})," object isn\u2019t set to zero."]}),"\n",(0,t.jsxs)(r.p,{children:["If ",(0,t.jsx)(r.code,{children:"is_family_shared"})," should be ",(0,t.jsx)(r.code,{children:"true"}),", make sure to set the ",(0,t.jsx)(r.code,{children:"value"})," parameter of the ",(0,t.jsx)(r.a,{href:"server-side-api-objects#price",children:"Price"})," object to ",(0,t.jsx)(r.code,{children:"0"}),"."]}),"\n",(0,t.jsx)(r.h4,{id:"body",children:"Body"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"errors"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"source"}),": (string) Always ",(0,t.jsx)(r.code,{children:"is_family_shared"})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"errors"}),": A description of the error."]})]})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"error_code"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsxs)(r.td,{children:["Short error name. Always: ",(0,t.jsx)(r.code,{children:"family_share_price_error"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"status_code"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsxs)(r.td,{children:["HTTP status. Always ",(0,t.jsx)(r.code,{children:"400"}),"."]})]})]})]}),"\n",(0,t.jsx)(r.h4,{id:"response-example",children:"Response example"}),"\n",(0,t.jsx)(r.p,{children:"The profile is not found"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "errors": [\n    {\n      "source": "is_family_shared",\n      "errors": [\n        "If is_family_shared is true, price.value must be 0."\n      ]\n    }\n  ],\n  "error_code": "family_share_price_error",\n  "status_code": 400\n}\n'})})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},34414:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>S,contentTitle:()=>w,default:()=>P,frontMatter:()=>A,metadata:()=>T,toc:()=>R});var t=s(74848),n=s(28453),i=s(11470),d=s(19365),l=s(9887),c=s(74732),a=s(2769),o=(s(45370),s(45119)),h=s(31454),x=s(75006),j=s(2670),u=s(82917),p=s(49205),_=s(32713),f=s(23397),y=s(95615),g=s(76770),b=s(22128),m=s(84315),v=s(1176);const A={title:"Set transaction with server-side API",description:"",metadataTitle:"",displayed_sidebar:"APISidebar"},w=void 0,T={id:"ss-set-transaction",title:"Set transaction with server-side API",description:"",source:"@site/versioned_docs/version-3.0/ss-set-transaction.md",sourceDirName:".",slug:"/ss-set-transaction",permalink:"/test_assignment_adapty/docs/ss-set-transaction",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Set transaction with server-side API",description:"",metadataTitle:"",displayed_sidebar:"APISidebar"},sidebar:"APISidebar",previous:{title:"Revoke access level",permalink:"/test_assignment_adapty/docs/ss-revoke-access-level"},next:{title:"Validate purchase, provide access level to customer, and import their transaction history",permalink:"/test_assignment_adapty/docs/ss-purchase-in-stripe"}},S={},R=[{value:"Method and endpoint",id:"method-and-endpoint",level:2},{value:"Example request",id:"example-request",level:2},{value:"For subscription",id:"for-subscription",level:3},...v.RM,{value:"For one-time purchase",id:"for-one-time-purchase",level:3},...h.RM,{value:"Successful response: 200: OK",id:"successful-response-200-ok",level:2},...l.RM,{value:"Successful response example",id:"successful-response-example",level:3},{value:"Errors",id:"errors",level:2},{value:"400: Bad request",id:"400-bad-request",level:3},{value:"billing_issue_detected_at_date_comparison_error",id:"billing_issue_detected_at_date_comparison_error",level:4},...u.RM,{value:"expires_date_error",id:"expires_date_error",level:4},...p.RM,{value:"family_share_price_error",id:"family_share_price_error",level:4},..._.RM,{value:"free_trial_price_error",id:"free_trial_price_error",level:4},...x.RM,{value:"grace_period_billing_error",id:"grace_period_billing_error",level:4},...f.RM,{value:"grace_period_expires_date_error",id:"grace_period_expires_date_error",level:4},...x.RM,{value:"missing_offer_id",id:"missing_offer_id",level:4},...j.RM,{value:"originally_purchased_date_error",id:"originally_purchased_date_error",level:4},{value:"profile_does_not_exist",id:"profile_does_not_exist",level:4},...o.RM,{value:"refund_date_error",id:"refund_date_error",level:4},...y.RM,{value:"refund_fields_error",id:"refund_fields_error",level:4},...g.RM,{value:"renew_status_changed_date_error",id:"renew_status_changed_date_error",level:4},...b.RM,{value:"store_transaction_id_error",id:"store_transaction_id_error",level:4},...m.RM,{value:"401: Unauthorized",id:"401-unauthorized",level:3},...a.RM,{value:"404: Not found",id:"404-not-found",level:3},...c.RM];function I(e){const r={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:["Creates a new transaction for an end user of your app in Adapty and provides access level. The transaction created by this method will appear in your ",(0,t.jsx)(r.a,{href:"https://app.adapty.io/analytics",children:"analytics"})," and ",(0,t.jsx)(r.a,{href:"https://app.adapty.io/event-feed",children:(0,t.jsx)(r.strong,{children:"Event Feed"})})," and well as will be sent to all integrations."]}),"\n",(0,t.jsxs)(r.p,{children:["This method is recommended over the ",(0,t.jsx)(r.a,{href:"ss-grant-access-level",children:"Grant access level"})," one."]}),"\n",(0,t.jsx)(r.admonition,{type:"warning",children:(0,t.jsxs)(r.p,{children:["Before setting a transaction, make sure the product is ",(0,t.jsx)(r.a,{href:"create-product",children:"created in Adapty"}),". Without this step, the transaction will still be recorded in the Adapty database, meaning it will appear in analytics and be included in integration events. However, the user won\u2019t get access in the mobile app since no access level will be assigned."]})}),"\n",(0,t.jsx)(r.h2,{id:"method-and-endpoint",children:"Method and endpoint"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-http",children:"POST https://api.adapty.io/api/v2/server-side-api/purchase/set/transaction/\n"})}),"\n",(0,t.jsxs)(r.p,{children:["Varies based on whether the purchase is a ",(0,t.jsx)(r.strong,{children:"subscription"})," or a ",(0,t.jsx)(r.strong,{children:"one-time purchase"}),"."]}),"\n",(0,t.jsx)(r.h2,{id:"example-request",children:"Example request"}),"\n",(0,t.jsxs)(i.A,{groupId:"api-lang",queryString:!0,children:[(0,t.jsx)(d.A,{value:"curl",label:"cURL",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",metastring:"showLineNumbers",children:'curl --location \'https://api.adapty.io/api/v2/server-side-api/purchase/set/transaction/\' \\\n--header \'Authorization: Api-Key <YOUR_SECRET_API_KEY>\' \\\n--header \'adapty-customer-user-id: <YOUR_CUSTOMER_USER_ID>\' \\\n--header \'Content-Type: application/json\' \\\n--data \'{\n  "purchase_type": "subscription",\n  "store": "app_store",\n  "environment": "Production",\n  "store_product_id": "1year.premium",\n  "store_transaction_id": "30002109551456",\n  "store_original_transaction_id": "30002109551456",\n  "is_family_shared": false,\n  "price": {\n    "country": "US",\n    "currency": "USD",\n    "value": 9.99\n  },\n  "purchased_at": "2022-10-12T09:42:50.000000+0000",\n  "variation_id": "81109d24-ea95-4806-9ec7-b482bbd1a33d",\n  "originally_purchased_at": "2022-10-12T09:42:50.000000+0000",\n  "renew_status": true,\n  "expires_at":  "2026-10-12T09:42:50.000000+0000"\n}\'\n'})})}),(0,t.jsx)(d.A,{value:"python",label:"Python",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",metastring:"showLineNumbers",children:'import requests\n\nurl = "https://api.adapty.io/api/v2/server-side-api/purchase/set/transaction/"\n\npayload = {\n    "purchase_type": "subscription",\n    "store": "app_store",\n    "environment": "Production",\n    "store_product_id": "1year.premium",\n    "store_transaction_id": "30002109551456",\n    "store_original_transaction_id": "30002109551456",\n    "is_family_shared": False,\n    "price": {\n        "country": "US",\n        "currency": "USD",\n        "value": 9.99\n    },\n    "purchased_at": "2022-10-12T09:42:50.000000+0000",\n    "variation_id": "81109d24-ea95-4806-9ec7-b482bbd1a33d",\n    "originally_purchased_at": "2022-10-12T09:42:50.000000+0000",\n    "renew_status": True,\n    "expires_at": "2026-10-12T09:42:50.000000+0000"\n}\n\nheaders = {\n    "Authorization": "Api-Key <YOUR_SECRET_API_KEY>",\n    "adapty-customer-user-id": "<YOUR_CUSTOMER_USER_ID>",\n    "Content-Type": "application/json"\n}\n\nresponse = requests.post(url, headers=headers, json=payload)\n\nprint(response.text)\n'})})}),(0,t.jsx)(d.A,{value:"js",label:"JavaScript",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",metastring:"showLineNumbers",children:'const myHeaders = new Headers();\nmyHeaders.append("adapty-customer-user-id", "<YOUR_CUSTOMER_USER_ID>");\nmyHeaders.append("Content-Type", "application/json");\nmyHeaders.append("Authorization", "Api-Key <YOUR_SECRET_API_KEY>");\n\nconst raw = JSON.stringify({\n  "purchase_type": "subscription",\n  "store": "app_store",\n  "environment": "Production",\n  "store_product_id": "1year.premium",\n  "store_transaction_id": "30002109551456",\n  "store_original_transaction_id": "30002109551456",\n  "is_family_shared": false,\n  "price": {\n    "country": "US",\n    "currency": "USD",\n    "value": 9.99\n  },\n  "purchased_at": "2022-10-12T09:42:50.000000+0000",\n  "variation_id": "81109d24-ea95-4806-9ec7-b482bbd1a33d",\n  "originally_purchased_at": "2022-10-12T09:42:50.000000+0000",\n  "renew_status": true,\n  "expires_at": "2026-10-12T09:42:50.000000+0000"\n});\n\nconst requestOptions = {\n  method: "POST",\n  headers: myHeaders,\n  body: raw,\n  redirect: "follow"\n};\n\nfetch("https://api.adapty.io/api/v2/server-side-api/purchase/set/transaction/", requestOptions)\n  .then((response) => response.text())\n  .then((result) => console.log(result))\n  .catch((error) => console.error(error));\n'})})})]}),"\n",(0,t.jsx)(r.p,{children:"Placeholders:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"<YOUR_CUSTOMER_USER_ID>"}),": The unique ID of the customer in your system."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"<YOUR_SECRET_API_KEY>"}),": Your secret API key for authorization."]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"for-subscription",children:"For subscription"}),"\n",(0,t.jsx)(v.Ay,{}),"\n",(0,t.jsx)(r.h3,{id:"for-one-time-purchase",children:"For one-time purchase"}),"\n",(0,t.jsx)(h.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"successful-response-200-ok",children:"Successful response: 200: OK"}),"\n",(0,t.jsx)(l.Ay,{}),"\n",(0,t.jsx)(r.h3,{id:"successful-response-example",children:"Successful response example"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n    "data": {\n        "app_id": "14c3d623-2f3a-455a-aa86-ef83dff6913b",\n        "profile_id": "3286abd3-48b0-4e9c-a5f6-ac0a006804a6",\n        "customer_user_id": "Jane.doe@example.com",\n        "total_revenue_usd": 0.0,\n        "segment_hash": "8f45947bad31ab0c",\n        "timestamp": 1736436751469,\n        "custom_attributes": [\n            {\n                "key": "favourite_sport",\n                "value": "yoga"\n            }\n        ],\n        "access_levels": [],\n        "subscriptions": [\n          {\n                "purchase_id": "5a7ab471-2299-45f7-ad69-1d395c1256e3",\n                "store": "app_store",\n                "store_product_id": "1year.premium",\n                "store_base_plan_id": null,\n                "store_transaction_id": "30002109551456",\n                "store_original_transaction_id": "30002109551456",\n                "purchased_at": "2022-10-12T09:42:50+00:00",\n                "environment": "Production",\n                "is_refund": false,\n                "is_consumable": false\n            }\n        ],\n        "non_subscriptions": []\n    }\n}\n'})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"errors",children:"Errors"}),"\n",(0,t.jsx)(r.h3,{id:"400-bad-request",children:"400: Bad request"}),"\n",(0,t.jsx)(r.h4,{id:"billing_issue_detected_at_date_comparison_error",children:"billing_issue_detected_at_date_comparison_error"}),"\n",(0,t.jsx)(u.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h4,{id:"expires_date_error",children:"expires_date_error"}),"\n",(0,t.jsx)(p.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h4,{id:"family_share_price_error",children:"family_share_price_error"}),"\n",(0,t.jsx)(_.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h4,{id:"free_trial_price_error",children:"free_trial_price_error"}),"\n",(0,t.jsx)(x.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h4,{id:"grace_period_billing_error",children:"grace_period_billing_error"}),"\n",(0,t.jsx)(f.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h4,{id:"grace_period_expires_date_error",children:"grace_period_expires_date_error"}),"\n",(0,t.jsx)(x.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h4,{id:"missing_offer_id",children:"missing_offer_id"}),"\n",(0,t.jsx)(j.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h4,{id:"originally_purchased_date_error",children:"originally_purchased_date_error"}),"\n",(0,t.jsx)("originallyPurchasedDate",{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h4,{id:"profile_does_not_exist",children:"profile_does_not_exist"}),"\n",(0,t.jsx)(o.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h4,{id:"refund_date_error",children:"refund_date_error"}),"\n",(0,t.jsx)(y.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h4,{id:"refund_fields_error",children:"refund_fields_error"}),"\n",(0,t.jsx)(g.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h4,{id:"renew_status_changed_date_error",children:"renew_status_changed_date_error"}),"\n",(0,t.jsx)(b.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h4,{id:"store_transaction_id_error",children:"store_transaction_id_error"}),"\n",(0,t.jsx)(m.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"401-unauthorized",children:"401: Unauthorized"}),"\n",(0,t.jsx)(a.Ay,{}),"\n",(0,t.jsx)(r.h3,{id:"404-not-found",children:"404: Not found"}),"\n",(0,t.jsx)(c.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"See also:"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"ss-grant-access-level",children:"Grant access level"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"ss-revoke-access-level",children:"Revoke access level"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"ss-purchase-in-stripe",children:"Validate Stripe purchases, manage access levels, and import transaction history"})}),"\n"]})]})}function P(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(I,{...e})}):I(e)}},43467:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[];function d(e){const r={a:"a",code:"code",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Nullable"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"app_id"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsxs)(r.td,{children:["The internal ID of your app. You can see in the the Adapty Dashboard: ",(0,t.jsx)(r.a,{href:"https://app.adapty.io/settings/general",children:"App Settings -> General tab"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"profile_id"}),(0,t.jsx)(r.td,{children:"UUID"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsxs)(r.td,{children:["Adapty profile ID. You can see it in the ",(0,t.jsx)(r.strong,{children:"Adapty ID"})," field on the Adapty Dashboard -> ",(0,t.jsx)(r.a,{href:"https://app.adapty.io/profiles/users",children:"Profiles"})," -> specific profile page."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"customer_user_id"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsx)(r.td,{children:"\u2795"}),(0,t.jsxs)(r.td,{children:["The ID of your user in your system. You can see it in the ",(0,t.jsx)(r.strong,{children:"Customer user ID"})," field on the Adapty Dashboard -> ",(0,t.jsx)(r.a,{href:"https://app.adapty.io/profiles/users",children:"Profiles"})," -> specific profile page. It will work only if you ",(0,t.jsx)(r.a,{href:"identifying-users",children:"identify the users"})," in your mobile app code via Adapty SDK."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"total_revenue_usd"}),(0,t.jsx)(r.td,{children:"Float"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsx)(r.td,{children:"A float value representing the total revenue in USD earned in the profile."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"segment_hash"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsx)(r.td,{children:"Internal parameter."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"timestamp"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsx)(r.td,{children:"Response time in milliseconds, needs for resolve a race condition."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"custom_attributes"}),(0,t.jsx)(r.td,{children:"Dictionary"}),(0,t.jsx)(r.td,{children:"\u2796"}),(0,t.jsxs)(r.td,{children:[(0,t.jsxs)("p",{children:["A maximum of 30 custom attributes to the profile are allowed to be set. If you provide the ",(0,t.jsx)(r.code,{children:"custom_attributes"})," dictionary, you must provide at least one attribute key."]}),(0,t.jsxs)("p",{children:[(0,t.jsx)(r.strong,{children:"Key:"})," The key must be a string with no more than 30 characters. Only letters, numbers, dashes, points, and underscores allowed"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)(r.strong,{children:"Value:"})," The attribute value must be no more than 30 characters. Only strings and floats are allowed as values, booleans will be converted to floats. Send an empty value or null to delete the attribute."]})]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"access_levels"}),(0,t.jsx)(r.td,{children:"Dictionary"}),(0,t.jsx)(r.td,{children:"\u2795"}),(0,t.jsxs)(r.td,{children:["Profile Paid Access Level objects. Dictionary where the keys are paid access level identifiers configured by a developer in the Adapty Dashboard. Values are ",(0,t.jsx)(r.a,{href:"https://adapty.io/docs/server-side-api-objects#customeraccesslevel",children:"Access level"})," objects. Can be null if the customer has no access levels."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"subscriptions"}),(0,t.jsx)(r.td,{children:"Dictionary"}),(0,t.jsx)(r.td,{children:"\u2795"}),(0,t.jsxs)(r.td,{children:["Dictionary where the keys are vendor product IDs. Values are ",(0,t.jsx)(r.a,{href:"https://adapty.io/docs/server-side-api-objects#subscription",children:"Subscription"})," objects. Can be null if the customer has no subscriptions."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"non_subscriptions"}),(0,t.jsx)(r.td,{children:"Dictionary"}),(0,t.jsx)(r.td,{children:"\u2795"}),(0,t.jsxs)(r.td,{children:["Dictionary where the keys are vendor product ids. Values are an array of ",(0,t.jsx)(r.a,{href:"https://adapty.io/docs/server-side-api-objects#non-subscription",children:"Non-Subscription"})," objects. Can be null if the customer has no purchases."]})]})]})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},45119:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[{value:"Body",id:"body",level:4},{value:"Response example",id:"response-example",level:4}];function d(e){const r={code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{}),"\n",(0,t.jsxs)(r.p,{children:["The request failed because the profile in the request header wasn\u2019t found. Double-check that there are no typos in the ",(0,t.jsx)(r.code,{children:"profile_id"})," or ",(0,t.jsx)(r.code,{children:"customer_user_id"})," you entered in the request header, and make sure it\u2019s for the correct app."]}),"\n",(0,t.jsx)(r.h4,{id:"body",children:"Body"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"errors"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"source"}),": (string) Always ",(0,t.jsx)(r.code,{children:"non_field_errors"})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"errors"}),": A description of the error. "]})]})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"error_code"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsxs)(r.td,{children:["Short error name. Possible value: ",(0,t.jsx)(r.code,{children:"profile_does_not_exist"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"status_code"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsxs)(r.td,{children:["HTTP status. Always ",(0,t.jsx)(r.code,{children:"400"}),"."]})]})]})]}),"\n",(0,t.jsx)(r.h4,{id:"response-example",children:"Response example"}),"\n",(0,t.jsx)(r.p,{children:"The profile is not found"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "errors": [\n    {\n      "source": "non_field_errors",\n      "errors": [\n        "Profile not found"\n      ]\n    }\n  ],\n  "error_code": "profile_does_not_exist",\n  "status_code": 400\n}\n'})})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},45370:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[];function d(e){const r={code:"code",pre:"pre",...(0,n.R)(),...e.components};return(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "data": {\n    "app_id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",\n    "profile_id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",\n    "customer_user_id": "8612ED7C-3477-466D-93AE-1854B8E5FDD5",\n    "total_revenue_usd": 109.88999999999999,\n    "segment_hash": "string",\n    "timestamp": 0,\n    "custom_attributes": [\n      {\n        "key": "string",\n        "value": "string"\n      }\n    ],\n    "access_levels": [\n      {\n        "access_level_id": "premium",\n        "store": "app_store",\n        "store_product_id": "weekly_8.99",\n        "store_base_plan_id": "",\n        "store_transaction_id": "530001802720333",\n        "store_original_transaction_id": "530001724306018",\n        "offer": {\n          "category": "introductory",\n          "type": "free_trial",\n          "id": "offer12"\n        },\n        "environment": "Production",\n        "starts_at": "2022-10-12T09:42:50.000000+0000",\n        "purchased_at": "2022-10-12T09:42:50.000000+0000",\n        "originally_purchased_at": "2021-10-12T09:42:50.000000+0000",\n        "expires_at": "2022-10-12T09:42:50.000000+0000",\n        "renewal_cancelled_at": "2022-10-12T09:42:50.000000+0000",\n        "billing_issue_detected_at": "2022-10-12T09:42:50.000000+0000",\n        "is_in_grace_period": true,\n        "cancellation_reason": "voluntarily_cancelled"\n      }\n    ],\n    "subscriptions": [\n      {\n        "store": "app_store",\n        "store_product_id": "weekly_8.99",\n        "store_base_plan_id": "",\n        "store_transaction_id": "530001802720333",\n        "store_original_transaction_id": "530001724306018",\n        "offer": {\n          "offer_category": "introductory",\n          "offer_type": "free_trial",\n          "offer_id": "offer12"\n        },\n        "environment": "Production",\n        "purchased_at": "2022-10-12T09:42:50.000000+0000",\n        "originally_purchased_at": "2021-10-12T09:42:50.000000+0000",\n        "expires_at": "2022-10-12T09:42:50.000000+0000",\n        "renewal_cancelled_at": "2022-10-12T09:42:50.000000+0000",\n        "billing_issue_detected_at": "2022-10-12T09:42:50.000000+0000",\n        "is_in_grace_period": true,\n        "cancellation_reason": "voluntarily_cancelled"\n      }\n    ],\n    "non_subscriptions": [\n      {\n        "purchase_id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",\n        "store": "app_store",\n        "store_product_id": "weekly_8.99",\n        "store_base_plan_id": "",\n        "store_transaction_id": "530001724306018",\n        "store_original_transaction_id": "530001724306018",\n        "purchased_at": "2022-10-12T09:42:50.000000+0000",\n        "environment": "Production",\n        "is_refund": true,\n        "is_consumable": true\n      }\n    ]\n  }\n}\n'})})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},49205:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[{value:"Body",id:"body",level:4},{value:"Response example",id:"response-example",level:4}];function d(e){const r={code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:["A user can\u2019t buy a subscription that has already expired. So, the ",(0,t.jsx)(r.code,{children:"expires_at"})," date (when the subscription expires) should always be later than the ",(0,t.jsx)(r.code,{children:"purchased_at"})," date (when the transaction occurred)."]}),"\n",(0,t.jsxs)(r.p,{children:["To fix this, check these dates and ensure that ",(0,t.jsx)(r.code,{children:"expires_at"})," is after ",(0,t.jsx)(r.code,{children:"purchased_at"}),"."]}),"\n",(0,t.jsx)(r.h4,{id:"body",children:"Body"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"errors"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"source"}),": (string) Always ",(0,t.jsx)(r.code,{children:"expires_at"})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"errors"}),": A description of the error."]})]})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"error_code"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsxs)(r.td,{children:["Short error name. Always ",(0,t.jsx)(r.code,{children:"expires_date_error"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"status_code"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsxs)(r.td,{children:["HTTP status. Always ",(0,t.jsx)(r.code,{children:"400"}),"."]})]})]})]}),"\n",(0,t.jsx)(r.h4,{id:"response-example",children:"Response example"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "errors": [\n    {\n      "source": "expires_at",\n      "errors": [\n        "expires_at must be later than purchased_at."\n      ]\n    }\n  ],\n  "error_code": "expires_date_error",\n  "status_code": 400\n}\n'})})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},74732:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[{value:"Body",id:"body",level:5},{value:"Response example",id:"response-example",level:5}];function d(e){const r={code:"code",h5:"h5",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{}),"\n",(0,t.jsxs)(r.p,{children:["The request failed because the specified profile wasn\u2019t found. Double-check the ",(0,t.jsx)(r.code,{children:"customer_user_id"})," or ",(0,t.jsx)(r.code,{children:"profile_id"})," for any typos."]}),"\n",(0,t.jsx)(r.h5,{id:"body",children:"Body"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"errors"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"source"}),": (string) Always ",(0,t.jsx)(r.code,{children:"null"}),"."]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"errors"}),": A description of the error."]})]})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"error_code"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsxs)(r.td,{children:["Short error name. Always ",(0,t.jsx)(r.code,{children:"profile_does_not_exist"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"status_code"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsxs)(r.td,{children:["HTTP status. Always ",(0,t.jsx)(r.code,{children:"404"}),"."]})]})]})]}),"\n",(0,t.jsx)(r.h5,{id:"response-example",children:"Response example"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n    "errors": [\n        {\n            "source": null,\n            "errors": [\n                "Profile not found"\n            ]\n        }\n    ],\n    "error_code": "profile_does_not_exist",\n    "status_code": 404\n}\n'})})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},75006:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[{value:"Body",id:"body",level:4},{value:"Response example",id:"response-example",level:4}];function d(e){const r={a:"a",code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:["The request failed because the ",(0,t.jsx)(r.code,{children:"offer_type"})," parameter is set to ",(0,t.jsx)(r.code,{children:"free_trial"}),", but the ",(0,t.jsx)(r.code,{children:"value"})," parameter of the ",(0,t.jsx)(r.a,{href:"server-side-api-objects#price",children:"Price"})," object isn\u2019t set to zero."]}),"\n",(0,t.jsxs)(r.p,{children:["Another possible reason is that the ",(0,t.jsx)(r.code,{children:"offer_id"})," parameter was included but left ",(0,t.jsx)(r.code,{children:"null"}),", even though it can\u2019t be null. In this case, either provide a value for ",(0,t.jsx)(r.code,{children:"offer_id"})," or remove the parameter entirely."]}),"\n",(0,t.jsx)(r.h4,{id:"body",children:"Body"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"errors"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"source"}),": (string) Always ",(0,t.jsx)(r.code,{children:"offer.type"})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"errors"}),": A description of the error."]})]})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"error_code"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsxs)(r.td,{children:["Short error name. Always: ",(0,t.jsx)(r.code,{children:"free_trial_price_error"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"status_code"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsxs)(r.td,{children:["HTTP status. Always ",(0,t.jsx)(r.code,{children:"400"}),"."]})]})]})]}),"\n",(0,t.jsx)(r.h4,{id:"response-example",children:"Response example"}),"\n",(0,t.jsx)(r.p,{children:"The profile is not found"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "errors": [\n    {\n      "source": "offer_type",\n      "errors": [\n        "If offer_type is \'free_trial\', price.value must be 0."\n      ]\n    }\n  ],\n  "error_code": "free_trial_price_error",\n  "status_code": 400\n}\n'})})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},76770:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[{value:"Body",id:"body",level:4},{value:"Response example",id:"response-example",level:4}];function d(e){const r={code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:["The request failed because it either includes ",(0,t.jsx)(r.code,{children:"cancellation_reason"})," without a ",(0,t.jsx)(r.code,{children:"refunded_at"})," date, or it has ",(0,t.jsx)(r.code,{children:"refunded_at"})," without a ",(0,t.jsx)(r.code,{children:"cancellation_reason"}),"."]}),"\n",(0,t.jsx)(r.p,{children:"When a refund is set, both the refund date and reason need to be specified."}),"\n",(0,t.jsx)(r.h4,{id:"body",children:"Body"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"errors"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"source"}),": (string) Always ",(0,t.jsx)(r.code,{children:"refunded_at"})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"errors"}),": A description of the error."]})]})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"error_code"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsxs)(r.td,{children:["Short error name. Always ",(0,t.jsx)(r.code,{children:"refund_fields_error"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"status_code"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsxs)(r.td,{children:["HTTP status. Always ",(0,t.jsx)(r.code,{children:"400"}),"."]})]})]})]}),"\n",(0,t.jsx)(r.h4,{id:"response-example",children:"Response example"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "errors": [\n    {\n      "source": "refunded_at",\n      "errors": [\n        "refunded_at and cancellation_reason=refund must be specified together."\n      ]\n    }\n  ],\n  "error_code": "refund_fields_error",\n  "status_code": 400\n}\n'})})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},82917:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[{value:"Body",id:"body",level:4},{value:"Response example",id:"response-example",level:4}];function d(e){const r={code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:["A billing issue happens when there\u2019s a problem during a subscription renewal attempt, so it always occurs after the transaction date (",(0,t.jsx)(r.code,{children:"purchased_at"}),")."]}),"\n",(0,t.jsxs)(r.p,{children:["To resolve this, make sure the billing issue date (",(0,t.jsx)(r.code,{children:"billing_issue_detected_at"}),") is later than the transaction date (",(0,t.jsx)(r.code,{children:"purchased_at"}),")."]}),"\n",(0,t.jsx)(r.h4,{id:"body",children:"Body"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"errors"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"source"}),": (string) Always ",(0,t.jsx)(r.code,{children:"billing_issue_detected_at"})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"errors"}),": A description of the error."]})]})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"error_code"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsxs)(r.td,{children:["Short error name. Always ",(0,t.jsx)(r.code,{children:"billing_issue_detected_at_date_comparison_error"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"status_code"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsxs)(r.td,{children:["HTTP status. Always ",(0,t.jsx)(r.code,{children:"400"}),"."]})]})]})]}),"\n",(0,t.jsx)(r.h4,{id:"response-example",children:"Response example"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "errors": [\n    {\n      "source": "billing_issue_detected_at",\n      "errors": [\n        "billing_issue_detected_at must be later than purchased_at."\n      ]\n    }\n  ],\n  "error_code": "billing_issue_detected_at_date_comparison_error",\n  "status_code": 400\n}\n'})})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},84315:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[{value:"Body",id:"body",level:4},{value:"Response example",id:"response-example",level:4}];function d(e){const r={a:"a",code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.p,{children:"In the case of prolonged subscriptions, a chain of subscriptions is generated. The original transaction is the very first transaction in this chain and the chain is linked by it. Other transactions in the chain are prolongations. If the transaction is the very first purchase in the subscription chain, it can be its own original transaction."}),"\n",(0,t.jsxs)(r.p,{children:["Another case is a one-time purchase. It never creates chains as it cannot have prolongations. For it, the ",(0,t.jsx)(r.code,{children:"store_transaction_id"})," is always the same as the ",(0,t.jsx)(r.code,{children:"store_original_transaction_id"}),"."]}),"\n",(0,t.jsxs)(r.p,{children:["Your request failed because the ",(0,t.jsx)(r.code,{children:"store_transaction_id"})," value for the ",(0,t.jsx)(r.a,{href:"server-side-api-objects#one-time-purchase",children:"One-Time Purchase"})," object differs from its ",(0,t.jsx)(r.code,{children:"store_original_transaction_id"})," . To fix the issue, either make them the same, or change the object - use ",(0,t.jsx)(r.a,{href:"server-side-api-objects#subscription",children:"Subscription"})," instead of the ",(0,t.jsx)(r.a,{href:"server-side-api-objects#one-time-purchase",children:"One-Time Purchase"}),"."]}),"\n",(0,t.jsx)(r.h4,{id:"body",children:"Body"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"errors"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"source"}),": (string) Always ",(0,t.jsx)(r.code,{children:"store_transaction_id"})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"errors"}),": A description of the error."]})]})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"error_code"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsxs)(r.td,{children:["Short error name. Always ",(0,t.jsx)(r.code,{children:"store_transaction_id_error"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"status_code"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsxs)(r.td,{children:["HTTP status. Always ",(0,t.jsx)(r.code,{children:"400."})]})]})]})]}),"\n",(0,t.jsx)(r.h4,{id:"response-example",children:"Response example"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "errors": [\n    {\n      "source": "store_transaction_id",\n      "errors": [\n        "store_transaction_id must be equal to store_original_transaction_id for purchase."\n      ]\n    }\n  ],\n  "error_code": "store_transaction_id_error",\n  "status_code": 400\n}\n'})})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},95615:(e,r,s)=>{s.d(r,{Ay:()=>l,RM:()=>i});var t=s(74848),n=s(28453);const i=[{value:"Body",id:"body",level:4},{value:"Response example",id:"response-example",level:4}];function d(e){const r={code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:["The request failed because the purchase date (",(0,t.jsx)(r.code,{children:"purchased_at"}),") is earlier than or equal to the refund date (",(0,t.jsx)(r.code,{children:"refunded_at"}),"). A refund always happens after a purchase, as it reverses the transaction."]}),"\n",(0,t.jsxs)(r.p,{children:["To fix this, check the ",(0,t.jsx)(r.code,{children:"purchased_at"})," and ",(0,t.jsx)(r.code,{children:"refunded_at"})," parameters and make sure the refund date is later than the purchase date."]}),"\n",(0,t.jsx)(r.h4,{id:"body",children:"Body"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"errors"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"source"}),": (string) Always ",(0,t.jsx)(r.code,{children:"refunded_at"})]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"errors"}),": A description of the error."]})]})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"error_code"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsxs)(r.td,{children:["Short error name. Always ",(0,t.jsx)(r.code,{children:"refund_date_error"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"status_code"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsxs)(r.td,{children:["HTTP status. Always ",(0,t.jsx)(r.code,{children:"400"}),"."]})]})]})]}),"\n",(0,t.jsx)(r.h4,{id:"response-example",children:"Response example"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "errors": [\n    {\n      "source": "refunded_at",\n      "errors": [\n        "refunded_at must be later than purchased_at."\n      ]\n    }\n  ],\n  "error_code": "refund_date_error",\n  "status_code": 400\n}\n'})})]})}function l(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);