"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[2257],{11470:(e,t,a)=>{a.d(t,{A:()=>j});var r=a(96540),n=a(34164),s=a(23104),i=a(56347),l=a(205),o=a(57485),u=a(31682),c=a(70679);function d(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:a}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return d(e).map((e=>{let{props:{value:t,label:a,attributes:r,default:n}}=e;return{value:t,label:a,attributes:r,default:n}}))}(a);return function(e){const t=(0,u.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function p(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function y(e){let{queryString:t=!1,groupId:a}=e;const n=(0,i.W6)(),s=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,o.aZ)(s),(0,r.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(n.location.search);t.set(s,e),n.replace({...n.location,search:t.toString()})}),[s,n])]}function b(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,s=h(e),[i,o]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=a.find((e=>e.default))??a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:s}))),[u,d]=y({queryString:a,groupId:n}),[b,f]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,s]=(0,c.Dv)(a);return[n,(0,r.useCallback)((e=>{a&&s.set(e)}),[a,s])]}({groupId:n}),w=(()=>{const e=u??b;return p({value:e,tabValues:s})?e:null})();(0,l.A)((()=>{w&&o(w)}),[w]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),f(e)}),[d,f,s]),tabValues:s}}var f=a(92303);const w={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var m=a(74848);function v(e){let{className:t,block:a,selectedValue:r,selectValue:i,tabValues:l}=e;const o=[],{blockElementScrollPositionUntilNextRender:u}=(0,s.a_)(),c=e=>{const t=e.currentTarget,a=o.indexOf(t),n=l[a].value;n!==r&&(u(t),i(n))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const a=o.indexOf(e.currentTarget)+1;t=o[a]??o[0];break}case"ArrowLeft":{const a=o.indexOf(e.currentTarget)-1;t=o[a]??o[o.length-1];break}}t?.focus()};return(0,m.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.A)("tabs",{"tabs--block":a},t),children:l.map((e=>{let{value:t,label:a,attributes:s}=e;return(0,m.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>o.push(e),onKeyDown:d,onClick:c,...s,className:(0,n.A)("tabs__item",w.tabItem,s?.className,{"tabs__item--active":r===t}),children:a??t},t)}))})}function g(e){let{lazy:t,children:a,selectedValue:n}=e;const s=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=s.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,m.jsx)("div",{className:"margin-top--md",children:s.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n})))})}function x(e){const t=b(e);return(0,m.jsxs)("div",{className:(0,n.A)("tabs-container",w.tabList),children:[(0,m.jsx)(v,{...t,...e}),(0,m.jsx)(g,{...t,...e})]})}function j(e){const t=(0,f.A)();return(0,m.jsx)(x,{...e,children:d(e.children)},String(t))}},19365:(e,t,a)=>{a.d(t,{A:()=>i});a(96540);var r=a(34164);const n={tabItem:"tabItem_Ymn6"};var s=a(74848);function i(e){let{children:t,hidden:a,className:i}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(n.tabItem,i),hidden:a,children:t})}},68041:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>l,toc:()=>u});var r=a(74848),n=a(28453);a(11470),a(19365);const s={title:"Adapty Web API",description:"",metadataTitle:"",toc_max_heading_level:4,displayed_sidebar:"APISidebar"},i=void 0,l={id:"web-api",title:"Adapty Web API",description:"",source:"@site/versioned_docs/version-3.0/web-api.md",sourceDirName:".",slug:"/web-api",permalink:"/docs/web-api",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Adapty Web API",description:"",metadataTitle:"",toc_max_heading_level:4,displayed_sidebar:"APISidebar"},sidebar:"APISidebar",previous:{title:"Migration guide to server-side API v2",permalink:"/docs/migration-guide-to-server-side-API-v2"},next:{title:"Authorization and request format",permalink:"/docs/web-api-authorization"}},o={},u=[{value:"Use case: Record a transaction from your web app and link it to the used paywall",id:"use-case-record-a-transaction-from-your-web-app-and-link-it-to-the-used-paywall",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Steps with Adapty API",id:"steps-with-adapty-api",level:3}];function c(e){const t={a:"a",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"The Web API is an extension of the server-side API designed for use with web apps. It allows you to retrieve the correct paywall using its related placement ID and record paywall views for accurate conversion tracking. This helps you use the A/B testing and paywall personalization available within Adapty, as well as track which paywalls work the best."}),"\n",(0,r.jsx)(t.h2,{id:"use-case-record-a-transaction-from-your-web-app-and-link-it-to-the-used-paywall",children:"Use case: Record a transaction from your web app and link it to the used paywall"}),"\n",(0,r.jsx)(t.p,{children:"Let's say you sell products in your web app. You need to display a paywall to your users, let them purchase a product, and then add the transaction details to Adapty. It\u2019s essential to link these transactions to the specific paywalls through which the user made the purchase so that your analytics reflects accurate data. This can be easily accomplished using the Adapty API"}),"\n",(0,r.jsx)(t.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"create-product",children:"Create the products"})," you\u2019ll use in the paywall within the Adapty Dashboard."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"create-paywall",children:"Create the paywall"})," in the Adapty Dashboard. ",(0,r.jsx)(t.a,{href:"customize-paywall-with-remote-config",children:"Use remote config"})," to design your web paywall."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"create-placement",children:"Set up a placement"})," and link the paywall to it in the Adapty Dashboard."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"steps-with-adapty-api",children:"Steps with Adapty API"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Create a user profile:"})," Adapty relies on having a profile before requesting a paywall to personalize the end result to the user who requested it. Use the ",(0,r.jsx)(t.a,{href:"ss-create-profile",children:"Create profile"})," request to create a user profile."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Fetch and display the paywall:"})," When the user reaches the placement in your web app where the paywall should be shown, use the ",(0,r.jsx)(t.a,{href:"web-api-get-paywall",children:"Get paywall"})," request to retrieve the paywall via the ",(0,r.jsx)(t.a,{href:"placements",children:"placement ID"}),". As a result, you'll get a paywall for the ",(0,r.jsx)(t.a,{href:"audience",children:"audience"})," corresponding to your user. Display the paywall with your code, using the returned products and (optionally) this paywall's ",(0,r.jsx)(t.a,{href:"customize-paywall-with-remote-config",children:"remote config"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Record the paywall view:"})," Use the ",(0,r.jsx)(t.a,{href:"web-api-record-paywall-view",children:"Record paywall view"})," to log the paywall view with Adapty to ensure your analytics accurately reflect the event. This is vital to track conversions correctly."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Record the purchase:"})," If the user completes a purchase, send the transaction details to Adapty using the Adapty API. Include the ",(0,r.jsx)(t.strong,{children:"variation ID"})," in this request to link the transaction to the specific paywall displayed. For guidance, check out our page on ",(0,r.jsx)(t.a,{href:"report-transactions-observer-mode",children:"associating paywalls with transactions in mobile apps"}),"\u2014the same approach applies to web apps."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Add marketing attribution data (if applicable):"})," If you have any marketing attribution data (e.g., campaign or ad details), use the ",(0,r.jsx)(t.a,{href:"web-api-add-attribution",children:"Add attribution"})," to merge it into the user profile to enrich the analytics and learn more about your ad performance in Adapty."]}),"\n"]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"What's next:"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Proceed with ",(0,r.jsx)(t.a,{href:"web-api-authorization",children:"Web API authorization"})]}),"\n",(0,r.jsxs)(t.li,{children:["Requests:","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"web-api-add-attribution",children:"Add attribution"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"web-api-get-paywall",children:"Get paywall"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"web-api-record-paywall-view",children:"Record paywall view"})}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);