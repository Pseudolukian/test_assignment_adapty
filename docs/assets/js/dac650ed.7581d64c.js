"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[2925],{4043:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/4eaae3f-CleanShot_2023-08-21_at_12.35.312x-7425867b1023cf1920d887a0088472e5.webp"},11470:(e,t,n)=>{n.d(t,{A:()=>j});var a=n(96540),s=n(34164),r=n(23104),i=n(56347),o=n(205),l=n(57485),c=n(31682),d=n(70679);function u(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??function(e){return u(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:s}}=e;return{value:t,label:n,attributes:a,default:s}}))}(n);return function(e){const t=(0,c.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function b(e){let{queryString:t=!1,groupId:n}=e;const s=(0,i.W6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l.aZ)(r),(0,a.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(s.location.search);t.set(r,e),s.replace({...s.location,search:t.toString()})}),[r,s])]}function g(e){const{defaultValue:t,queryString:n=!1,groupId:s}=e,r=p(e),[i,l]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:r}))),[c,u]=b({queryString:n,groupId:s}),[g,y]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[s,r]=(0,d.Dv)(n);return[s,(0,a.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:s}),f=(()=>{const e=c??g;return h({value:e,tabValues:r})?e:null})();(0,o.A)((()=>{f&&l(f)}),[f]);return{selectedValue:i,selectValue:(0,a.useCallback)((e=>{if(!h({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),y(e)}),[u,y,r]),tabValues:r}}var y=n(92303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var m=n(74848);function x(e){let{className:t,block:n,selectedValue:a,selectValue:i,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,r.a_)(),d=e=>{const t=e.currentTarget,n=l.indexOf(t),s=o[n].value;s!==a&&(c(t),i(s))},u=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;t=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;t=l[n]??l[l.length-1];break}}t?.focus()};return(0,m.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},t),children:o.map((e=>{let{value:t,label:n,attributes:r}=e;return(0,m.jsx)("li",{role:"tab",tabIndex:a===t?0:-1,"aria-selected":a===t,ref:e=>l.push(e),onKeyDown:u,onClick:d,...r,className:(0,s.A)("tabs__item",f.tabItem,r?.className,{"tabs__item--active":a===t}),children:n??t},t)}))})}function A(e){let{lazy:t,children:n,selectedValue:s}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===s));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return(0,m.jsx)("div",{className:"margin-top--md",children:r.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==s})))})}function v(e){const t=g(e);return(0,m.jsxs)("div",{className:(0,s.A)("tabs-container",f.tabList),children:[(0,m.jsx)(x,{...t,...e}),(0,m.jsx)(A,{...t,...e})]})}function j(e){const t=(0,y.A)();return(0,m.jsx)(v,{...e,children:u(e.children)},String(t))}},19365:(e,t,n)=>{n.d(t,{A:()=>i});n(96540);var a=n(34164);const s={tabItem:"tabItem_Ymn6"};var r=n(74848);function i(e){let{children:t,hidden:n,className:i}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,a.A)(s.tabItem,i),hidden:n,children:t})}},26819:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/e053006-CleanShot_2023-08-21_at_12.50.162x-e946f048dcfc95bf74134b3105a46e0b.webp"},42080:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/14b6d84-CleanShot_2023-08-18_at_20.37.462x-b73ec8ab60a41c3e111b9858ffb300da.webp"},42408:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/7404bde-CleanShot_2023-08-21_at_12.33.242x-48e90ac48afc6ddf9c1ca37d0d092acd.webp"},61295:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/0266112-CleanShot_2023-08-21_at_12.34.442x-33b013bb4cd342f6bc4cfb0c87d4c5e1.webp"},62327:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/7923397-set_up_events_names-4066c6ad5b0bc37dc8b9e1053eacb667.webp"},71400:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>b,frontMatter:()=>l,metadata:()=>d,toc:()=>p});var a=n(74848),s=n(28453),r=n(34028),i=(n(26393),n(11470)),o=n(19365);const l={title:"Firebase and Google Analytics",description:"Integrate Firebase and Google Analytics with Adapty for better insights.",metadataTitle:"Firebase & Google Analytics Integration | Adapty Docs"},c=void 0,d={id:"firebase-and-google-analytics",title:"Firebase and Google Analytics",description:"Integrate Firebase and Google Analytics with Adapty for better insights.",source:"@site/versioned_docs/version-3.0/firebase-and-google-analytics.md",sourceDirName:".",slug:"/firebase-and-google-analytics",permalink:"/docs/firebase-and-google-analytics",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Firebase and Google Analytics",description:"Integrate Firebase and Google Analytics with Adapty for better insights.",metadataTitle:"Firebase & Google Analytics Integration | Adapty Docs"},sidebar:"tutorialSidebar",previous:{title:"AppMetrica",permalink:"/docs/appmetrica"},next:{title:"Mixpanel",permalink:"/docs/mixpanel"}},u={},p=[{value:"How to set up Firebase integration",id:"how-to-set-up-firebase-integration",level:2},{value:"1. Set up Firebase",id:"1-set-up-firebase",level:3},{value:"2. Integrate with Adapty",id:"2-integrate-with-adapty",level:3},{value:"SDK configuration",id:"sdk-configuration",level:2},{value:"Sending events and user properties",id:"sending-events-and-user-properties",level:2}];function h(e){const t={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"If you use such Google products as Google Analytics, Firebase, and BigQuery you may enrich your analytical data with events from Adapty using the integration described in this article. Events are sent through Google Analytics to Firebase and may be used in any of these services."}),"\n",(0,a.jsx)(t.h2,{id:"how-to-set-up-firebase-integration",children:"How to set up Firebase integration"}),"\n",(0,a.jsx)(t.h3,{id:"1-set-up-firebase",children:"1. Set up Firebase"}),"\n",(0,a.jsxs)(t.p,{children:["First of all, you have to enable integration between Firebase and Google Analytics. You can do it in your Firebase Console in the ",(0,a.jsx)(t.strong,{children:"Integrations"})," tab."]}),"\n",(0,a.jsx)(r.A,{children:(0,a.jsx)("img",{src:n(42080).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,a.jsx)(t.h3,{id:"2-integrate-with-adapty",children:"2. Integrate with Adapty"}),"\n",(0,a.jsx)(t.p,{children:"Then Adapty needs your Firebase App ID and Google Analytics API Secret to send events and user properties. You can find these parameters in the Firebase Console and Google Analytics Data Streams Tab respectively."}),"\n",(0,a.jsx)(r.A,{children:(0,a.jsx)("img",{src:n(99811).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,a.jsxs)(t.p,{children:["Next, access the App's Stream details page within the Data Streams section of Admin settings in ",(0,a.jsx)(t.a,{href:"https://analytics.google.com/analytics/web/#/",children:"Google Analytics."})]}),"\n",(0,a.jsx)(r.A,{children:(0,a.jsx)("img",{src:n(88741).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,a.jsxs)(t.p,{children:["Under ",(0,a.jsx)(t.strong,{children:"Additional settings"}),", go to the ",(0,a.jsx)(t.strong,{children:"Measurement Protocol API secrets"})," page and create a new ",(0,a.jsx)(t.strong,{children:"API Secret"})," if it doesn't exist. Copy the value."]}),"\n",(0,a.jsx)(r.A,{children:(0,a.jsx)("img",{src:n(42408).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,a.jsx)(r.A,{children:(0,a.jsx)("img",{src:n(61295).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,a.jsx)(t.p,{children:"Then, your next step will be adjusting integration in Adapty Dashboard. You will need to provide Firebase App ID and Google Analytics API Secret to us for your iOS and Android platforms."}),"\n",(0,a.jsx)(r.A,{children:(0,a.jsx)("img",{src:n(4043).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,a.jsx)(t.h2,{id:"sdk-configuration",children:"SDK configuration"}),"\n",(0,a.jsxs)(t.p,{children:["Then you have to set up Adapty SDK to associate your users with Firebase. For each user, you should send the ",(0,a.jsx)(t.code,{children:"firebase_app_instance_id"})," to Adapty. Here you can see an example of the code that can be used to integrate Firebase SDK and Adapty SDK."]}),"\n",(0,a.jsxs)(i.A,{groupId:"current-os",queryString:!0,children:[(0,a.jsx)(o.A,{value:"swift",label:"iOS (Swift)",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-swift",metastring:"showLineNumbers",children:'import FirebaseCore\nimport FirebaseAnalytics\n\nFirebaseApp.configure()\n        \nif let appInstanceId = Analytics.appInstanceID() {            \n    do {\n        try await Adapty.setIntegrationIdentifier(\n            key: "firebase_app_instance_id", \n            value: appInstanceId\n        )\n    } catch {\n        // handle the error\n    }\n}\n'})})}),(0,a.jsx)(o.A,{value:"kotlin",label:"Android (Kotlin)",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-kotlin",metastring:"showLineNumbers",children:'//after Adapty.activate()\n\nFirebaseAnalytics.getInstance(context).appInstanceId.addOnSuccessListener { appInstanceId ->\n    Adapty.setIntegrationIdentifier("firebase_app_instance_id", appInstanceId) { error ->\n        if (error != null) {\n            // handle the error\n        }\n    }\n}\n'})})}),(0,a.jsx)(o.A,{value:"java",label:"Java",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",metastring:"showLineNumbers",children:'//after Adapty.activate()\n\nFirebaseAnalytics.getInstance(context).getAppInstanceId().addOnSuccessListener(appInstanceId -> {\n    Adapty.setIntegrationIdentifier("firebase_app_instance_id", appInstanceId, error -> {\n        if (error != null) {\n            // handle the error\n        }\n    });\n});\n'})})}),(0,a.jsx)(o.A,{value:"flutter",label:"Flutter (Dart)",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",metastring:"showLineNumbers",children:"import 'package:firebase_analytics/firebase_analytics.dart';\n\nfinal appInstanceId = await FirebaseAnalytics.instance.appInstanceId;\n\ntry {\n    await Adapty().setIntegrationIdentifier(\n        key: \"firebase_app_instance_id\", \n        value: appInstanceId,\n    );\n} on AdaptyError catch (adaptyError) {\n    // handle the error\n} catch (e) {\n    // handle the error\n}\n"})})}),(0,a.jsx)(o.A,{value:"unity",label:"Unity (C#)",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-csharp",metastring:"showLineNumbers",children:'using AdaptySDK;\n\n// We suppose FirebaseAnalytics Unity Plugin is already installed\n\nFirebase.Analytics\n  .FirebaseAnalytics\n  .GetAnalyticsInstanceIdAsync()\n  .ContinueWithOnMainThread((task) => {\n    if (!task.IsCompletedSuccessfully) {\n      // handle error\n      return;\n    }\n\n    var firebaseId = task.Result\n    var builder = new Adapty.ProfileParameters.Builder();\n    \n    Adapty.SetIntegrationIdentifier(\n      "firebase_app_instance_id", \n      firebaseId, \n      (error) => {\n        // handle the error\n    });\n  });\n'})})}),(0,a.jsx)(o.A,{value:"rn",label:"React Native (TS)",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",metastring:"showLineNumbers",children:"import analytics from '@react-native-firebase/analytics';\nimport { adapty } from 'react-native-adapty';\n\ntry {\n  const appInstanceId = await analytics().getAppInstanceId();\n\n  await adapty.setIntegrationIdentifier(\"firebase_app_instance_id\", appInstanceId);\n} catch (error) {\n  // handle `AdaptyError`\n}\n"})})})]}),"\n",(0,a.jsx)(t.h2,{id:"sending-events-and-user-properties",children:"Sending events and user properties"}),"\n",(0,a.jsx)(t.p,{children:"And now it is time to decide which events you will receive in Firebase and Google Analytics."}),"\n",(0,a.jsx)(r.A,{children:(0,a.jsx)("img",{src:n(62327).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,a.jsxs)(t.p,{children:['You can see that some events have designated names, for example. "Purchase", while other ones are usual Adapty events. This discrepancy comes from',(0,a.jsx)(t.a,{href:"https://developers.google.com/analytics/devguides/collection/protocol/ga4/reference/events",children:" Google Analytics event types"}),". Currently, supported events are ",(0,a.jsx)(t.a,{href:"https://developers.google.com/analytics/devguides/collection/protocol/ga4/reference/events#refund%22%3ERefund",children:"Refund"})," and  ",(0,a.jsx)(t.a,{href:"https://developers.google.com/analytics/devguides/collection/protocol/ga4/reference/events#purchase%22%3EPurchase",children:"Purchase"}),". Other events are custom events. So, please ensure that your event names are ",(0,a.jsx)(t.a,{href:"https://developers.google.com/analytics/devguides/collection/protocol/ga4/sending-events?client_type=firebase#limitations%22%3E",children:"supported"}),"  by Google Analytics.",(0,a.jsx)(t.br,{}),"\n","Also, you can set up sending user properties in the Adapty dashboard."]}),"\n",(0,a.jsx)(r.A,{children:(0,a.jsx)("img",{src:n(26819).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,a.jsxs)(t.p,{children:["This means that your events will be enriched with ",(0,a.jsx)(t.code,{children:"subscription_state"})," and ",(0,a.jsx)(t.code,{children:"subscription_product_id"})," by Adapty. But you also have to ",(0,a.jsx)(t.a,{href:"https://support.google.com/analytics/answer/10075209?hl=en",children:"enable"})," this feature in Google Analytics. So to use ",(0,a.jsx)(t.strong,{children:"User properties"})," in your analytics, begin by assigning them to a custom dimension through the Firebase Console's ",(0,a.jsx)(t.strong,{children:"Custom Definitions"})," by selecting the ",(0,a.jsx)(t.strong,{children:"User scope"}),", naming, and describing them."]}),"\n",(0,a.jsx)(r.A,{children:(0,a.jsx)("img",{src:n(76804).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,a.jsx)(r.A,{children:(0,a.jsx)("img",{src:n(86772).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,a.jsxs)(t.p,{children:["Please check that your user property names are ",(0,a.jsx)(t.code,{children:"subscription_state"})," and ",(0,a.jsx)(t.code,{children:"subscription_product_id"}),". Otherwise, we won't be able to send you subscription status data."]}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsx)(t.p,{children:"There is a time delay between when events are sent from Adapty and when they appear on the Google Analytics Dashboard. It's suggested to monitor the Realtime Dashboard on your Google Analytics account to see the latest events in real-time."})}),"\n",(0,a.jsx)(t.p,{children:"And that's all! Wait for new insights from Google."})]})}function b(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},76804:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/1962ef1-CleanShot_2023-08-21_at_12.48.222x-89c24c9e55678b7c69e35f51c34d725c.webp"},86772:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/2425cc0-CleanShot_2023-08-21_at_12.52.532x-0b1fbf7cabd991af88241ee48846b1ea.webp"},88741:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/b26ae6a-CleanShot_2023-08-21_at_12.28.482x-283cac165f53c10c26c446a22f9012f6.webp"},99811:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/14d8224-CleanShot_2023-08-21_at_12.14.182x-b42c18ac73d2e0bbb1c2ce2fd7c125c9.webp"}}]);