"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[8900],{11470:(e,t,a)=>{a.d(t,{A:()=>I});var n=a(96540),r=a(34164),i=a(23104),o=a(56347),l=a(205),d=a(57485),s=a(31682),c=a(70679);function u(e){return n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:t,children:a}=e;return(0,n.useMemo)((()=>{const e=t??function(e){return u(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:r}}=e;return{value:t,label:a,attributes:n,default:r}}))}(a);return function(e){const t=(0,s.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function h(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function f(e){let{queryString:t=!1,groupId:a}=e;const r=(0,o.W6)(),i=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,d.aZ)(i),(0,n.useCallback)((e=>{if(!i)return;const t=new URLSearchParams(r.location.search);t.set(i,e),r.replace({...r.location,search:t.toString()})}),[i,r])]}function m(e){const{defaultValue:t,queryString:a=!1,groupId:r}=e,i=p(e),[o,d]=(0,n.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:i}))),[s,u]=f({queryString:a,groupId:r}),[m,g]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,i]=(0,c.Dv)(a);return[r,(0,n.useCallback)((e=>{a&&i.set(e)}),[a,i])]}({groupId:r}),b=(()=>{const e=s??m;return h({value:e,tabValues:i})?e:null})();(0,l.A)((()=>{b&&d(b)}),[b]);return{selectedValue:o,selectValue:(0,n.useCallback)((e=>{if(!h({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);d(e),u(e),g(e)}),[u,g,i]),tabValues:i}}var g=a(92303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var y=a(74848);function w(e){let{className:t,block:a,selectedValue:n,selectValue:o,tabValues:l}=e;const d=[],{blockElementScrollPositionUntilNextRender:s}=(0,i.a_)(),c=e=>{const t=e.currentTarget,a=d.indexOf(t),r=l[a].value;r!==n&&(s(t),o(r))},u=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const a=d.indexOf(e.currentTarget)+1;t=d[a]??d[0];break}case"ArrowLeft":{const a=d.indexOf(e.currentTarget)-1;t=d[a]??d[d.length-1];break}}t?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":a},t),children:l.map((e=>{let{value:t,label:a,attributes:i}=e;return(0,y.jsx)("li",{role:"tab",tabIndex:n===t?0:-1,"aria-selected":n===t,ref:e=>d.push(e),onKeyDown:u,onClick:c,...i,className:(0,r.A)("tabs__item",b.tabItem,i?.className,{"tabs__item--active":n===t}),children:a??t},t)}))})}function A(e){let{lazy:t,children:a,selectedValue:r}=e;const i=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=i.find((e=>e.props.value===r));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:i.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==r})))})}function v(e){const t=m(e);return(0,y.jsxs)("div",{className:(0,r.A)("tabs-container",b.tabList),children:[(0,y.jsx)(w,{...t,...e}),(0,y.jsx)(A,{...t,...e})]})}function I(e){const t=(0,g.A)();return(0,y.jsx)(v,{...e,children:u(e.children)},String(t))}},19365:(e,t,a)=>{a.d(t,{A:()=>o});a(96540);var n=a(34164);const r={tabItem:"tabItem_Ymn6"};var i=a(74848);function o(e){let{children:t,hidden:a,className:o}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,n.A)(r.tabItem,o),hidden:a,children:t})}},89907:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var n=a(74848),r=a(28453);a(11470),a(19365);const i={title:"Migration guide to Adapty Flutter SDK 3.3.x",description:"",metadataTitle:""},o=void 0,l={id:"migration-to-flutter330",title:"Migration guide to Adapty Flutter SDK 3.3.x",description:"",source:"@site/versioned_docs/version-3.0/migration-to-flutter330.md",sourceDirName:".",slug:"/migration-to-flutter330",permalink:"/docs/migration-to-flutter330",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Migration guide to Adapty Flutter SDK 3.3.x",description:"",metadataTitle:""},sidebar:"tutorialSidebar",previous:{title:"Migration guide to Android Adapty SDK 3.3",permalink:"/docs/migration-to-android330"},next:{title:"Migration guide to Unity Adapty SDK 3.3",permalink:"/docs/migration-to-unity330"}},d={},s=[{value:"Update method for providing fallback paywalls",id:"update-method-for-providing-fallback-paywalls",level:2},{value:"Remove <code>getProductsIntroductoryOfferEligibility</code> method",id:"remove-getproductsintroductoryoffereligibility-method",level:2},{value:"Update third-party integration SDK configuration",id:"update-third-party-integration-sdk-configuration",level:2},{value:"Adjust",id:"adjust",level:3},{value:"AirBridge",id:"airbridge",level:3},{value:"Amplitude",id:"amplitude",level:3},{value:"AppMetrica",id:"appmetrica",level:3},{value:"AppsFlyer",id:"appsflyer",level:3},{value:"Branch",id:"branch",level:3},{value:"Firebase and Google Analytics",id:"firebase-and-google-analytics",level:3},{value:"Mixpanel",id:"mixpanel",level:3},{value:"OneSignal",id:"onesignal",level:3},{value:"Pushwoosh",id:"pushwoosh",level:3},{value:"Update Observer mode implementation",id:"update-observer-mode-implementation",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"Adapty SDK 3.3.0 is a major release that brought some improvements which however may require some migration steps from you."}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Update the method for providing fallback paywalls."}),"\n",(0,n.jsxs)(t.li,{children:["Remove ",(0,n.jsx)(t.code,{children:"getProductsIntroductoryOfferEligibility"})," method."]}),"\n",(0,n.jsx)(t.li,{children:"Update integration configurations for Adjust, AirBridge, Amplitude, AppMetrica, Appsflyer, Branch, Facebook Ads, Firebase and Google Analytics, Mixpanel, OneSignal, Pushwoosh."}),"\n",(0,n.jsx)(t.li,{children:"Update Observer mode implementation."}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"update-method-for-providing-fallback-paywalls",children:"Update method for providing fallback paywalls"}),"\n",(0,n.jsxs)(t.p,{children:["Previously, the method required the fallback paywall as a JSON string (",(0,n.jsx)(t.code,{children:"jsonString"}),"), but now it takes the path to the local fallback file (",(0,n.jsx)(t.code,{children:"assetId"}),") instead."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-diff",metastring:"showLineNumbers",children:" import 'dart:async' show Future;\n import 'dart:io' show Platform;\n-import 'package:flutter/services.dart' show rootBundle;\n\n-final filePath = Platform.isIOS ? 'assets/ios_fallback.json' : 'assets/android_fallback.json';\n-final jsonString = await rootBundle.loadString(filePath);\n+final assetId = Platform.isIOS ? 'assets/ios_fallback.json' : 'assets/android_fallback.json';\n\n try {\n-  await adapty.setFallbackPaywalls(jsonString);\n+  await adapty.setFallbackPaywalls(assetId);\n } on AdaptyError catch (adaptyError) {\n   // handle the error\n } catch (e) {\n }\n\n"})}),"\n",(0,n.jsxs)(t.p,{children:["For the complete code example, check out the ",(0,n.jsx)(t.a,{href:"flutter-use-fallback-paywalls",children:"Use fallback paywalls"})," page."]}),"\n",(0,n.jsxs)(t.h2,{id:"remove-getproductsintroductoryoffereligibility-method",children:["Remove ",(0,n.jsx)(t.code,{children:"getProductsIntroductoryOfferEligibility"})," method"]}),"\n",(0,n.jsx)(t.p,{children:"Before Adapty iOS SDK 3.3.0, the product object always included offers, regardless of whether the user was eligible. You had to manually check eligibility before using the offer."}),"\n",(0,n.jsx)(t.p,{children:"Now, the product object only includes an offer if the user is eligible. This means you no longer need to check eligibility \u2014 if an offer is present, the user is eligible."}),"\n",(0,n.jsx)(t.h2,{id:"update-third-party-integration-sdk-configuration",children:"Update third-party integration SDK configuration"}),"\n",(0,n.jsx)(t.p,{children:"To ensure integrations work properly with Adapty Flutter SDK 3.3.0 and later, update your SDK configurations for the following integrations as described in the sections below."}),"\n",(0,n.jsx)(t.h3,{id:"adjust",children:"Adjust"}),"\n",(0,n.jsxs)(t.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,n.jsx)(t.a,{href:"adjust#sdk-configuration",children:"SDK configuration for Adjust integration"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-diff",metastring:"showLineNumbers",children:" import 'package:adjust_sdk/adjust.dart';\n import 'package:adjust_sdk/adjust_config.dart';\n\n try {\n   final adid = await Adjust.getAdid();\n\n   if (adid == null) {\n     // handle the error\n   }\n\n+   await Adapty().setIntegrationIdentifier(\n+     key: \"adjust_device_id\", \n+     value: adid,\n+   );\n\n   final attributionData = await Adjust.getAttribution();\n\n   var attribution = Map<String, String>();\n\n   if (attributionData.trackerToken != null) attribution['trackerToken'] = attributionData.trackerToken!;\n   if (attributionData.trackerName != null) attribution['trackerName'] = attributionData.trackerName!;\n   if (attributionData.network != null) attribution['network'] = attributionData.network!;\n   if (attributionData.adgroup != null) attribution['adgroup'] = attributionData.adgroup!;\n   if (attributionData.creative != null) attribution['creative'] = attributionData.creative!;\n   if (attributionData.clickLabel != null) attribution['clickLabel'] = attributionData.clickLabel!;\n   if (attributionData.costType != null) attribution['costType'] = attributionData.costType!;\n   if (attributionData.costAmount != null) attribution['costAmount'] = attributionData.costAmount!.toString();\n   if (attributionData.costCurrency != null) attribution['costCurrency'] = attributionData.costCurrency!;\n   if (attributionData.fbInstallReferrer != null) attribution['fbInstallReferrer'] = attributionData.fbInstallReferrer!;\n\n-   Adapty().updateAttribution(\n-     attribution,\n-     source: AdaptyAttributionSource.adjust,\n-     networkUserId: adid,\n-   );\n+   await Adapty().updateAttribution(attribution, source: \"adjust\");\n } catch (e) {\n   // handle the error\n   } on AdaptyError catch (adaptyError) {\n   // handle the error\n }\n"})}),"\n",(0,n.jsx)(t.h3,{id:"airbridge",children:"AirBridge"}),"\n",(0,n.jsxs)(t.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,n.jsx)(t.a,{href:"airbridge#sdk-configuration",children:"SDK configuration for AirBridge integration"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-diff",metastring:"showLineNumbers",children:" import 'package:airbridge_flutter_sdk/airbridge_flutter_sdk.dart';\n\n  final deviceUUID = await Airbridge.state.deviceUUID;\n  \n  try {\n-     final builder = AdaptyProfileParametersBuilder()\n-         ..setAirbridgeDeviceId(deviceUUID);  \n-     await Adapty().updateProfile(builder.build());\n\n+     await Adapty().setIntegrationIdentifier(\n+         key: \"airbridge_device_id\", \n+         value: deviceUUID,\n+     );\n  } on AdaptyError catch (adaptyError) {\n     // handle the error\n  } catch (e) {\n     // handle the error\n  }\n"})}),"\n",(0,n.jsx)(t.h3,{id:"amplitude",children:"Amplitude"}),"\n",(0,n.jsxs)(t.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,n.jsx)(t.a,{href:"amplitude#sdk-configuration",children:"SDK configuration for Amplitude integration"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-diff",metastring:"showLineNumbers",children:' import \'package:amplitude_flutter/amplitude.dart\';\n\n final Amplitude amplitude = Amplitude.getInstance(instanceName: "YOUR_INSTANCE_NAME");\n\n final deviceId = await amplitude.getDeviceId();\n final userId = await amplitude.getUserId();\n\n try {\n-  final builder = AdaptyProfileParametersBuilder()\n-     ..setAmplitudeDeviceId(deviceId)\n-     ..setAmplitudeUserId(userId);\n-     await adapty.updateProfile(builder.build());\n\n+     await Adapty().setIntegrationIdentifier(\n+         key: "amplitude_user_id", \n+         value: userId,\n+     );\n+     await Adapty().setIntegrationIdentifier(\n+         key: "amplitude_device_id", \n+         value: deviceId,\n+     );\n  } on AdaptyError catch (adaptyError) {\n      // handle the error\n  } catch (e) {\n      // handle the error\n  }\n'})}),"\n",(0,n.jsx)(t.h3,{id:"appmetrica",children:"AppMetrica"}),"\n",(0,n.jsxs)(t.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,n.jsx)(t.a,{href:"appmetrica#sdk-configuration",children:"SDK configuration for AppMetrica integration"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-diff",metastring:"showLineNumbers",children:' import \'package:appmetrica_plugin/appmetrica_plugin.dart\';\n\n final deviceId = await AppMetrica.deviceId;\n\n if (deviceId != null) {\n   try {\n-   final builder = AdaptyProfileParametersBuilder()\n-     ..setAppmetricaDeviceId(deviceId)\n-     ..setAppmetricaProfileId("YOUR_ADAPTY_CUSTOMER_USER_ID");\n-\n-     await adapty.updateProfile(builder.build());\n   \n+     await Adapty().setIntegrationIdentifier(\n+         key: "appmetrica_device_id", \n+         value: deviceId,\n+     );\n+     await Adapty().setIntegrationIdentifier(\n+         key: "appmetrica_profile_id", \n+         value: "YOUR_ADAPTY_CUSTOMER_USER_ID",\n+     );\n    } on AdaptyError catch (adaptyError) {\n      // handle the error\n    } catch (e) {\n      // handle the error\n    }\n }\n'})}),"\n",(0,n.jsx)(t.h3,{id:"appsflyer",children:"AppsFlyer"}),"\n",(0,n.jsxs)(t.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,n.jsx)(t.a,{href:"appsflyer#sdk-configuration",children:"SDK configuration for AppsFlyer integration"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-diff",metastring:"showLineNumbers",children:' import \'package:appsflyer_sdk/appsflyer_sdk.dart\';\n\n AppsflyerSdk appsflyerSdk = AppsflyerSdk(<YOUR_OPTIONS>);\n \n appsflyerSdk.onInstallConversionData((data) async {\n     try {\n         final appsFlyerUID = await appsFlyerSdk.getAppsFlyerUID();\n-         await Adapty().updateAttribution(\n-           data,\n-           source: AdaptyAttributionSource.appsflyer,\n-           networkUserId: appsFlyerUID,\n-         );\n+         await Adapty().setIntegrationIdentifier(\n+           key: "appsflyer_id", \n+           value: appsFlyerUID,\n+         );\n+         \n+         await Adapty().updateAttribution(data, source: "appsflyer");\n     } on AdaptyError catch (adaptyError) {\n         // handle the error\n\n      } catch (e) {\n          // handle the error\n      }\n });\n\n appsflyerSdk.initSdk(\n     registerConversionDataCallback: true,\n     registerOnAppOpenAttributionCallback: true,\n     registerOnDeepLinkingCallback: true,\n );\n'})}),"\n",(0,n.jsx)(t.h3,{id:"branch",children:"Branch"}),"\n",(0,n.jsxs)(t.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,n.jsx)(t.a,{href:"branch#sdk-configuration",children:"SDK configuration for Branch integration"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-diff",metastring:"showLineNumbers",children:'import \'package:flutter_branch_sdk/flutter_branch_sdk.dart\';\n\nFlutterBranchSdk.initSession().listen((data) async {\n  try {\n+     await Adapty().setIntegrationIdentifier(\n+         key: "branch_id", \n+         value: <BRANCH_IDENTITY_ID>,\n+     );\n-    await Adapty().updateAttribution(data, source: AdaptyAttributionSource.branch);\n+    await Adapty().updateAttribution(data, source: "branch");\n  } on AdaptyError catch (adaptyError) {\n      // handle the error\n  } catch (e) {\n      // handle the error\n  }\n);\n'})}),"\n",(0,n.jsx)(t.h3,{id:"firebase-and-google-analytics",children:"Firebase and Google Analytics"}),"\n",(0,n.jsxs)(t.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,n.jsx)(t.a,{href:"firebase-and-google-analytics",children:"SDK configuration for Firebase and Google Analytics integration"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-diff",metastring:"showLineNumbers",children:"import 'package:firebase_analytics/firebase_analytics.dart';\n\nfinal appInstanceId = await FirebaseAnalytics.instance.appInstanceId;\n\ntry {\n-  final builder = AdaptyProfileParametersBuilder()\n-         ..setFirebaseAppInstanceId(appInstanceId);\n-  await adapty.updateProfile(builder.build());\n\n+  await Adapty().setIntegrationIdentifier(\n+         key: \"firebase_app_instance_id\", \n+         value: appInstanceId,\n+  );\n} on AdaptyError catch (adaptyError) {\n    // handle the error\n} catch (e) {\n    // handle the error\n}\n"})}),"\n",(0,n.jsx)(t.h3,{id:"mixpanel",children:"Mixpanel"}),"\n",(0,n.jsxs)(t.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,n.jsx)(t.a,{href:"mixpanel#sdk-configuration",children:"SDK configuration for Mixpanel integration"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-diff",metastring:"showLineNumbers",children:'import \'package:mixpanel_flutter/mixpanel_flutter.dart\';\n\nfinal mixpanel = await Mixpanel.init("Your Token", trackAutomaticEvents: true);\nfinal distinctId = await mixpanel.getDistinctId();\n\ntry {\n-   final builder = AdaptyProfileParametersBuilder()\n-      ..setMixpanelUserId(distinctId);\n-     await Adapty().updateProfile(builder.build());\n\n+     await Adapty().setIntegrationIdentifier(\n+         key: "mixpanel_user_id", \n+         value: distinctId,\n+     );\n} on AdaptyError catch (adaptyError) {\n    // handle the error\n} catch (e) {\n    // handle the error\n}\n'})}),"\n",(0,n.jsx)(t.h3,{id:"onesignal",children:"OneSignal"}),"\n",(0,n.jsxs)(t.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,n.jsx)(t.a,{href:"onesignal#sdk-configuration",children:"SDK configuration for OneSignal integration"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-diff",metastring:"showLineNumbers",children:' OneSignal.shared.setSubscriptionObserver((changes) {\n     final playerId = changes.to.userId;\n     if (playerId != null) {\n-         final builder = \n-             AdaptyProfileParametersBuilder()\n-                 ..setOneSignalPlayerId(playerId);\n-                 // ..setOneSignalSubscriptionId(playerId);\n          try {\n-             Adapty().updateProfile(builder.build());\n\n+             await Adapty().setIntegrationIdentifier(\n+                 key: "one_signal_player_id", \n+                 value: playerId,\n+             );\n          } on AdaptyError catch (adaptyError) {\n              // handle error\n          } catch (e) {\n              // handle error\n          }\n     }\n });\n'})}),"\n",(0,n.jsx)(t.h3,{id:"pushwoosh",children:"Pushwoosh"}),"\n",(0,n.jsxs)(t.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,n.jsx)(t.a,{href:"pushwoosh#sdk-configuration",children:"SDK configuration for Pushwoosh integration"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-diff",metastring:"showLineNumbers",children:"import 'package:pushwoosh/pushwoosh.dart';\n\nfinal hwid = await Pushwoosh.getInstance.getHWID;\n\n- final builder = AdaptyProfileParametersBuilder()\n-         ..setPushwooshHWID(hwid);\n  try {\n-     await adapty.updateProfile(builder.build());\n\n+     await Adapty().setIntegrationIdentifier(\n+         key: \"pushwoosh_hwid\", \n+         value: hwid,\n+     );\n  } on AdaptyError catch (adaptyError) {\n      // handle the error\n  } catch (e) {\n      // handle the error\n  }\n"})}),"\n",(0,n.jsx)(t.h2,{id:"update-observer-mode-implementation",children:"Update Observer mode implementation"}),"\n",(0,n.jsxs)(t.p,{children:["Update how you link paywalls to transactions. Previously, you used the ",(0,n.jsx)(t.code,{children:"setVariationId"})," method to assign the ",(0,n.jsx)(t.code,{children:"variationId"}),". Now, you can include the ",(0,n.jsx)(t.code,{children:"variationId"})," directly when recording the transaction using the new ",(0,n.jsx)(t.code,{children:"reportTransaction"})," method. Check out the final code example in the ",(0,n.jsx)(t.a,{href:"report-transactions-observer-mode",children:"Associate paywalls with purchase transactions in Observer mode"}),"."]}),"\n",(0,n.jsx)(t.admonition,{type:"warning",children:(0,n.jsxs)(t.p,{children:["Don't forget to record the transaction using the ",(0,n.jsx)(t.code,{children:"reportTransaction"})," method. Skipping this step means Adapty won't recognize the transaction, won't grant access levels, won't include it in analytics, and won't send it to integrations. This step is essential!"]})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-diff",metastring:"showLineNumbers",children:' try {\n-     await Adapty().setVariationId("YOUR_TRANSACTION_ID", "PAYWALL_VARIATION_ID");\n\n+     // every time when calling transaction.finish()\n+     await Adapty().reportTransaction(\n+         "YOUR_TRANSACTION_ID", \n+         variationId: "PAYWALL_VARIATION_ID", // optional\n+     );\n  } on AdaptyError catch (adaptyError) {\n      // handle the error\n  } catch (e) {\n      // handle the error\n  }\n'})})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}}}]);