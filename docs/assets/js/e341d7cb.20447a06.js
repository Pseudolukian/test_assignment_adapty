"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[9254],{77353:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>l,contentTitle:()=>t,default:()=>o,frontMatter:()=>i,metadata:()=>c,toc:()=>h});var d=r(74848),n=r(28453);const i={title:"Migration guide to server-side API v2",description:"",metadataTitle:"",toc_max_heading_level:5},t=void 0,c={id:"migration-guide-to-server-side-API-v2",title:"Migration guide to server-side API v2",description:"",source:"@site/versioned_docs/version-3.0/migration-guide-to-server-side-API-v2.md",sourceDirName:".",slug:"/migration-guide-to-server-side-API-v2",permalink:"/test_assignment_adapty/docs/migration-guide-to-server-side-API-v2",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Migration guide to server-side API v2",description:"",metadataTitle:"",toc_max_heading_level:5},sidebar:"APISidebar",previous:{title:"Objects",permalink:"/test_assignment_adapty/docs/server-side-api-objects"},next:{title:"Introduction",permalink:"/test_assignment_adapty/docs/web-api"}},l={},h=[{value:"Why Migrate?",id:"why-migrate",level:2},{value:"Changes Overview",id:"changes-overview",level:2},{value:"Migration Steps",id:"migration-steps",level:2},{value:"Step 1. Configure request headers",id:"step-1-configure-request-headers",level:3},{value:"Step 2. Change transaction and access management requests",id:"step-2-change-transaction-and-access-management-requests",level:3},{value:"Step 2.1. How to grant access level",id:"step-21-how-to-grant-access-level",level:4},{value:"Step 2.2. How to revoke or shorten access level",id:"step-22-how-to-revoke-or-shorten-access-level",level:4},{value:"Step 2.3. How to record a subscription transaction",id:"step-23-how-to-record-a-subscription-transaction",level:4},{value:"Step 2.4. How to record a one-time purchase transaction",id:"step-24-how-to-record-a-one-time-purchase-transaction",level:4},{value:"Step 3. Change <code>Get info about a user</code> request",id:"step-3-change-get-info-about-a-user-request",level:3},{value:"Step 4. Change <code>Set the user&#39;s attribute</code> request",id:"step-4-change-set-the-users-attribute-request",level:3},{value:"Step 5. Change <code>Delete user&#39;s data</code> request",id:"step-5-change-delete-users-data-request",level:3}];function a(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.p,{children:"Adapty's Server-Side API v2 introduces new capabilities and improvements to help you manage access levels, transactions, and user profiles more effectively."}),"\n",(0,d.jsx)(s.h2,{id:"why-migrate",children:"Why Migrate?"}),"\n",(0,d.jsx)(s.p,{children:"The second version of the Server-Side API gives you more flexibility and features when working with Adapty:"}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Separate access level management"}),": Assign access levels to users without requiring transaction details, making it easier to handle compensations, bonuses, or other non-transactional scenarios."]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Record one-time purchases"}),": Log transactions for consumable product purchases by providing consumable-product-specific fields."]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Enhanced transaction details:"})," Include more data with transactions, like refunds, billing issues, cancellation reasons, renewals, and more."]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Profile updates:"})," Instead of just adding attributes, you can update a user\u2019s profile. For instance, you can add installation metadata or disable external analytics if needed."]}),"\n"]}),"\n",(0,d.jsx)(s.p,{children:"Although v1 is still supported, we recommend moving to v2 for expanded functionality and ongoing updates."}),"\n",(0,d.jsx)(s.h2,{id:"changes-overview",children:"Changes Overview"}),"\n",(0,d.jsxs)(s.table,{children:[(0,d.jsx)(s.thead,{children:(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.th,{children:"Change"}),(0,d.jsx)(s.th,{children:"Required action"})]})}),(0,d.jsxs)(s.tbody,{children:[(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.strong,{children:"Base URL and Endpoint"})}),(0,d.jsx)(s.td,{children:"Base URL and all endpoints are changed. Update your configuration as described in the request endpoints"})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.strong,{children:"Request Headers"})}),(0,d.jsx)(s.td,{children:(0,d.jsxs)("ol",{children:[(0,d.jsxs)("li",{children:[" Add either ",(0,d.jsx)(s.code,{children:"adapty-profile-id"})," or ",(0,d.jsx)(s.code,{children:"adapty-customer-user-id"})," as a header."]}),(0,d.jsxs)("li",{children:[" Add a new ",(0,d.jsx)(s.code,{children:"adapty-platform"})," header."]})]})})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.strong,{children:"Request and Response Structure"})}),(0,d.jsxs)(s.td,{children:["Modify parameters as outlined for each request and update your integration to handle the ",(0,d.jsx)(s.a,{href:"api-responses",children:"new response formats"}),"."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.strong,{children:"Changed access level management"})}),(0,d.jsxs)(s.td,{children:["The old ",(0,d.jsx)(s.a,{href:"server-side-api-specs-legacy#prolonggrant-a-subscription-for-a-user",children:"Prolong/grant a subscription for a user"})," request is now split into three: ",(0,d.jsxs)("ul",{children:[(0,d.jsxs)("li",{children:[" ",(0,d.jsx)(s.a,{href:"ss-set-transaction",children:"Set Transaction"}),": Add transaction details with adding access."]}),(0,d.jsxs)("li",{children:[" ",(0,d.jsx)(s.a,{href:"ss-grant-access-level",children:"Grant Access Level"}),": Add or extend access without transaction."]}),(0,d.jsxs)("li",{children:[" ",(0,d.jsx)(s.a,{href:"ss-revoke-access-level",children:"Revoke Access Level"}),": Shorten or revoke access without transaction."]})]})]})]})]})]}),"\n",(0,d.jsx)(s.h2,{id:"migration-steps",children:"Migration Steps"}),"\n",(0,d.jsxs)(s.admonition,{type:"note",children:[(0,d.jsx)(s.p,{children:"To simplify using our server-side API, we've prepared a Postman collection and an environment file you can download and import into Postman."}),(0,d.jsx)(s.p,{children:(0,d.jsx)(s.a,{href:"https://raw.githubusercontent.com/adaptyteam/adapty-docs/refs/heads/main/Downloads/Adapty_server_side_API_postman_collection.zip",children:"Download the collection and environment"})})]}),"\n",(0,d.jsx)(s.h3,{id:"step-1-configure-request-headers",children:"Step 1. Configure request headers"}),"\n",(0,d.jsx)(s.p,{children:"Add new request headers as follows:"}),"\n",(0,d.jsxs)(s.table,{children:[(0,d.jsx)(s.thead,{children:(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Header"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Description"})})]})}),(0,d.jsxs)(s.tbody,{children:[(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.strong,{children:"adapty-profile-id"})}),(0,d.jsxs)(s.td,{children:["(Required, choose one) The user\u2019s Adapty profile ID. Visible in the ",(0,d.jsx)(s.strong,{children:"Adapty ID"})," field in the ",(0,d.jsxs)(s.a,{href:"https://app.adapty.io/profiles/users",children:["Adapty Dashboard -> ",(0,d.jsx)(s.strong,{children:"Profiles"})]})," -> specific profile page. Interchangeable with ",(0,d.jsx)(s.strong,{children:"adapty-customer-user-id"}),", use any of them."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.strong,{children:"adapty-customer-user-id"})}),(0,d.jsxs)(s.td,{children:[(0,d.jsxs)("p",{children:["(Required, choose one) The user\u2019s ID in your system. Visible in the ",(0,d.jsx)(s.strong,{children:"Customer user ID"})," field in the ",(0,d.jsxs)(s.a,{href:"https://app.adapty.io/profiles/users",children:["Adapty Dashboard -> ",(0,d.jsx)(s.strong,{children:"Profiles"})]})," -> specific profile page. Interchangeable with ",(0,d.jsx)(s.strong,{children:"adapty-profile-id"}),", use any of them."]}),(0,d.jsxs)("p",{children:["\u26a0\ufe0f Works only if you ",(0,d.jsx)(s.a,{href:"identifying-users",children:"identify users"})," in your app code using the Adapty SDK."]})]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.strong,{children:"adapty-platform"})}),(0,d.jsxs)(s.td,{children:["Specify the app's platform. Possible options: ",(0,d.jsx)(s.code,{children:"iOS"}),", ",(0,d.jsx)(s.code,{children:"macOS"}),", ",(0,d.jsx)(s.code,{children:"iPadOS"}),", ",(0,d.jsx)(s.code,{children:"visionOS"}),", ",(0,d.jsx)(s.code,{children:"Android"}),"."]})]})]})]}),"\n",(0,d.jsx)(s.hr,{}),"\n",(0,d.jsx)(s.h3,{id:"step-2-change-transaction-and-access-management-requests",children:"Step 2. Change transaction and access management requests"}),"\n",(0,d.jsx)(s.p,{children:"In version 1, you used to use:"}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.a,{href:"server-side-api-specs-legacy#prolonggrant-a-subscription-for-a-user",children:"Prolong/Grant a Subscription for a User"})," request:  to record a transaction and grant or shorten access level."]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.a,{href:"server-side-api-specs-legacy#revoke-subscription-from-a-user",children:"Revoke access level"})," request: to immediately revoke access."]}),"\n"]}),"\n",(0,d.jsx)(s.p,{children:"They are now replaced with three separate requests to distinguish between adding transactions and managing access levels:"}),"\n",(0,d.jsxs)(s.ol,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsxs)(s.strong,{children:[(0,d.jsx)(s.a,{href:"ss-grant-access-level",children:"Grant Access Level"}),":"]})," Use this request to extend an access level without linking it to a transaction."]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsxs)(s.strong,{children:[(0,d.jsx)(s.a,{href:"ss-revoke-access-level",children:"Revoke Access Level"}),":"]})," to immediately revoke or shorten access."]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsxs)(s.strong,{children:[(0,d.jsx)(s.a,{href:"ss-set-transaction",children:"Set Transaction"}),":"]})," Use this request to add transaction details to Adapty with access levels."]}),"\n"]}),"\n",(0,d.jsx)(s.hr,{}),"\n",(0,d.jsx)(s.h4,{id:"step-21-how-to-grant-access-level",children:"Step 2.1. How to grant access level"}),"\n",(0,d.jsx)(s.admonition,{type:"info",children:(0,d.jsxs)(s.p,{children:["For a detailed description, refer to the ",(0,d.jsx)(s.a,{href:"ss-grant-access-level",children:"Grant access level"})," request."]})}),"\n",(0,d.jsxs)(s.p,{children:["In version 1, the ",(0,d.jsx)(s.a,{href:"server-side-api-specs-legacy#prolonggrant-a-subscription-for-a-user",children:"Prolong/grant a subscription for a user"})," request was used to grant access. Now you can grant access with the ",(0,d.jsx)(s.a,{href:"ss-grant-access-level",children:"Grant access level"})," request without providing transaction details."]}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Endpoint:"})," ",(0,d.jsx)(s.code,{children:"https://api.adapty.io/api/v2/server-side-api/grant/access-level/"})]}),"\n",(0,d.jsxs)(s.li,{children:["Parameters to keep:","\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"access_level_id"}),": Previously in the endpoint. Required."]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"starts_at"}),": Now nullable."]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"expires_at"}),": Optional for lifetime access and nullable."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(s.hr,{}),"\n",(0,d.jsx)(s.h4,{id:"step-22-how-to-revoke-or-shorten-access-level",children:"Step 2.2. How to revoke or shorten access level"}),"\n",(0,d.jsx)(s.admonition,{type:"info",children:(0,d.jsxs)(s.p,{children:["For a detailed description, refer to the ",(0,d.jsx)(s.a,{href:"ss-revoke-access-level",children:"Revoke access level"})," request."]})}),"\n",(0,d.jsxs)(s.p,{children:["In version 1, you used the ",(0,d.jsx)(s.a,{href:"server-side-api-specs-legacy#revoke-subscription-from-a-user",children:"Revoke access level"})," request to immediately revoke access and the ",(0,d.jsx)(s.a,{href:"server-side-api-specs-legacy#prolonggrant-a-subscription-for-a-user",children:"Prolong/Grant a Subscription for a User"})," request to shorten it. Now you can use the ",(0,d.jsx)(s.a,{href:"ss-revoke-access-level",children:"Revoke access level"})," request for both actions."]}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Endpoint:"})," ",(0,d.jsx)(s.code,{children:"https://api.adapty.io/api/v2/server-side-api/purchase/profile/revoke/access-level/"})]}),"\n",(0,d.jsxs)(s.li,{children:["Parameters to keep:","\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"access_level_id"}),": Required."]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"expires_at"}),": Nullable unless access is revoked immediately."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(s.hr,{}),"\n",(0,d.jsx)(s.h4,{id:"step-23-how-to-record-a-subscription-transaction",children:"Step 2.3. How to record a subscription transaction"}),"\n",(0,d.jsx)(s.admonition,{type:"info",children:(0,d.jsxs)(s.p,{children:["For a detailed description, refer to the ",(0,d.jsx)(s.a,{href:"ss-set-transaction",children:"Set transaction"})," request."]})}),"\n",(0,d.jsxs)(s.p,{children:["In version 1, transactions were recorded using the ",(0,d.jsx)(s.a,{href:"server-side-api-specs-legacy#prolonggrant-a-subscription-for-a-user",children:"Prolong/Grant a Subscription for a User"})," request, which was limited to subscription transactions."]}),"\n",(0,d.jsxs)(s.p,{children:["In version 2, this functionality has been replaced by the ",(0,d.jsx)(s.a,{href:"ss-set-transaction",children:"Set Transaction"})," request. This request can handle both subscription transactions and one-time purchases."]}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Endpoint:"})," ",(0,d.jsx)(s.code,{children:"https://api.adapty.io/api/v2/server-side-api/purchase/set/transaction/"})]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Details:"})," The parameters required vary based on whether the transaction is a subscription or a one-time purchase. See the guidelines below for recording subscription transactions."]}),"\n"]}),"\n",(0,d.jsx)(s.p,{children:(0,d.jsx)(s.strong,{children:"New fields"})}),"\n",(0,d.jsxs)(s.table,{children:[(0,d.jsx)(s.thead,{children:(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Parameter"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Change"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Type"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Required"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Nullable"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Description"})})]})}),(0,d.jsxs)(s.tbody,{children:[(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"billing_issue_detected_at"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"ISO 8601 date"}),(0,d.jsx)(s.td,{children:"\u2795"}),(0,d.jsx)(s.td,{children:"\u2795"}),(0,d.jsx)(s.td,{children:"The datetime when a billing issue was detected (e.g., a failed card charge). Subscription might still be active. This is cleared if the payment goes through."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"cancellation_reason"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsx)(s.td,{children:"\u2795"}),(0,d.jsx)(s.td,{children:"\u2795"}),(0,d.jsxs)(s.td,{children:["Possible reasons for cancellation include: ",(0,d.jsx)(s.code,{children:"voluntarily_cancelled"}),", ",(0,d.jsx)(s.code,{children:"billing_error"}),", ",(0,d.jsx)(s.code,{children:"price_increase"}),", ",(0,d.jsx)(s.code,{children:"product_was_not_available"}),", ",(0,d.jsx)(s.code,{children:"refund"}),", ",(0,d.jsx)(s.code,{children:"upgraded"}),", or ",(0,d.jsx)(s.code,{children:"unknown"}),"."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"environment"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsxs)(s.td,{children:[(0,d.jsxs)("p",{children:["Environment where the transaction took place. Options are ",(0,d.jsx)(s.code,{children:"Sandbox"})," or ",(0,d.jsx)(s.code,{children:"Production."})]}),(0,d.jsxs)("p",{children:[" Replaces the ",(0,d.jsx)(s.code,{children:"is_sandbox"})," parameter."]})]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"grace_period_expires_at"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"ISO 8601 date"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsxs)(s.td,{children:["The datetime when the ",(0,d.jsx)(s.a,{href:"https://developer.apple.com/news/?id=09122019c",children:"grace period"})," will end, if the subscription is currently in one."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"is_family_shared"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"Boolean"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsxs)(s.td,{children:["A Boolean value indicating whether the product supports family sharing in App Store Connect. iOS only. Always ",(0,d.jsx)(s.code,{children:"false"})," for iOS below 14.0 and macOS below 11.0."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"offer"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"Object"}),(0,d.jsx)(s.td,{children:"\u2795"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsxs)(s.td,{children:["Represents the purchase offer as an object. See the ",(0,d.jsx)(s.a,{href:"server-side-api-objects#offer",children:"Offer"})," object."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"originally_purchased_at"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"ISO 8601 date"}),(0,d.jsx)(s.td,{children:"\u2795"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsxs)(s.td,{children:["For subscription chains, this is the purchase date of the original transaction, linked by ",(0,d.jsx)(s.code,{children:"store_original_transaction_id"}),"."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"purchase_type"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsx)(s.td,{children:"\u2795"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsxs)(s.td,{children:["Specifies product type, here set to ",(0,d.jsx)(s.code,{children:"subscription"}),"."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"purchased_at"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"ISO 8601 date"}),(0,d.jsx)(s.td,{children:"\u2795"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"Indicates most recent purchase date."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"refunded_at"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"ISO 8601 date"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"Indicates subscription refund datetime if applicable."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"renew_status"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"Boolean"}),(0,d.jsx)(s.td,{children:"\u2795"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"Indicates if subscription auto-renewal is enabled."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"renew_status_changed_at"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"ISO 8601 date"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"Indicates when auto-renewal status changed."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"variation_id"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"The variation ID used to trace purchases to the specific paywall they were made from."})]})]})]}),"\n",(0,d.jsx)(s.p,{children:(0,d.jsx)(s.strong,{children:"Removed fields"})}),"\n",(0,d.jsxs)(s.table,{children:[(0,d.jsx)(s.thead,{children:(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Parameter"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Change"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Description"})})]})}),(0,d.jsxs)(s.tbody,{children:[(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"base_plan_id"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsxs)(s.td,{children:["Removed. Ass the base plan ID to the ",(0,d.jsx)(s.code,{children:"store_product_id"})," field in the format ",(0,d.jsx)(s.code,{children:"product_id:base_plan_id"}),"."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"duration_days"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsx)(s.td,{children:"Removed as not needed. The duration is calculated automatically."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"introductory_offer_type"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsxs)(s.td,{children:["Offer types are now in the ",(0,d.jsx)(s.code,{children:"offer"})," object."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"is_lifetime"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsxs)(s.td,{children:["Removed as it's replaced with the ",(0,d.jsx)(s.code,{children:"purchase_type"})," parameter."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"is_sandbox"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsxs)(s.td,{children:["Replaced with the ",(0,d.jsx)(s.code,{children:"environment"})," parameter."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"price_locale"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsxs)(s.td,{children:["Moved to the ",(0,d.jsx)(s.code,{children:"price"})," object."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"proceeds"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsx)(s.td,{})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"starts_at"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsx)(s.td,{children:"Removed as it will be automatically taken from the access level connected to the selected product."})]})]})]}),"\n",(0,d.jsx)(s.p,{children:(0,d.jsx)(s.strong,{children:"Changed fields"})}),"\n",(0,d.jsxs)(s.table,{children:[(0,d.jsx)(s.thead,{children:(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Parameter"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Change"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Type"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Required"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Nullable"})}),(0,d.jsx)(s.th,{children:"Change Description"})]})}),(0,d.jsxs)(s.tbody,{children:[(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"price"})}),(0,d.jsx)(s.td,{children:"Changed"}),(0,d.jsx)(s.td,{children:"Float -> Object"}),(0,d.jsxs)(s.td,{children:["\u2796"," -> ","\u2795"]}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsxs)(s.td,{children:["Now represented as a ",(0,d.jsx)(s.a,{href:"server-side-api-objects#price",children:"Price"})," object and includes ",(0,d.jsx)(s.code,{children:"price_locale"}),", ",(0,d.jsx)(s.code,{children:"country"}),", and ",(0,d.jsx)(s.code,{children:"value"})," fields."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"store"})}),(0,d.jsx)(s.td,{children:"Changed"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsxs)(s.td,{children:["\u2796"," -> ","\u2795"]}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:(0,d.jsxs)("ol",{children:[(0,d.jsx)("li",{children:"The field became mandatory."}),(0,d.jsx)("li",{children:"In addition to standard app stores, you can now use custom stores as well."})]})})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsxs)(s.td,{children:[(0,d.jsx)(s.code,{children:"vendor_original_transaction_id"})," -> ",(0,d.jsx)(s.code,{children:"store_original_transaction_id"})]}),(0,d.jsx)(s.td,{children:"Renamed, changed"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsxs)(s.td,{children:["\u2796"," -> ","\u2795"]}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:(0,d.jsxs)("ol",{children:[(0,d.jsx)("li",{children:" The field is renamed."}),(0,d.jsx)("li",{children:" The field beca,e mandatory."})]})})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsxs)(s.td,{children:[(0,d.jsx)(s.code,{children:"vendor_product_id"})," -> ",(0,d.jsx)(s.code,{children:"store_product_id"})]}),(0,d.jsx)(s.td,{children:"Renamed, changed"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsxs)(s.td,{children:["\u2796"," -> ","\u2795"]}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:(0,d.jsxs)("ol",{children:[(0,d.jsx)("li",{children:" The field is renamed."}),(0,d.jsx)("li",{children:" The field beca,e mandatory."})]})})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsxs)(s.td,{children:[(0,d.jsx)(s.code,{children:"vendor_transaction_id"})," -> ",(0,d.jsx)(s.code,{children:"store_transaction_id"})]}),(0,d.jsx)(s.td,{children:"Renamed, changed"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsxs)(s.td,{children:["\u2796"," -> ","\u2795"]}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:(0,d.jsxs)("ol",{children:[(0,d.jsx)("li",{children:" The field is renamed."}),(0,d.jsx)("li",{children:" The field beca,e mandatory."})]})})]})]})]}),"\n",(0,d.jsx)(s.hr,{}),"\n",(0,d.jsx)(s.h4,{id:"step-24-how-to-record-a-one-time-purchase-transaction",children:"Step 2.4. How to record a one-time purchase transaction"}),"\n",(0,d.jsx)(s.admonition,{type:"info",children:(0,d.jsxs)(s.p,{children:["For a detailed description, refer to the ",(0,d.jsx)(s.a,{href:"ss-set-transaction",children:"Set transaction"})," request."]})}),"\n",(0,d.jsxs)(s.p,{children:["In version 1, transactions were recorded using the ",(0,d.jsx)(s.a,{href:"server-side-api-specs-legacy#prolonggrant-a-subscription-for-a-user",children:"Prolong/Grant a Subscription for a User"})," request, which was limited to subscription transactions."]}),"\n",(0,d.jsxs)(s.p,{children:["In version 2, this functionality has been replaced by the ",(0,d.jsx)(s.a,{href:"ss-set-transaction",children:"Set Transaction"})," request. This request can handle both subscription transactions and one-time purchases."]}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Endpoint:"})," ",(0,d.jsx)(s.code,{children:"https://api.adapty.io/api/v2/server-side-api/purchase/set/transaction/"})]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Details:"})," The parameters required vary based on whether the transaction is a subscription or a one-time purchase. See the guidelines below for recording one-time purchase transactions."]}),"\n"]}),"\n",(0,d.jsx)(s.p,{children:(0,d.jsx)(s.strong,{children:"New fields"})}),"\n",(0,d.jsxs)(s.table,{children:[(0,d.jsx)(s.thead,{children:(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Parameter"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Change"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Type"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Required"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Nullable"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Description Change"})})]})}),(0,d.jsxs)(s.tbody,{children:[(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"cancellation_reason"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"Possible reasons for cancellation: voluntarily_cancelled, billing_error, price_increase, product_was_not_available, refund, cancelled_by_developer, new_subscription_replace, upgraded, unknown, adapty_revoked."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"environment"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsxs)(s.td,{children:[(0,d.jsxs)("p",{children:["Environment where the transaction took place. Options are ",(0,d.jsx)(s.code,{children:"Sandbox"})," or ",(0,d.jsx)(s.code,{children:"Production."})]}),(0,d.jsxs)("p",{children:[" Replaces the ",(0,d.jsx)(s.code,{children:"is_sandbox"})," parameter."]})]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"is_family_shared"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"Boolean"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"Indicates whether the product supports family sharing in App Store Connect. iOS only. Always false for iOS below 14.0 and macOS below 11.0."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"offer"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"Object"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsxs)(s.td,{children:["Represents the purchase offer as an object. See the ",(0,d.jsx)(s.a,{href:"server-side-api-objects#offer",children:"Offer"})," object."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"purchase_type"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsx)(s.td,{children:"\u2795"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsxs)(s.td,{children:["Specifies the type of product purchased. Here set to ",(0,d.jsx)(s.code,{children:"one_time_purchase"}),"."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"purchased_at"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"ISO 8601 date"}),(0,d.jsx)(s.td,{children:"\u2795"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"The datetime when the access level was last purchased."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"refunded_at"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"ISO 8601 date"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"If refunded, shows the datetime of the refund."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"variation_id"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"The variation ID used to trace purchases to the specific paywall they were made from."})]})]})]}),"\n",(0,d.jsx)(s.p,{children:(0,d.jsx)(s.strong,{children:"Removed fields"})}),"\n",(0,d.jsxs)(s.table,{children:[(0,d.jsx)(s.thead,{children:(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Parameter"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Change"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Description Change"})})]})}),(0,d.jsxs)(s.tbody,{children:[(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"base_plan_id"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsxs)(s.td,{children:["Removed. Ass the base plan ID to the ",(0,d.jsx)(s.code,{children:"store_product_id"})," field in the format ",(0,d.jsx)(s.code,{children:"product_id:base_plan_id"}),"."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"duration_days"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsx)(s.td,{children:"Removed as not needed. The duration is calculated automatically."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"expires_at"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsx)(s.td,{children:"Removed as not relevant to a one-time purchase."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"introductory_offer_type"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsxs)(s.td,{children:["Offer types are now in the ",(0,d.jsx)(s.code,{children:"offer"})," object."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"is_lifetime"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsxs)(s.td,{children:["Removed as it's replaced with the ",(0,d.jsx)(s.code,{children:"purchase_type"})," parameter."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"is_sandbox"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsxs)(s.td,{children:["Replaced with the ",(0,d.jsx)(s.code,{children:"environment"}),"parameter."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"price_locale"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsxs)(s.td,{children:["Moved to the ",(0,d.jsx)(s.code,{children:"price"})," object."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"proceeds"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsx)(s.td,{})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"starts_at"})}),(0,d.jsx)(s.td,{children:"Removed"}),(0,d.jsx)(s.td,{children:"Removed as not relevant to a one-time purchase."})]})]})]}),"\n",(0,d.jsx)(s.p,{children:(0,d.jsx)(s.strong,{children:"Changed fields"})}),"\n",(0,d.jsxs)(s.table,{children:[(0,d.jsx)(s.thead,{children:(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Parameter"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Change"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Type"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Required"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Nullable"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Description Change"})})]})}),(0,d.jsxs)(s.tbody,{children:[(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"price"})}),(0,d.jsx)(s.td,{children:"Changed"}),(0,d.jsx)(s.td,{children:"Float -> Object"}),(0,d.jsxs)(s.td,{children:["\u2796"," -> ","\u2795"]}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsxs)(s.td,{children:["Now represented as a ",(0,d.jsx)(s.a,{href:"server-side-api-objects#price",children:"Price"})," object and includes ",(0,d.jsx)(s.code,{children:"price_locale"}),", ",(0,d.jsx)(s.code,{children:"country"}),", and ",(0,d.jsx)(s.code,{children:"value"})," fields."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"store"})}),(0,d.jsx)(s.td,{children:"Changed"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsxs)(s.td,{children:["\u2796"," -> ","\u2795"]}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:(0,d.jsxs)("ol",{children:[(0,d.jsx)("li",{children:"The field became mandatory."}),(0,d.jsx)("li",{children:"In addition to standard app stores, you can now use custom stores as well."})]})})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsxs)(s.td,{children:[(0,d.jsx)(s.code,{children:"vendor_original_transaction_id"})," -> ",(0,d.jsx)(s.code,{children:"store_original_transaction_id"})]}),(0,d.jsx)(s.td,{children:"Renamed, changed"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsxs)(s.td,{children:["\u2796"," -> ","\u2795"]}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:(0,d.jsxs)("ol",{children:[(0,d.jsx)("li",{children:" The field is renamed."}),(0,d.jsx)("li",{children:" The field beca,e mandatory."})]})})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsxs)(s.td,{children:[(0,d.jsx)(s.code,{children:"vendor_product_id"})," -> ",(0,d.jsx)(s.code,{children:"store_product_id"})]}),(0,d.jsx)(s.td,{children:"Renamed, changed"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsxs)(s.td,{children:["\u2796"," -> ","\u2795"]}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:(0,d.jsxs)("ol",{children:[(0,d.jsx)("li",{children:" The field is renamed."}),(0,d.jsx)("li",{children:" The field beca,e mandatory."})]})})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsxs)(s.td,{children:[(0,d.jsx)(s.code,{children:"vendor_transaction_id"})," -> ",(0,d.jsx)(s.code,{children:"store_transaction_id"})]}),(0,d.jsx)(s.td,{children:"Renamed, changed"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsxs)(s.td,{children:["\u2796"," -> ","\u2795"]}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:(0,d.jsxs)("ol",{children:[(0,d.jsx)("li",{children:" The field is renamed."}),(0,d.jsx)("li",{children:" The field beca,e mandatory."})]})})]})]})]}),"\n",(0,d.jsx)(s.hr,{}),"\n",(0,d.jsxs)(s.h3,{id:"step-3-change-get-info-about-a-user-request",children:["Step 3. Change ",(0,d.jsx)(s.code,{children:"Get info about a user"})," request"]}),"\n",(0,d.jsx)(s.admonition,{type:"info",children:(0,d.jsxs)(s.p,{children:["For a detailed description, refer to the ",(0,d.jsx)(s.a,{href:"ss-get-profile",children:"Get profile"})," request."]})}),"\n",(0,d.jsx)(s.p,{children:"Change the request as follows:"}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Endpoint:"})," ",(0,d.jsx)(s.code,{children:"https://api.adapty.io/api/v2/server-side-api/profile/"})]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Change:"})," The User Profile ID or Customer User ID is now passed via headers, and no additional parameters are needed. The ",(0,d.jsx)(s.strong,{children:"extended"})," parameter is no longer needed as the complete profile data is always returned."]}),"\n"]}),"\n",(0,d.jsx)(s.hr,{}),"\n",(0,d.jsxs)(s.h3,{id:"step-4-change-set-the-users-attribute-request",children:["Step 4. Change ",(0,d.jsx)(s.code,{children:"Set the user's attribute"})," request"]}),"\n",(0,d.jsx)(s.admonition,{type:"info",children:(0,d.jsxs)(s.p,{children:["For a detailed description, refer to the ",(0,d.jsx)(s.a,{href:"ss-update-profile",children:"Update profile"})," request."]})}),"\n",(0,d.jsx)(s.p,{children:"In version 1, you could only update user attributes. With version 2, you can modify a wider range of profile fields, such as installation metadata or analytics settings."}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Endpoint:"})," ",(0,d.jsx)(s.code,{children:"https://api.adapty.io/api/v2/server-side-api/profile/"}),"."]}),"\n"]}),"\n",(0,d.jsxs)(s.table,{children:[(0,d.jsx)(s.thead,{children:(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Parameter"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Change"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Type"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Required"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Nullable"})}),(0,d.jsx)(s.th,{children:(0,d.jsx)(s.strong,{children:"Description Change"})})]})}),(0,d.jsxs)(s.tbody,{children:[(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"analytics_disabled"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"Boolean"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsxs)(s.td,{children:["Option to opt out of external analytics. When disabled, events won\u2019t be sent to integrations, and ",(0,d.jsx)(s.code,{children:"idfa"}),", ",(0,d.jsx)(s.code,{children:"idfv"}),", and ",(0,d.jsx)(s.code,{children:"advertising_id"})," become nullable."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"installation_meta"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"Dictionary"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsxs)(s.td,{children:["Contains app-specific device details as a dictionary of ",(0,d.jsx)(s.a,{href:"server-side-api-objects#installation-meta",children:"Installation Meta"})," objects."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"store"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2795"}),(0,d.jsxs)(s.td,{children:["Store where the product was bought. Options include ",(0,d.jsx)(s.strong,{children:"app_store"}),", ",(0,d.jsx)(s.strong,{children:"play_store"}),", ",(0,d.jsx)(s.strong,{children:"stripe"}),", or the name of your ",(0,d.jsx)(s.a,{href:"custom-store",children:"custom store"}),"."]})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"store_country"})}),(0,d.jsx)(s.td,{children:"Added"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsx)(s.td,{children:"\u2795"}),(0,d.jsx)(s.td,{children:"Country of the end user app store."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"birthday"})}),(0,d.jsx)(s.td,{children:"Changed"}),(0,d.jsx)(s.td,{children:"Date -> ISO 8601 date"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsxs)(s.td,{children:["\u2795"," -> ","\u2796"]}),(0,d.jsx)(s.td,{children:"Your end user's birthday."})]}),(0,d.jsxs)(s.tr,{children:[(0,d.jsx)(s.td,{children:(0,d.jsx)(s.code,{children:"ip_country"})}),(0,d.jsx)(s.td,{children:"Changed"}),(0,d.jsx)(s.td,{children:"String"}),(0,d.jsx)(s.td,{children:"\u2796"}),(0,d.jsxs)(s.td,{children:["\u2795"," -> ","\u2796"]}),(0,d.jsx)(s.td,{children:"Country of the end user in ISO 3166-2 format. Must be passed if the request is made from the server. Otherwise, determined by request IP."})]})]})]}),"\n",(0,d.jsx)(s.hr,{}),"\n",(0,d.jsxs)(s.h3,{id:"step-5-change-delete-users-data-request",children:["Step 5. Change ",(0,d.jsx)(s.code,{children:"Delete user's data"})," request"]}),"\n",(0,d.jsx)(s.admonition,{type:"info",children:(0,d.jsxs)(s.p,{children:["For a detailed description, refer to the ",(0,d.jsx)(s.a,{href:"ss-delete-profile",children:"Delete profile"})," request."]})}),"\n",(0,d.jsxs)(s.ul,{children:["\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Endpoint:"})," ",(0,d.jsx)(s.code,{children:"https://api.adapty.io/api/v2/server-side-api/profile/"})]}),"\n",(0,d.jsxs)(s.li,{children:[(0,d.jsx)(s.strong,{children:"Change:"})," The ",(0,d.jsx)(s.code,{children:"adapty-profile-id"})," or ",(0,d.jsx)(s.code,{children:"adapty-customer-user-id"})," is now passed via headers, and no additional parameters are needed."]}),"\n"]})]})}function o(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,d.jsx)(s,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}}}]);