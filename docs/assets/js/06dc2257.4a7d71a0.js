"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[5142],{5635:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/da67694-CleanShot_2023-08-15_at_16.52.352x-15570c44dc7ea52def19e7550d592b93.webp"},11470:(e,t,n)=>{n.d(t,{A:()=>A});var r=n(96540),i=n(34164),s=n(23104),a=n(56347),l=n(205),d=n(57485),o=n(31682),c=n(70679);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return u(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:i}}=e;return{value:t,label:n,attributes:r,default:i}}))}(n);return function(e){const t=(0,o.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function p(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const i=(0,a.W6)(),s=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,d.aZ)(s),(0,r.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(i.location.search);t.set(s,e),i.replace({...i.location,search:t.toString()})}),[s,i])]}function g(e){const{defaultValue:t,queryString:n=!1,groupId:i}=e,s=h(e),[a,d]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:s}))),[o,u]=m({queryString:n,groupId:i}),[g,x]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[i,s]=(0,c.Dv)(n);return[i,(0,r.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:i}),j=(()=>{const e=o??g;return p({value:e,tabValues:s})?e:null})();(0,l.A)((()=>{j&&d(j)}),[j]);return{selectedValue:a,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);d(e),u(e),x(e)}),[u,x,s]),tabValues:s}}var x=n(92303);const j={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=n(74848);function v(e){let{className:t,block:n,selectedValue:r,selectValue:a,tabValues:l}=e;const d=[],{blockElementScrollPositionUntilNextRender:o}=(0,s.a_)(),c=e=>{const t=e.currentTarget,n=d.indexOf(t),i=l[n].value;i!==r&&(o(t),a(i))},u=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=d.indexOf(e.currentTarget)+1;t=d[n]??d[0];break}case"ArrowLeft":{const n=d.indexOf(e.currentTarget)-1;t=d[n]??d[d.length-1];break}}t?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},t),children:l.map((e=>{let{value:t,label:n,attributes:s}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>d.push(e),onKeyDown:u,onClick:c,...s,className:(0,i.A)("tabs__item",j.tabItem,s?.className,{"tabs__item--active":r===t}),children:n??t},t)}))})}function b(e){let{lazy:t,children:n,selectedValue:i}=e;const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=s.find((e=>e.props.value===i));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:s.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==i})))})}function y(e){const t=g(e);return(0,f.jsxs)("div",{className:(0,i.A)("tabs-container",j.tabList),children:[(0,f.jsx)(v,{...t,...e}),(0,f.jsx)(b,{...t,...e})]})}function A(e){const t=(0,x.A)();return(0,f.jsx)(y,{...e,children:u(e.children)},String(t))}},16681:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/3b50552-CleanShot_2023-08-15_at_16.47.102x-25663e30cec7205ad7f243e2917e3031.webp"},19365:(e,t,n)=>{n.d(t,{A:()=>a});n(96540);var r=n(34164);const i={tabItem:"tabItem_Ymn6"};var s=n(74848);function a(e){let{children:t,hidden:n,className:a}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(i.tabItem,a),hidden:n,children:t})}},26155:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>m,frontMatter:()=>d,metadata:()=>c,toc:()=>h});var r=n(74848),i=n(28453),s=n(34028),a=(n(26393),n(11470)),l=n(19365);const d={title:"Amplitude",description:"Integrate Amplitude with Adapty for better user behavior insights.",metadataTitle:"Amplitude Integration | Adapty Docs"},o=void 0,c={id:"amplitude",title:"Amplitude",description:"Integrate Amplitude with Adapty for better user behavior insights.",source:"@site/versioned_docs/version-3.0/amplitude.md",sourceDirName:".",slug:"/amplitude",permalink:"/docs/amplitude",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Amplitude",description:"Integrate Amplitude with Adapty for better user behavior insights.",metadataTitle:"Amplitude Integration | Adapty Docs"},sidebar:"tutorialSidebar",previous:{title:"Analytics integrations",permalink:"/docs/analytics-integration"},next:{title:"AppMetrica",permalink:"/docs/appmetrica"}},u={},h=[{value:"How to set up Amplitude integration",id:"how-to-set-up-amplitude-integration",level:3},{value:"Events and tags",id:"events-and-tags",level:3},{value:"SDK configuration",id:"sdk-configuration",level:3}];function p(e){const t={a:"a",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://amplitude.com/",children:"Amplitude"})," is a powerful mobile analytics service. With Adapty, you can easily send events to Amplitude, see how users behave, and then make smart decisions."]}),"\n",(0,r.jsxs)(t.p,{children:["Adapty provides a complete set of data that lets you track ",(0,r.jsx)(t.a,{href:"events",children:"subscription events"})," from stores in one place and sends it to your Amplitude account. This allows you to match your user behavior with their payment history in Amplitude, and inform your product decisions."]}),"\n",(0,r.jsx)(t.h3,{id:"how-to-set-up-amplitude-integration",children:"How to set up Amplitude integration"}),"\n",(0,r.jsxs)(t.p,{children:["Within Adapty, you can set up separate flows for ",(0,r.jsx)(t.strong,{children:"production"})," and ",(0,r.jsx)(t.strong,{children:"test events"})," from the Apple or Stripe sandbox environment or Google test account."]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["For production events, enter the ",(0,r.jsx)(t.strong,{children:"Production"})," API keys from the Amplitude dashboard, with a unique API key for each platform: iOS, Android, and Stripe."]}),"\n",(0,r.jsxs)(t.li,{children:["For test events, use the ",(0,r.jsx)(t.strong,{children:"Sandbox"})," fields as needed."]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"To set up the Amplitude integration:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Open ",(0,r.jsxs)(t.a,{href:"https://app.adapty.io/integrations/amplitude",children:[(0,r.jsx)(t.strong,{children:"Integrations"})," -> ",(0,r.jsx)(t.strong,{children:"Amplitude"})]})," in your Adapty Dashboard."]}),"\n"]}),"\n",(0,r.jsx)(s.A,{children:(0,r.jsx)("img",{src:n(16681).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,r.jsxs)(t.ol,{start:"2",children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Toggle on ",(0,r.jsx)(t.strong,{children:"Amplitude integration"})," to enable it."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Fill in the integration fields:"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Field"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"Amplitude iOS/ Android/ Stripe API key"})}),(0,r.jsxs)(t.td,{children:["Enter the Amplitude ",(0,r.jsx)(t.strong,{children:"API Key"})," for iOS/ Android/ Stripe into Adapty. Locate it under ",(0,r.jsx)(t.strong,{children:"Project settings"})," in Amplitude. For help, check ",(0,r.jsx)(t.a,{href:"https://amplitude.com/docs/apis/authentication",children:"Amplitude docs"}),". Start with ",(0,r.jsx)(t.strong,{children:"Sandbox"})," keys for testing, then switch to ",(0,r.jsx)(t.strong,{children:"Production"})," keys after successful tests."]})]})})]}),"\n",(0,r.jsx)(s.A,{children:(0,r.jsx)("img",{src:n(26492).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Optional settings for further customization:"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"How the revenue data should be sent"})}),(0,r.jsxs)(t.td,{children:["Choose whether to send gross revenue or revenue after taxes and commissions. See ",(0,r.jsx)(t.a,{href:"controls-filters-grouping-compare-proceeds#store-commission-and-taxes",children:"Store commission and taxes"})," for details."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"Exclude historical events"})}),(0,r.jsx)(t.td,{children:"Choose to exclude events before Adapty SDK installation, preventing duplicate data. For example, if a user subscribed on January 10th but installed the Adapty SDK on March 6th, Adapty will only send events from March 6th onward."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"Send User Attributes"})}),(0,r.jsx)(t.td,{children:"Select this option to send user-specific attributes like language preferences."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"Always populate user_id"})}),(0,r.jsxs)(t.td,{children:["Adapty automatically sends ",(0,r.jsx)(t.code,{children:"device_id"})," as ",(0,r.jsx)(t.code,{children:"amplitudeDeviceId"}),". For ",(0,r.jsx)(t.code,{children:"user_id"}),", this setting defines behavior: ",(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)(t.strong,{children:"ON"}),": Sends Adapty ",(0,r.jsx)(t.code,{children:"profile_id"})," if ",(0,r.jsx)(t.code,{children:"amplitudeUserId"})," or ",(0,r.jsx)(t.code,{children:"customer_user_id"})," aren\u2019t available."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)(t.strong,{children:"OFF"}),": Leaves ",(0,r.jsx)(t.code,{children:"user_id"})," empty if neither ID is available."]})]})]})]})]})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Choose the events you want to receive and ",(0,r.jsx)(t.a,{href:"amplitude#events-and-tags",children:"map their names"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Click ",(0,r.jsx)(t.strong,{children:"Save"})," to confirm your changes."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["Once you click ",(0,r.jsx)(t.strong,{children:"Save"}),", Adapty will start sending events to Amplitude."]}),"\n",(0,r.jsxs)(t.p,{children:["In addition to events, Adapty sends ",(0,r.jsx)(t.a,{href:"subscription-status",children:"subscription status"})," and the subscription product ID to ",(0,r.jsx)(t.a,{href:"https://help.amplitude.com/hc/en-us/articles/115002380567#h_39e46c92-7b7f-4358-a96f-c82cc3342e3e",children:"Amplitude user properties"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"events-and-tags",children:"Events and tags"}),"\n",(0,r.jsxs)(t.p,{children:["Below the credentials, there are three groups of events you can send to Amplitude from Adapty. Simply turn on the ones you need. Check the full list of the events offered by Adapty ",(0,r.jsx)(t.a,{href:"events",children:"here"}),"."]}),"\n",(0,r.jsx)(s.A,{children:(0,r.jsx)("img",{src:n(5635).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,r.jsx)(t.p,{children:"We recommend using the default event names provided by Adapty. But you can change the event names based on your needs. Adapty will send subscription events to Amplitude using a server-to-server integration, allowing you to view all subscription events in your Amplitude dashboard."}),"\n",(0,r.jsx)(t.h3,{id:"sdk-configuration",children:"SDK configuration"}),"\n",(0,r.jsxs)(t.p,{children:["Use the ",(0,r.jsx)(t.code,{children:"setIntegrationIdentifier()"})," method to set the  ",(0,r.jsx)(t.code,{children:"amplitude_device_id"})," parameter. It's a must to set up the integration."]}),"\n",(0,r.jsxs)(t.p,{children:["If you have a user registration, you can pass ",(0,r.jsx)(t.code,{children:"amplitude_user_id"})," as well."]}),"\n",(0,r.jsxs)(a.A,{groupId:"current-os",queryString:!0,children:[(0,r.jsxs)(l.A,{value:"Swift",label:"iOS (Swift)",default:!0,children:[(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Setting amplitudeDeviceId"})}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-swift",metastring:"showLineNumbers",children:'import Amplitude \n\ndo {\n    try await Adapty.setIntegrationIdentifier(\n        key: "amplitude_device_id", \n        value: Amplitude.instance().deviceId\n    )\n} catch {\n    // handle the error\n}\n'})}),(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Setting amplitudeUserId"})}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-swift",metastring:"showLineNumbers",children:'import Amplitude \n\ndo {\n    try await Adapty.setIntegrationIdentifier(\n        key: "amplitude_user_id", \n        value: "YOUR_AMPLITUDE_USER_ID"\n    )\n} catch {\n    // handle the error\n}\n'})})]}),(0,r.jsxs)(l.A,{value:"kotlin",label:"Android (Kotlin)",default:!0,children:[(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Setting amplitudeDeviceId"})}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-kotlin",metastring:"showLineNumbers ",children:'//for Amplitude maintenance SDK (obsolete)\nval amplitude = Amplitude.getInstance()\nval amplitudeDeviceId = amplitude.getDeviceId()\nval amplitudeUserId = amplitude.getUserId()\n\n//for actual Amplitude Kotlin SDK\nval amplitude = Amplitude(\n    Configuration(\n        apiKey = AMPLITUDE_API_KEY,\n        context = applicationContext\n    )\n)\nval amplitudeDeviceId = amplitude.store.deviceId\n\n//\n\nAdapty.setIntegrationIdentifier("amplitude_device_id", amplitudeDeviceId) { error ->\n    if (error != null) {\n        // handle the error\n    }\n}\n'})}),(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Setting amplitudeUserId"})}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-kotlin",metastring:"showLineNumbers",children:'//for Amplitude maintenance SDK (obsolete)\nval amplitude = Amplitude.getInstance()\nval amplitudeDeviceId = amplitude.getDeviceId()\nval amplitudeUserId = amplitude.getUserId()\n\n//for actual Amplitude Kotlin SDK\nval amplitude = Amplitude(\n    Configuration(\n        apiKey = AMPLITUDE_API_KEY,\n        context = applicationContext\n    )\n)\nval amplitudeUserId = amplitude.store.userId\n\n//\n\nAdapty.setIntegrationIdentifier("amplitude_user_id", amplitudeUserId) { error ->\n    if (error != null) {\n        // handle the error\n    }\n}\n'})})]}),(0,r.jsxs)(l.A,{value:"Flutter",label:"Flutter (Dart)",default:!0,children:[(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Setting amplitudeDeviceId"})}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",metastring:"showLineNumbers",children:'import \'package:amplitude_flutter/amplitude.dart\';\n\nfinal Amplitude amplitude = Amplitude.getInstance(instanceName: "YOUR_INSTANCE_NAME");\n\ntry {\n    await Adapty().setIntegrationIdentifier(\n        key: "amplitude_device_id", \n        value: amplitude.getDeviceId(),\n    );\n} on AdaptyError catch (adaptyError) {\n    // handle the error\n} catch (e) {\n    // handle the error\n}\n'})}),(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Setting amplitudeUserId"})}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-javascript",metastring:"showLineNumbers",children:'import \'package:amplitude_flutter/amplitude.dart\';\n\nfinal Amplitude amplitude = Amplitude.getInstance(instanceName: "YOUR_INSTANCE_NAME");\n\ntry {\n    await Adapty().setIntegrationIdentifier(\n        key: "amplitude_user_id", \n        value: "YOUR_AMPLITUDE_USER_ID",\n    );\n} on AdaptyError catch (adaptyError) {\n    // handle the error\n} catch (e) {\n    // handle the error\n}\n'})})]}),(0,r.jsxs)(l.A,{value:"Unity",label:"Unity (C#)",default:!0,children:[(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Setting amplitudeDeviceId"})}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",metastring:"showLineNumbers",children:'using AdaptySDK;\n\nAdapty.SetIntegrationIdentifier(\n  "amplitude_device_id", \n  amplitude.getDeviceId(), \n  (error) => {\n  // handle the error\n});\n'})}),(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Setting amplitudeUserId"})}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-csharp",metastring:"showLineNumbers",children:'using AdaptySDK;\n\nAdapty.SetIntegrationIdentifier(\n  "amplitude_user_id", \n  "YOUR_AMPLITUDE_USER_ID", \n  (error) => {\n  // handle the error\n});\n'})})]}),(0,r.jsxs)(l.A,{value:"rn",label:"React Native (TS)",default:!0,children:[(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Setting amplitudeDeviceId"})}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",metastring:"showLineNumbers",children:"import { adapty } from 'react-native-adapty';\n\ntry {\n  await adapty.setIntegrationIdentifier(\"amplitude_device_id\", deviceId);\n} catch (error) {\n  // handle `AdaptyError`\n}\n"})}),(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"Setting amplitudeUserId"})}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",metastring:"showLineNumbers",children:"import { adapty } from 'react-native-adapty';\n\ntry {\n  await adapty.setIntegrationIdentifier(\"amplitude_user_id\", userId);\n} catch (error) {\n  // handle `AdaptyError`\n}\n"})})]})]})]})}function m(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},26492:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/2297782-CleanShot_2023-08-15_at_16.53.512x-4feadb9b019dece3918cb2a46a47abb6.webp"}}]);