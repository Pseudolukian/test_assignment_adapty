"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[2274],{76339:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>n,metadata:()=>l,toc:()=>c});var i=r(74848),s=r(28453);r(26393);const n={title:"iOS - Handle errors",description:"Handle iOS SDK errors efficiently with Adapty\u2019s troubleshooting guide.",metadataTitle:"iOS SDK Error Handling Guide | Adapty Docs"},d=void 0,l={id:"ios-sdk-error-handling",title:"iOS - Handle errors",description:"Handle iOS SDK errors efficiently with Adapty\u2019s troubleshooting guide.",source:"@site/versioned_docs/version-3.0/ios-sdk-error-handling.md",sourceDirName:".",slug:"/ios-sdk-error-handling",permalink:"/test_assignment_adapty/docs/ios-sdk-error-handling",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"iOS - Handle errors",description:"Handle iOS SDK errors efficiently with Adapty\u2019s troubleshooting guide.",metadataTitle:"iOS SDK Error Handling Guide | Adapty Docs"},sidebar:"tutorialSidebar",previous:{title:"Handle errors",permalink:"/test_assignment_adapty/docs/error-handling"},next:{title:"Fix for Code-1000 noProductIDsFound error",permalink:"/test_assignment_adapty/docs/InvalidProductIdentifiers"}},o={},c=[{value:"StoreKit errors",id:"storekit-errors",level:2},{value:"Network errors",id:"network-errors",level:2},{value:"General errors",id:"general-errors",level:2},{value:"Warnings",id:"warnings",level:2}];function a(e){const t={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["Adapty SDK has its own wrapper for all kinds of errors, called ",(0,i.jsx)(t.code,{children:"AdaptyError"}),". Basically, every error returned by an SDK is ",(0,i.jsx)(t.code,{children:"AdaptyError"}),". It has two useful properties: ",(0,i.jsx)(t.code,{children:"originalError"})," and ",(0,i.jsx)(t.code,{children:"adaptyErrorCode"}),", described below."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"originalError"})," contains an original error in case you need the original one to work with. Can be ",(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror",children:"SKError"}),", ",(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/foundation/nserror",children:"NSError"})," or just general Swift ",(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/swift/error",children:"Error"}),". This property is optional since some errors can be generated directly by SDK, like inconsistent or missing data, and won't have the original error around which the wrapper was initially built."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"adaptyErrorCode"})," can be used to handle common issues, like:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"invalid credentials"}),"\n",(0,i.jsx)(t.li,{children:"network errors"}),"\n",(0,i.jsx)(t.li,{children:"cancelled payments"}),"\n",(0,i.jsx)(t.li,{children:"billing issues"}),"\n",(0,i.jsx)(t.li,{children:"invalid receipt"}),"\n",(0,i.jsx)(t.li,{children:"and much more"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"It's pretty easy to check the error for specific codes and react to them accordingly."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-swift",metastring:'showLineNumbers title="Swift"',children:"do {\n    let info = try await Adapty.makePurchase(product: product)\n} catch {\n    if error.adaptyErrorCode == .paymentCancelled {\n        // purchase was cancelled\n        // you can offer discount to your user or remind them later\n    }\n}\n"})}),"\n",(0,i.jsx)(t.h2,{id:"storekit-errors",children:"StoreKit errors"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Error"}),(0,i.jsx)(t.th,{children:"Code"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/unknown",children:"unknown"})}),(0,i.jsx)(t.td,{children:"0"}),(0,i.jsx)(t.td,{children:"Error code indicating that an unknown or unexpected error occurred."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/clientinvalid",children:"clientInvalid"})}),(0,i.jsx)(t.td,{children:"1"}),(0,i.jsx)(t.td,{children:"This error code indicates that the client is not allowed to perform the attempted action."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/paymentcancelled",children:"paymentCancelled"})}),(0,i.jsx)(t.td,{children:"2"}),(0,i.jsxs)(t.td,{children:[(0,i.jsx)("p",{children:"This error code indicates that the user canceled a payment request."}),(0,i.jsx)("p",{children:"No action is required, but in terms of the business logic, you can offer a discount to your user or remind them later."})]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/paymentinvalid",children:"paymentInvalid"})}),(0,i.jsx)(t.td,{children:"3"}),(0,i.jsx)(t.td,{children:"This error indicates that one of the payment parameters was not recognized by the App Store."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/paymentnotallowed",children:"paymentNotAllowed"})}),(0,i.jsx)(t.td,{children:"4"}),(0,i.jsx)(t.td,{children:"This error code indicates that the user is not allowed to authorize payments."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/storeproductnotavailable",children:"storeProductNotAvailable"})}),(0,i.jsx)(t.td,{children:"5"}),(0,i.jsx)(t.td,{children:"This error code indicates that the requested product is not available in the store."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/cloudservicepermissiondenied",children:"cloudServicePermissionDenied"})}),(0,i.jsx)(t.td,{children:"6"}),(0,i.jsx)(t.td,{children:"This error code indicates that the user has not allowed access to Cloud service information."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/cloudservicenetworkconnectionfailed",children:"cloudServiceNetworkConnectionFailed"})}),(0,i.jsx)(t.td,{children:"7"}),(0,i.jsx)(t.td,{children:"This error code indicates that the device could not connect to the network."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/cloudservicerevoked/",children:"cloudServiceRevoked"})}),(0,i.jsx)(t.td,{children:"8"}),(0,i.jsx)(t.td,{children:"This error code indicates that the user has revoked permission to use this cloud service."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/privacyacknowledgementrequired",children:"privacyAcknowledgementRequired"})}),(0,i.jsx)(t.td,{children:"9"}),(0,i.jsx)(t.td,{children:"This error code indicates that the user has not yet acknowledged Apple\u2019s privacy policy."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/unauthorizedrequestdata",children:"unauthorizedRequestData"})}),(0,i.jsx)(t.td,{children:"10"}),(0,i.jsx)(t.td,{children:"This error code indicates that the app is attempting to use a property for which it does not have the required entitlement."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/invalidofferidentifier",children:"invalidOfferIdentifier"})}),(0,i.jsx)(t.td,{children:"11"}),(0,i.jsxs)(t.td,{children:[(0,i.jsxs)("p",{children:["The offer ",(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skpaymentdiscount/3043528-identifier",children:(0,i.jsx)(t.code,{children:"identifier"})}),"   is not valid. For example, you have not set up an offer with that identifier in the App Store, or you have revoked the offer."]}),(0,i.jsx)("p",{children:"Make sure you set up desired offers in AppStore Connect and pass a valid offer identifier."})]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/invalidsignature",children:"invalidSignature"})}),(0,i.jsx)(t.td,{children:"12"}),(0,i.jsx)(t.td,{children:"This error code indicates that the signature in a payment discount is not valid."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/missingofferparams",children:"missingOfferParams"})}),(0,i.jsx)(t.td,{children:"13"}),(0,i.jsx)(t.td,{children:"This error code indicates that parameters are missing in a payment discount."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/invalidofferprice/",children:"invalidOfferPrice"})}),(0,i.jsx)(t.td,{children:"14"}),(0,i.jsx)(t.td,{children:"This error code indicates that the price you specified in App Store Connect is no longer valid. Offers must always represent a discounted price."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"noProductIDsFound"}),(0,i.jsx)(t.td,{children:"1000"}),(0,i.jsxs)(t.td,{children:[(0,i.jsxs)("p",{children:["This error indicates that none of the products you requested on the paywall are available for purchase in the App Store, even though they\u2019re listed there. This error may sometimes come with an ",(0,i.jsx)(t.code,{children:"InvalidProductIdentifiers"})," warning. If the warning appears without an error, ignore it."]}),(0,i.jsxs)("p",{children:["If you\u2019re encountering this error, follow the steps in the ",(0,i.jsxs)(t.a,{href:"InvalidProductIdentifiers",children:["Fix for Code-1000 ",(0,i.jsx)(t.code,{children:"noProductIDsFound"})," error"]})," section."]})]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"noProductsFound"}),(0,i.jsx)(t.td,{children:"1001"}),(0,i.jsx)(t.td,{children:"This error indicates that the product requested for purchase is not available in the store."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"productRequestFailed"}),(0,i.jsx)(t.td,{children:"1002"}),(0,i.jsx)(t.td,{children:"Unable to fetch available products at the moment."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"cantMakePayments"}),(0,i.jsx)(t.td,{children:"1003"}),(0,i.jsx)(t.td,{children:"In-app purchases are not allowed on this device."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"noPurchasesToRestore"}),(0,i.jsx)(t.td,{children:"1004"}),(0,i.jsx)(t.td,{children:"This error indicates that Google Play did not find the purchase to restore."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/skerror/code/paymentcancelled",children:"cantReadReceipt"})}),(0,i.jsx)(t.td,{children:"1005"}),(0,i.jsxs)(t.td,{children:[(0,i.jsx)("p",{children:"There is no valid receipt available on the device. This can be an issue during sandbox testing."}),(0,i.jsx)("p",{children:"In the sandbox, you won't have a valid receipt file until you actually make a purchase, so make sure you do one before accessing it. During sandbox testing also make sure you signed in on a device with a valid Apple sandbox account."})]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"productPurchaseFailed"}),(0,i.jsx)(t.td,{children:"1006"}),(0,i.jsx)(t.td,{children:"Product purchase failed."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"missingOfferSigningParams"}),(0,i.jsx)(t.td,{children:"1007"}),(0,i.jsxs)(t.td,{children:[(0,i.jsx)("p",{children:"This error indicates issues with Adapty integration or with offers."}),(0,i.jsxs)("p",{children:["Refer to the ",(0,i.jsx)(t.a,{href:"app-store-connection-configuration",children:"Configure App Store integration"})," and to ",(0,i.jsx)(t.a,{href:"offers",children:"Offers"})," for details on how to set them up."]})]})]})]})]}),"\n",(0,i.jsx)(t.h2,{id:"network-errors",children:"Network errors"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Error"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Code"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"notActivated"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"2002"}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["You need to properly ",(0,i.jsx)(t.a,{href:"sdk-installation-ios#configure-adapty-sdk",children:"configure Adapty SDK"}),"   by ",(0,i.jsx)(t.code,{children:"Adapty.activate"})," method."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"badRequest"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"2003"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Bad request."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"serverError"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"2004"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Server error."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"networkFailed"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"2005"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"The error indicates issues with the network connection."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"decodingFailed"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"2006"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"This error indicates that response decoding failed."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"encodingFailed"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"2009"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"This error indicates that request encoding failed."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"missingURL"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"2010"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"The requested URL is nil."})]})]})]}),"\n",(0,i.jsx)(t.h2,{id:"general-errors",children:"General errors"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Error"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Code"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"analyticsDisabled"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"3000"}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["We can't handle analytics events, since you've ",(0,i.jsx)(t.a,{href:"analytics-integration#disabling-external-analytics-for-a-specific-customer",children:"opted it out"}),"."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"wrongParam"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"3001"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"This error indicates that some of your parameters are not correct do match the constraints."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"activateOnceError"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"3005"}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["It is not possible to call ",(0,i.jsx)(t.code,{children:".activate"})," method more than once."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"profileWasChanged"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"3006"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"The user profile was changed during the operation."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"persistingDataError"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"3100"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"It was an error while saving data."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"operationInterrupted"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"9000"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"This operation was interrupted by the system."})]})]})]}),"\n",(0,i.jsx)(t.h2,{id:"warnings",children:"Warnings"}),"\n",(0,i.jsx)(t.p,{children:"Warnings don\u2019t need to be fixed unless they lead to errors."}),"\n",(0,i.jsx)(t.p,{children:"| operationInterrupted | 9000 | This operation was interrupted by the system.                                                                                                  |"})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);