"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[4743],{9887:(e,s,t)=>{t.d(s,{Ay:()=>o,RM:()=>d});var r=t(74848),n=t(28453),i=t(43467);const d=[{value:"data object structure",id:"data-object-structure",level:3},...i.RM];function a(e){const s={a:"a",code:"code",h3:"h3",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{}),"\n",(0,r.jsxs)(s.p,{children:["The request is successful. The response body contains the ",(0,r.jsx)(s.code,{children:"data"})," field, which encapsulates the user's profile and associated information."]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Nullable"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"data"}),(0,r.jsx)(s.td,{children:"Object"}),(0,r.jsx)(s.td,{children:"\u2796"}),(0,r.jsxs)(s.td,{children:["Contains the ",(0,r.jsx)(s.a,{href:"server-side-api-objects#profile",children:"Profile"})," object with user details and metadata."]})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"data-object-structure",children:"data object structure"}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"data"})," field is the primary container for the user profile. It includes several fields:"]}),"\n",(0,r.jsx)(i.Ay,{})]})}function o(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},12414:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>d,metadata:()=>o,toc:()=>l});var r=t(74848),n=t(28453),i=(t(9887),t(45370),t(34028));t(26393);const d={title:"Server-side API Authorization and request format",description:"",metadataTitle:"",displayed_sidebar:"APISidebar",toc_max_heading_level:2},a=void 0,o={id:"ss-authorization",title:"Server-side API Authorization and request format",description:"",source:"@site/versioned_docs/version-3.0/ss-authorization.md",sourceDirName:".",slug:"/ss-authorization",permalink:"/test_assignment_adapty/docs/ss-authorization",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Server-side API Authorization and request format",description:"",metadataTitle:"",displayed_sidebar:"APISidebar",toc_max_heading_level:2},sidebar:"APISidebar",previous:{title:"Getting started with Server-side api",permalink:"/test_assignment_adapty/docs/getting-started-with-server-side-api"},next:{title:"Working with Postman",permalink:"/test_assignment_adapty/docs/postman"}},c={},l=[{value:"Authorization",id:"authorization",level:2},{value:"Request format",id:"request-format",level:2}];function h(e){const s={a:"a",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"authorization",children:"Authorization"}),"\n",(0,r.jsxs)(s.p,{children:["API requests must be authenticated with either your secret or your public API key as an Authorization header. You can find them in the ",(0,r.jsx)(s.a,{href:"https://app.adapty.io/settings/general",children:(0,r.jsx)(s.strong,{children:"App Settings"})}),":"]}),"\n",(0,r.jsx)(i.A,{children:(0,r.jsx)("img",{src:t(69692).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,r.jsx)(s.h2,{id:"request-format",children:"Request format"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Headers"})}),"\n",(0,r.jsx)(s.p,{children:"The server-side API requests require specific headers and a JSON body. Use the details below to structure your requests."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Header"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"Description"})})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Authorization"})}),(0,r.jsx)(s.td,{children:(0,r.jsxs)("p",{children:["Use secret API key: ",(0,r.jsx)(s.code,{children:"<Api-Key secret_live_...>"})]})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"adapty-profile-id"})}),(0,r.jsxs)(s.td,{children:[(0,r.jsxs)("p",{children:["The user\u2019s Adapty profile ID. Visible in the ",(0,r.jsx)(s.strong,{children:"Adapty ID"})," field in the ",(0,r.jsxs)(s.a,{href:"https://app.adapty.io/profiles/users",children:["Adapty Dashboard -> ",(0,r.jsx)(s.strong,{children:"Profiles"})]})," -> specific profile page. "]}),(0,r.jsxs)("p",{children:["Interchangeable with ",(0,r.jsx)(s.strong,{children:"adapty-customer-user-id"}),", use any of them."]})]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"adapty-customer-user-id"})}),(0,r.jsxs)(s.td,{children:[(0,r.jsxs)("p",{children:["The user\u2019s ID in your system. Visible in the ",(0,r.jsx)(s.strong,{children:"Customer user ID"})," field in the ",(0,r.jsxs)(s.a,{href:"https://app.adapty.io/profiles/users",children:["Adapty Dashboard -> ",(0,r.jsx)(s.strong,{children:"Profiles"})]})," -> specific profile page. "]}),(0,r.jsxs)("p",{children:["Interchangeable with ",(0,r.jsx)(s.strong,{children:"adapty-profile-id"}),", use any of them."]}),(0,r.jsxs)("p",{children:[" \u26a0\ufe0f Works only if you ",(0,r.jsx)(s.a,{href:"identifying-users",children:"identify users"})," in your app code using the Adapty SDK."]})]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"adapty-platform"})}),(0,r.jsxs)(s.td,{children:["(optional) Specify the platform of the device on which the app is installed. We recommend setting this parameter in the ",(0,r.jsx)(s.a,{href:"ss-create-profile",children:"Create profile"})," and ",(0,r.jsx)(s.a,{href:"ss-update-profile",children:"Update profile"})," requests when modifying the ",(0,r.jsx)(s.a,{href:"server-side-api-objects#installation-meta",children:"Installation Meta"})," object, as it depends on the device the user is using, and a single user may have multiple devices. Possible values: ",(0,r.jsx)(s.code,{children:"iOS"}),", ",(0,r.jsx)(s.code,{children:"macOS"}),", ",(0,r.jsx)(s.code,{children:"iPadOS"}),", ",(0,r.jsx)(s.code,{children:"visionOS"}),", ",(0,r.jsx)(s.code,{children:"Android"}),", or ",(0,r.jsx)(s.code,{children:"web"}),"."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"Content-Type"})}),(0,r.jsxs)(s.td,{children:["Set to ",(0,r.jsx)(s.code,{children:"application/json"})," for the API to process the request."]})]})]})]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Body"})}),"\n",(0,r.jsx)(s.p,{children:"The API expects a JSON-formatted body with the necessary data for the request."}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"What's next: requests:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"ss-get-profile",children:"Get profile"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"ss-create-profile",children:"Create profile"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"ss-update-profile",children:"Update profile"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"ss-delete-profile",children:"Delete profile"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"ss-grant-access-level",children:"Grant access level"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"ss-revoke-access-level",children:"Revoke access level"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"ss-set-transaction",children:"Set transaction"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"ss-purchase-in-stripe",children:"Validate purchase, provide access level to customer, and import their transaction history"})}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},43467:(e,s,t)=>{t.d(s,{Ay:()=>a,RM:()=>i});var r=t(74848),n=t(28453);const i=[];function d(e){const s={a:"a",code:"code",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Nullable"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"app_id"}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsx)(s.td,{children:"\u2796"}),(0,r.jsxs)(s.td,{children:["The internal ID of your app. You can see in the the Adapty Dashboard: ",(0,r.jsx)(s.a,{href:"https://app.adapty.io/settings/general",children:"App Settings -> General tab"}),"."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"profile_id"}),(0,r.jsx)(s.td,{children:"UUID"}),(0,r.jsx)(s.td,{children:"\u2796"}),(0,r.jsxs)(s.td,{children:["Adapty profile ID. You can see it in the ",(0,r.jsx)(s.strong,{children:"Adapty ID"})," field on the Adapty Dashboard -> ",(0,r.jsx)(s.a,{href:"https://app.adapty.io/profiles/users",children:"Profiles"})," -> specific profile page."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"customer_user_id"}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsx)(s.td,{children:"\u2795"}),(0,r.jsxs)(s.td,{children:["The ID of your user in your system. You can see it in the ",(0,r.jsx)(s.strong,{children:"Customer user ID"})," field on the Adapty Dashboard -> ",(0,r.jsx)(s.a,{href:"https://app.adapty.io/profiles/users",children:"Profiles"})," -> specific profile page. It will work only if you ",(0,r.jsx)(s.a,{href:"identifying-users",children:"identify the users"})," in your mobile app code via Adapty SDK."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"total_revenue_usd"}),(0,r.jsx)(s.td,{children:"Float"}),(0,r.jsx)(s.td,{children:"\u2796"}),(0,r.jsx)(s.td,{children:"A float value representing the total revenue in USD earned in the profile."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"segment_hash"}),(0,r.jsx)(s.td,{children:"String"}),(0,r.jsx)(s.td,{children:"\u2796"}),(0,r.jsx)(s.td,{children:"Internal parameter."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"timestamp"}),(0,r.jsx)(s.td,{children:"Integer"}),(0,r.jsx)(s.td,{children:"\u2796"}),(0,r.jsx)(s.td,{children:"Response time in milliseconds, needs for resolve a race condition."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"custom_attributes"}),(0,r.jsx)(s.td,{children:"Dictionary"}),(0,r.jsx)(s.td,{children:"\u2796"}),(0,r.jsxs)(s.td,{children:[(0,r.jsxs)("p",{children:["A maximum of 30 custom attributes to the profile are allowed to be set. If you provide the ",(0,r.jsx)(s.code,{children:"custom_attributes"})," dictionary, you must provide at least one attribute key."]}),(0,r.jsxs)("p",{children:[(0,r.jsx)(s.strong,{children:"Key:"})," The key must be a string with no more than 30 characters. Only letters, numbers, dashes, points, and underscores allowed"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)(s.strong,{children:"Value:"})," The attribute value must be no more than 30 characters. Only strings and floats are allowed as values, booleans will be converted to floats. Send an empty value or null to delete the attribute."]})]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"access_levels"}),(0,r.jsx)(s.td,{children:"Dictionary"}),(0,r.jsx)(s.td,{children:"\u2795"}),(0,r.jsxs)(s.td,{children:["Profile Paid Access Level objects. Dictionary where the keys are paid access level identifiers configured by a developer in the Adapty Dashboard. Values are ",(0,r.jsx)(s.a,{href:"https://adapty.io/docs/server-side-api-objects#customeraccesslevel",children:"Access level"})," objects. Can be null if the customer has no access levels."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"subscriptions"}),(0,r.jsx)(s.td,{children:"Dictionary"}),(0,r.jsx)(s.td,{children:"\u2795"}),(0,r.jsxs)(s.td,{children:["Dictionary where the keys are vendor product IDs. Values are ",(0,r.jsx)(s.a,{href:"https://adapty.io/docs/server-side-api-objects#subscription",children:"Subscription"})," objects. Can be null if the customer has no subscriptions."]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"non_subscriptions"}),(0,r.jsx)(s.td,{children:"Dictionary"}),(0,r.jsx)(s.td,{children:"\u2795"}),(0,r.jsxs)(s.td,{children:["Dictionary where the keys are vendor product ids. Values are an array of ",(0,r.jsx)(s.a,{href:"https://adapty.io/docs/server-side-api-objects#non-subscription",children:"Non-Subscription"})," objects. Can be null if the customer has no purchases."]})]})]})]})}function a(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},45370:(e,s,t)=>{t.d(s,{Ay:()=>a,RM:()=>i});var r=t(74848),n=t(28453);const i=[];function d(e){const s={code:"code",pre:"pre",...(0,n.R)(),...e.components};return(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "data": {\n    "app_id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",\n    "profile_id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",\n    "customer_user_id": "8612ED7C-3477-466D-93AE-1854B8E5FDD5",\n    "total_revenue_usd": 109.88999999999999,\n    "segment_hash": "string",\n    "timestamp": 0,\n    "custom_attributes": [\n      {\n        "key": "string",\n        "value": "string"\n      }\n    ],\n    "access_levels": [\n      {\n        "access_level_id": "premium",\n        "store": "app_store",\n        "store_product_id": "weekly_8.99",\n        "store_base_plan_id": "",\n        "store_transaction_id": "530001802720333",\n        "store_original_transaction_id": "530001724306018",\n        "offer": {\n          "category": "introductory",\n          "type": "free_trial",\n          "id": "offer12"\n        },\n        "environment": "Production",\n        "starts_at": "2022-10-12T09:42:50.000000+0000",\n        "purchased_at": "2022-10-12T09:42:50.000000+0000",\n        "originally_purchased_at": "2021-10-12T09:42:50.000000+0000",\n        "expires_at": "2022-10-12T09:42:50.000000+0000",\n        "renewal_cancelled_at": "2022-10-12T09:42:50.000000+0000",\n        "billing_issue_detected_at": "2022-10-12T09:42:50.000000+0000",\n        "is_in_grace_period": true,\n        "cancellation_reason": "voluntarily_cancelled"\n      }\n    ],\n    "subscriptions": [\n      {\n        "store": "app_store",\n        "store_product_id": "weekly_8.99",\n        "store_base_plan_id": "",\n        "store_transaction_id": "530001802720333",\n        "store_original_transaction_id": "530001724306018",\n        "offer": {\n          "offer_category": "introductory",\n          "offer_type": "free_trial",\n          "offer_id": "offer12"\n        },\n        "environment": "Production",\n        "purchased_at": "2022-10-12T09:42:50.000000+0000",\n        "originally_purchased_at": "2021-10-12T09:42:50.000000+0000",\n        "expires_at": "2022-10-12T09:42:50.000000+0000",\n        "renewal_cancelled_at": "2022-10-12T09:42:50.000000+0000",\n        "billing_issue_detected_at": "2022-10-12T09:42:50.000000+0000",\n        "is_in_grace_period": true,\n        "cancellation_reason": "voluntarily_cancelled"\n      }\n    ],\n    "non_subscriptions": [\n      {\n        "purchase_id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",\n        "store": "app_store",\n        "store_product_id": "weekly_8.99",\n        "store_base_plan_id": "",\n        "store_transaction_id": "530001724306018",\n        "store_original_transaction_id": "530001724306018",\n        "purchased_at": "2022-10-12T09:42:50.000000+0000",\n        "environment": "Production",\n        "is_refund": true,\n        "is_consumable": true\n      }\n    ]\n  }\n}\n'})})}function a(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},69692:(e,s,t)=>{t.d(s,{A:()=>r});const r=t.p+"assets/images/adapty-api-keys-f3aae23ddfdaf381c1eafc674c462b1d.webp"}}]);