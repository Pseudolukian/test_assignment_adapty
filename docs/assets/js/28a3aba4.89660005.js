"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[2155],{26448:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/7c1fdd0-apple_test_account-482fa30b6e52f5216711d032e0c7ef6b.webp"},40331:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/57c3a7c-apple_new_test_account-aecf482e5cbdabfc89ce0343f4261c60.webp"},87783:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>d,toc:()=>c});var s=n(74848),i=n(28453),o=n(34028);n(26393);const r={title:"Test in-app purchases in App Store Sandbox",description:"Test purchases in the sandbox environment to ensure smooth transactions.",metadataTitle:"Testing Purchases in Sandbox Mode | Adapty Docs"},a=void 0,d={id:"test-purchases-in-sandbox",title:"Test in-app purchases in App Store Sandbox",description:"Test purchases in the sandbox environment to ensure smooth transactions.",source:"@site/versioned_docs/version-3.0/test-purchases-in-sandbox.md",sourceDirName:".",slug:"/test-purchases-in-sandbox",permalink:"/docs/test-purchases-in-sandbox",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Test in-app purchases in App Store Sandbox",description:"Test purchases in the sandbox environment to ensure smooth transactions.",metadataTitle:"Testing Purchases in Sandbox Mode | Adapty Docs"},sidebar:"tutorialSidebar",previous:{title:"Test in-app purchases in Apple App Store",permalink:"/docs/testing-purchases-ios"},next:{title:"Test in-app purchases with TestFlight",permalink:"/docs/test-purchases-with-testflight"}},l={},c=[{value:"Before you start testing",id:"before-you-start-testing",level:2},{value:"Prepare for Sandbox testing",id:"prepare-for-sandbox-testing",level:2},{value:"Step 1. Create a Sandbox test account  (Sandbox Apple ID) in the App Store Connect",id:"step-1-create-a-sandbox-test-account--sandbox-apple-id-in-the-app-store-connect",level:3},{value:"Step 3. Add the Sandbox test account to your device",id:"step-3-add-the-sandbox-test-account-to-your-device",level:3},{value:"Step 4. Connect the device to your Mac with XCode",id:"step-4-connect-the-device-to-your-mac-with-xcode",level:3},{value:"Step 5. Build the app and run it",id:"step-5-build-the-app-and-run-it",level:3},{value:"Step 6. Make purchase",id:"step-6-make-purchase",level:3},{value:"Subscription renewal, billing retry, and grace period in Apple Sandbox",id:"subscription-renewal-billing-retry-and-grace-period-in-apple-sandbox",level:2}];function h(e){const t={a:"a",admonition:"admonition",br:"br",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Once you've configured in-app purchases in your mobile app, it's crucial to test them thoroughly to ensure functionality and proper transmission of transactions to Adapty before releasing the app to production. Transactions and purchases that occur in the sandbox don\u2019t incur charges. To conduct sandbox testing, you'll need to use a special test account - Sandbox Apple ID, and ensure the testing device is added to the Developer Account in the App Store Connect."}),"\n",(0,s.jsxs)(t.p,{children:["Sandbox testing is ideal for developers who wish to personally test purchases on a device connected to their Mac via XCode.",(0,s.jsx)(t.br,{}),"\n","For more details, you can refer to the ",(0,s.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/in-app_purchase/testing_in-app_purchases_with_sandbox",children:"Apple's documentation on Testing in-app purchases with sandbox"}),"."]}),"\n",(0,s.jsxs)(t.admonition,{type:"warning",children:[(0,s.jsx)(t.p,{children:"Test on a real device"}),(0,s.jsx)(t.p,{children:"To validate the end-to-end purchase process, it's essential to conduct testing on a real device. While testing on a simulator allows you to examine paywalls, it does not enable interaction with the Apple server, making it impossible to test purchases."})]}),"\n",(0,s.jsx)(t.h2,{id:"before-you-start-testing",children:"Before you start testing"}),"\n",(0,s.jsx)(t.p,{children:"Before you start testing in-app purchases, make sure that:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Your Apple Developer Program account is active. For more information, see Apple's ",(0,s.jsx)(t.a,{href:"https://developer.apple.com/programs/enroll",children:"What you need to enroll"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Your membership Account Holder has signed the Paid Applications Agreement, as described in Apple's ",(0,s.jsx)(t.a,{href:"https://developer.apple.com/help/app-store-connect/manage-agreements/sign-and-update-agreements",children:"Sign and update agreements"}),"."]}),"\n",(0,s.jsx)(t.li,{children:"You set up the product information in App Store Connect for the app you\u2019re testing. At a minimum, set up a product reference name, product ID, a localized name, and a price."}),"\n",(0,s.jsxs)(t.li,{children:["The ",(0,s.jsx)(t.strong,{children:"Keychain Sharing"})," capability is disabled. For more information, see Apple's article ",(0,s.jsx)(t.a,{href:"https://developer.apple.com/documentation/xcode/configuring-keychain-sharing",children:"Configuring keychain sharing"}),"."]}),"\n",(0,s.jsx)(t.li,{children:"You\u2019re running a development-signed rather than a production-signed build of your app."}),"\n",(0,s.jsxs)(t.li,{children:["You have completed all the steps outlined in the ",(0,s.jsx)(t.a,{href:"release-checklist",children:"release checklist"}),"."]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"prepare-for-sandbox-testing",children:"Prepare for Sandbox testing"}),"\n",(0,s.jsx)(t.p,{children:"Testing in-app purchases in the sandbox environment doesn\u2019t involve uploading your app binary to App Store Connect. Instead, you build and run your app directly from Xcode. However, it does require a special test account -  Sandbox Apple ID."}),"\n",(0,s.jsx)(t.h3,{id:"step-1-create-a-sandbox-test-account--sandbox-apple-id-in-the-app-store-connect",children:"Step 1. Create a Sandbox test account  (Sandbox Apple ID) in the App Store Connect"}),"\n",(0,s.jsxs)(t.admonition,{type:"warning",children:[(0,s.jsx)(t.p,{children:"When testing purchases, it's important to create a new sandbox test account each time. This helps keep the purchase history clean, ensuring better performance and smoother functionality."}),(0,s.jsxs)(t.p,{children:["Alternatively, you can clear the purchase history for your existing test account. For more details, check out the ",(0,s.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/in-app_purchase/testing_in-app_purchases_with_sandbox/#3894622",children:"Apple Developer documentation"}),"."]})]}),"\n",(0,s.jsx)(t.p,{children:"To create a Sandbox Apple ID:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Open ",(0,s.jsx)(t.strong,{children:"App Store Connect"}),". Proceed to ",(0,s.jsxs)(t.a,{href:"https://appstoreconnect.apple.com/access/users/sandbox",children:[(0,s.jsx)(t.strong,{children:"Users and Access"})," \u2192 ",(0,s.jsx)(t.strong,{children:"Sandbox"}),"  \u2192 ",(0,s.jsx)(t.strong,{children:"Test Accounts"})]})," section."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(o.A,{children:(0,s.jsx)("img",{src:n(26448).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,s.jsxs)(t.ol,{start:"2",children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Click the add button  ",(0,s.jsx)(t.strong,{children:"(+)"})," button next to the ",(0,s.jsx)(t.strong,{children:"Test Accounts"})," title."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(o.A,{children:(0,s.jsx)("img",{src:n(40331).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,s.jsxs)(t.ol,{start:"3",children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["In the ",(0,s.jsx)(t.strong,{children:"New Tester"})," window, enter the data of the test user."]}),"\n",(0,s.jsx)(t.admonition,{type:"warning",children:(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Make sure to provide a valid email you can verify."}),"\n",(0,s.jsxs)(t.li,{children:["Make sure to define the ",(0,s.jsx)(t.strong,{children:"Country or Region"})," which you plan to test."]}),"\n"]})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Click the ",(0,s.jsx)(t.strong,{children:"Create"})," button to confirm the creation"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"step-3-add-the-sandbox-test-account-to-your-device",children:"Step 3. Add the Sandbox test account to your device"}),"\n",(0,s.jsx)(t.p,{children:"The first time you run an app from XCode on your device, there's no need to manually add a Sandbox account. Upon building the app in XCode and running it on your device, when you initiate a purchase, the device prompts you to enter the Apple ID for the purchase. Simply enter your Sandbox Apple ID and password at this juncture, and the Sandbox test account will be automatically added to your device."}),"\n",(0,s.jsx)(t.p,{children:"If you need to change the Sandbox Apple ID associated with your device, you can do so directly on the device by following these steps:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["On iOS 12, navigate to ",(0,s.jsx)(t.strong,{children:"Settings > [Your Account] > App Store > Sandbox Account"}),".",(0,s.jsx)(t.br,{}),"\n","On iOS 13 or greater, navigate to ",(0,s.jsx)(t.strong,{children:"Settings > App Store > Sandbox Account"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Tap the current Sandbox Apple ID in the ",(0,s.jsx)(t.strong,{children:"Sandbox Account"})," section."]}),"\n",(0,s.jsxs)(t.li,{children:["Tap the ",(0,s.jsx)(t.strong,{children:"Sign Out"})," button."]}),"\n",(0,s.jsxs)(t.li,{children:["Tap the ",(0,s.jsx)(t.strong,{children:"Sign In"})," button."]}),"\n",(0,s.jsxs)(t.li,{children:["In the ",(0,s.jsx)(t.strong,{children:"Use the Apple IS for Apple Media Services"})," window, tap the ",(0,s.jsx)(t.strong,{children:"Use Other Apple ID"})," button."]}),"\n",(0,s.jsxs)(t.li,{children:["In the ",(0,s.jsx)(t.strong,{children:"Apple ID Sign-In Requested"})," window, enter the new sandbox account credentials that you previously created."]}),"\n",(0,s.jsxs)(t.li,{children:["Tap the ",(0,s.jsx)(t.strong,{children:"Done"})," button."]}),"\n",(0,s.jsxs)(t.li,{children:["In the ",(0,s.jsx)(t.strong,{children:"Apple ID Security"})," window, tap the ",(0,s.jsx)(t.strong,{children:"Other options"})," button."]}),"\n",(0,s.jsxs)(t.li,{children:["In the ",(0,s.jsx)(t.strong,{children:"Protect your account"})," window, tap the ",(0,s.jsx)(t.strong,{children:"Do not upgrade"})," button."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["The added sandbox account is shown in the ",(0,s.jsx)(t.strong,{children:"Sandbox Account"})," section of your iOS device ",(0,s.jsx)(t.strong,{children:"Settings"}),"."]}),"\n",(0,s.jsx)(t.h3,{id:"step-4-connect-the-device-to-your-mac-with-xcode",children:"Step 4. Connect the device to your Mac with XCode"}),"\n",(0,s.jsx)(t.p,{children:"To execute the built app version on your real device, include the device as a run destination in the Xcode project"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Connect your real device to the Mac with XCode using a cable or using the same Wi-Fi."}),"\n",(0,s.jsxs)(t.li,{children:["Choose the ",(0,s.jsx)(t.strong,{children:"Windows"})," -> ",(0,s.jsx)(t.strong,{children:"Devices and Simulators"})," from the XCode main menu."]}),"\n",(0,s.jsxs)(t.li,{children:["In the ",(0,s.jsx)(t.strong,{children:"Devices"})," tab, choose your device."]}),"\n",(0,s.jsxs)(t.li,{children:["Tap the ",(0,s.jsx)(t.strong,{children:"Trust"})," button on your mobile phone."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Your device is connected to the XCode and can be used for sandbox testing."}),"\n",(0,s.jsx)(t.h3,{id:"step-5-build-the-app-and-run-it",children:"Step 5. Build the app and run it"}),"\n",(0,s.jsxs)(t.p,{children:["Click the ",(0,s.jsx)(t.strong,{children:"Run"})," button in the toolbar or choose ",(0,s.jsx)(t.strong,{children:"Product -> Run"})," to build and run the app on the connected real device. If the build is successful, Xcode runs the app on your iOS device and opens a debugging session in the debug area of the XCode."]}),"\n",(0,s.jsx)(t.p,{children:"The app is ready for testing on the device."}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["When you\u2019re done testing the app, click the ",(0,s.jsx)(t.strong,{children:"Stop"})," button in the XCode toolbar."]})}),"\n",(0,s.jsx)(t.h3,{id:"step-6-make-purchase",children:"Step 6. Make purchase"}),"\n",(0,s.jsx)(t.p,{children:"Make a purchase in your mobile app via paywall."}),"\n",(0,s.jsx)(t.admonition,{type:"info",children:(0,s.jsxs)(t.p,{children:["Now you can ",(0,s.jsx)(t.a,{href:"validate-test-purchases",children:"validate that the test purchase is successful"}),"."]})}),"\n",(0,s.jsx)(t.h2,{id:"subscription-renewal-billing-retry-and-grace-period-in-apple-sandbox",children:"Subscription renewal, billing retry, and grace period in Apple Sandbox"}),"\n",(0,s.jsxs)(t.p,{children:["Keep in mind that in the Apple Sandbox environment, subscription renewals happen faster, and both the billing retry and grace periods are shorter than in production. The default values are shown in the table below. You can adjust a tester\u2019s subscription renewal rate, billing retry period, and grace period at any time. For more details, refer to the ",(0,s.jsx)(t.a,{href:"https://developer.apple.com/help/app-store-connect/test-in-app-purchases/manage-sandbox-apple-account-settings/#edit-subscription-renewal-speed",children:"official Apple documentation"}),"."]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Subscription duration"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"1 week"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"1 month"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"2 months"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"3 months"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"6 months"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"1 year"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Subscription renewal speed"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"3 minutes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"5 minutes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"10 minutes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"15 minutes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"30 minutes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"1 hour"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Length of Billing Retry"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"10 minutes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"10 minutes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"10 minutes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"10 minutes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"10 minutes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"10 minutes"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Length of Billing Grace Period"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"3 minutes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"5 minutes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"5 minutes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"5 minutes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"5 minutes"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"5 minutes"})]})]})]}),"\n",(0,s.jsx)(t.p,{children:"Additionally, keep in mind that in the sandbox environment, auto-renewable subscriptions renew up to 12 times before they stop."})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);