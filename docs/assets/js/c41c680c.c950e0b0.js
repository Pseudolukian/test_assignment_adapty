"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[3243],{11470:(e,t,n)=>{n.d(t,{A:()=>T});var a=n(96540),r=n(34164),o=n(23104),s=n(56347),l=n(205),i=n(57485),u=n(31682),d=n(70679);function c(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??function(e){return c(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}(n);return function(e){const t=(0,u.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function f(e){let{queryString:t=!1,groupId:n}=e;const r=(0,s.W6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,i.aZ)(o),(0,a.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(r.location.search);t.set(o,e),r.replace({...r.location,search:t.toString()})}),[o,r])]}function b(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,o=p(e),[s,i]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[u,c]=f({queryString:n,groupId:r}),[b,m]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,o]=(0,d.Dv)(n);return[r,(0,a.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:r}),y=(()=>{const e=u??b;return h({value:e,tabValues:o})?e:null})();(0,l.A)((()=>{y&&i(y)}),[y]);return{selectedValue:s,selectValue:(0,a.useCallback)((e=>{if(!h({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);i(e),c(e),m(e)}),[c,m,o]),tabValues:o}}var m=n(92303);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=n(74848);function v(e){let{className:t,block:n,selectedValue:a,selectValue:s,tabValues:l}=e;const i=[],{blockElementScrollPositionUntilNextRender:u}=(0,o.a_)(),d=e=>{const t=e.currentTarget,n=i.indexOf(t),r=l[n].value;r!==a&&(u(t),s(r))},c=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=i.indexOf(e.currentTarget)+1;t=i[n]??i[0];break}case"ArrowLeft":{const n=i.indexOf(e.currentTarget)-1;t=i[n]??i[i.length-1];break}}t?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},t),children:l.map((e=>{let{value:t,label:n,attributes:o}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:a===t?0:-1,"aria-selected":a===t,ref:e=>i.push(e),onKeyDown:c,onClick:d,...o,className:(0,r.A)("tabs__item",y.tabItem,o?.className,{"tabs__item--active":a===t}),children:n??t},t)}))})}function w(e){let{lazy:t,children:n,selectedValue:r}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===r));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:o.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==r})))})}function j(e){const t=b(e);return(0,g.jsxs)("div",{className:(0,r.A)("tabs-container",y.tabList),children:[(0,g.jsx)(v,{...t,...e}),(0,g.jsx)(w,{...t,...e})]})}function T(e){const t=(0,m.A)();return(0,g.jsx)(j,{...e,children:c(e.children)},String(t))}},19365:(e,t,n)=>{n.d(t,{A:()=>s});n(96540);var a=n(34164);const r={tabItem:"tabItem_Ymn6"};var o=n(74848);function s(e){let{children:t,hidden:n,className:s}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,a.A)(r.tabItem,s),hidden:n,children:t})}},99531:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>u,toc:()=>c});var a=n(74848),r=n(28453),o=n(11470),s=n(19365);const l={title:"Forwarding Events to Adapty",description:"",metadataTitle:""},i=void 0,u={id:"forwarding-events-to-adapty",title:"Forwarding Events to Adapty",description:"",source:"@site/versioned_docs/version-3.0/forwarding-events-to-adapty.md",sourceDirName:".",slug:"/forwarding-events-to-adapty",permalink:"/docs/forwarding-events-to-adapty",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Forwarding Events to Adapty",description:"",metadataTitle:""}},d={},c=[];function p(e){const t={a:"a",code:"code",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"Apple and Google provide a way to send subscription event updates the moment they occur on their servers. It's essential to send them to Adapty to avoid delays in processing subscription status and therefore, providing the best experience for your customers."}),"\n",(0,a.jsxs)(t.p,{children:["In most cases, you just have to ",(0,a.jsx)(t.a,{href:"enable-app-store-server-notifications",children:"enable App Store server notifications"})," or ",(0,a.jsx)(t.a,{href:"enable-real-time-developer-notifications-rtdn",children:"enable Real-time developer notifications (RTDN) in Google Play Console"}),"; no coding is needed on your side."]}),"\n",(0,a.jsx)(t.p,{children:"However, if you process these events and want to keep doing it, make sure to forward events to Adapty from your backend. It's straightforward; you just have to send raw (without any modification) payload from Apple or Google as a request body to our server using the same URL from settings."}),"\n",(0,a.jsx)(t.p,{children:"Here are examples for different programming languages:"}),"\n",(0,a.jsxs)(o.A,{groupId:"current-os",queryString:!0,children:[(0,a.jsx)(s.A,{value:"python",label:"Python",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",metastring:"showLineNumbers",children:'import requests\n\nurl = "https://api.adapty.io/api/v1/sdk/apple/webhook/123a258e62fad41bfa734f4b0dbcad456/" # don\'t forget to replace this URL\n\npayload = \'{"latest_receipt":"abc=","notification_type":"INITIAL_BUY",...}\' # json encoded payload from Apple/Google\n\nheaders = {\n  \'Content-Type\': \'application/json\'\n}\n\nresponse = requests.request("POST", url, headers=headers, data=payload)\n'})})}),(0,a.jsx)(s.A,{value:"javascript",label:"Javascript",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",metastring:"showLineNumbers",children:"const axios = require('axios');\n\nconst url = 'https://api.adapty.io/api/v1/sdk/apple/webhook/123a258e62fad41bfa734f4b0dbcad456/'; // don't forget to replace this URL\n\nconst payload = '{\"latest_receipt\":\"abc=\",\"notification_type\":\"INITIAL_BUY\",...}'; // json encoded payload from Apple/Google\n\nconst config = {\n  method: 'post',\n  url: url,\n  headers: { \n    'Content-Type': 'application/json'\n  },\n  data: payload,\n};\n\nconst response = await axios(config);\n"})})}),(0,a.jsx)(s.A,{value:"php",label:"PHP",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-php",metastring:"showLineNumbers",children:"<?php\nrequire_once 'HTTP/Request2.php';\n\n$url = 'https://api.adapty.io/api/v1/sdk/apple/webhook/123a258e62fad41bfa734f4b0dbcad456/'; // don't forget to replace this URL\n\n$payload = '{\"latest_receipt\":\"abc=\",\"notification_type\":\"INITIAL_BUY\",...}'; // json encoded payload from Apple/Google\n\n$request = new HTTP_Request2();\n$request->setUrl($url);\n$request->setMethod(HTTP_Request2::METHOD_POST);\n$request->setConfig(array(\n  'follow_redirects' => TRUE\n));\n$request->setHeader(array(\n  'Content-Type' => 'application/json'\n));\n$request->setBody($payload);\n$response = $request->send();\n"})})}),(0,a.jsx)(s.A,{value:"ruby",label:"Ruby",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ruby",metastring:"showLineNumbers",children:'require "uri"\nrequire "net/http"\n\nurl = URI("https://api.adapty.io/api/v1/sdk/apple/webhook/123a258e62fad41bfa734f4b0dbcad456/") # don\'t forget to replace this URL\n\npayload = \'{"latest_receipt":"abc=","notification_type":"INITIAL_BUY",...}\' # json encoded payload from Apple/Google\n\nhttps = Net::HTTP.new(url.host, url.port)\nhttps.use_ssl = true\n\nrequest = Net::HTTP::Post.new(url)\nrequest["Content-Type"] = "application/json"\nrequest.body = payload\n\nresponse = https.request(request)\n'})})}),(0,a.jsx)(s.A,{value:"java",label:"Java",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",metastring:"showLineNumbers",children:'String url = "https://api.adapty.io/api/v1/sdk/apple/webhook/123a258e62fad41bfa734f4b0dbcad456/"; // don\'t forget to replace this URL\n\nString payload = "{\\"latest_receipt\\":\\"abc=\\",\\"notification_type\\":\\"INITIAL_BUY\\",...}" // json encoded payload from Apple/Google\n\nOkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse("application/json");\nRequestBody body = RequestBody.create(mediaType, payload);\nRequest request = new Request.Builder()\n  .url(url)\n  .method("POST", body)\n  .addHeader("Content-Type", "application/json")\n  .build();\nResponse response = client.newCall(request).execute();\n'})})}),(0,a.jsx)(s.A,{value:"go",label:"Go",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-go",metastring:"showLineNumbers",children:'package main\n\nimport (\n  "fmt"\n  "strings"\n  "net/http"\n  "io"\n)\n\nfunc main() {\n  url := "https://api.adapty.io/api/v1/sdk/apple/webhook/123a258e62fad41bfa734f4b0dbcad456/" // Replace this with the actual URL\n\n  payload := strings.NewReader(`{"latest_receipt":"abc=","notification_type":"INITIAL_BUY"}`) // Ensure valid JSON\n\n  method := "POST"\n\n  client := &http.Client{}\n  req, err := http.NewRequest(method, url, payload)\n  if err != nil {\n  \tfmt.Println("Error creating request:", err)\n  \treturn\n  }\n  req.Header.Add("Content-Type", "application/json")\n\n  res, err := client.Do(req)\n  if err != nil {\n  \tfmt.Println("Error sending request:", err)\n  \treturn\n  }\n  defer res.Body.Close()\n}\n'})})})]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}}}]);