"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[5065],{2769:(e,r,n)=>{n.d(r,{Ay:()=>i,RM:()=>a});var t=n(74848),s=n(28453);const a=[{value:"Body",id:"body",level:4},{value:"Response example",id:"response-example",level:4}];function l(e){const r={a:"a",code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{}),"\n",(0,t.jsxs)(r.p,{children:["The request failed due to missing or incorrect authorization. Check the ",(0,t.jsx)(r.a,{href:"ss-authorization",children:"Authorization"})," page, paying close attention to the ",(0,t.jsx)(r.strong,{children:"Authorization header"}),"."]}),"\n",(0,t.jsx)(r.p,{children:"The request also failed because the specified profile wasn\u2019t found."}),"\n",(0,t.jsx)(r.h4,{id:"body",children:"Body"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"errors"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"source"}),": (string) Always ",(0,t.jsx)(r.code,{children:"non_field_errors"}),"."]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"errors"}),": A description of the error."]})]})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"error_code"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsxs)(r.td,{children:["Short error name. Always ",(0,t.jsx)(r.code,{children:"not_authenticated"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"status_code"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsxs)(r.td,{children:["HTTP status. Always ",(0,t.jsx)(r.code,{children:"401."})]})]})]})]}),"\n",(0,t.jsx)(r.h4,{id:"response-example",children:"Response example"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "errors": [\n    {\n      "source": "non_field_errors",\n      "errors": [\n        "Authentication credentials were not provided."\n      ]\n    }\n  ],\n  "error_code": "not_authenticated",\n  "status_code": 401\n}\n'})})]})}function i(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},11470:(e,r,n)=>{n.d(r,{A:()=>_});var t=n(96540),s=n(34164),a=n(23104),l=n(56347),i=n(205),o=n(57485),d=n(31682),c=n(70679);function u(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:r,children:n}=e;return(0,t.useMemo)((()=>{const e=r??function(e){return u(e).map((e=>{let{props:{value:r,label:n,attributes:t,default:s}}=e;return{value:r,label:n,attributes:t,default:s}}))}(n);return function(e){const r=(0,d.X)(e,((e,r)=>e.value===r.value));if(r.length>0)throw new Error(`Docusaurus error: Duplicate values "${r.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[r,n])}function p(e){let{value:r,tabValues:n}=e;return n.some((e=>e.value===r))}function x(e){let{queryString:r=!1,groupId:n}=e;const s=(0,l.W6)(),a=function(e){let{queryString:r=!1,groupId:n}=e;if("string"==typeof r)return r;if(!1===r)return null;if(!0===r&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:r,groupId:n});return[(0,o.aZ)(a),(0,t.useCallback)((e=>{if(!a)return;const r=new URLSearchParams(s.location.search);r.set(a,e),s.replace({...s.location,search:r.toString()})}),[a,s])]}function j(e){const{defaultValue:r,queryString:n=!1,groupId:s}=e,a=h(e),[l,o]=(0,t.useState)((()=>function(e){let{defaultValue:r,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(r){if(!p({value:r,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${r}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return r}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:r,tabValues:a}))),[d,u]=x({queryString:n,groupId:s}),[j,f]=function(e){let{groupId:r}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(r),[s,a]=(0,c.Dv)(n);return[s,(0,t.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:s}),m=(()=>{const e=d??j;return p({value:e,tabValues:a})?e:null})();(0,i.A)((()=>{m&&o(m)}),[m]);return{selectedValue:l,selectValue:(0,t.useCallback)((e=>{if(!p({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),f(e)}),[u,f,a]),tabValues:a}}var f=n(92303);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=n(74848);function v(e){let{className:r,block:n,selectedValue:t,selectValue:l,tabValues:i}=e;const o=[],{blockElementScrollPositionUntilNextRender:d}=(0,a.a_)(),c=e=>{const r=e.currentTarget,n=o.indexOf(r),s=i[n].value;s!==t&&(d(r),l(s))},u=e=>{let r=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=o.indexOf(e.currentTarget)+1;r=o[n]??o[0];break}case"ArrowLeft":{const n=o.indexOf(e.currentTarget)-1;r=o[n]??o[o.length-1];break}}r?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},r),children:i.map((e=>{let{value:r,label:n,attributes:a}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:t===r?0:-1,"aria-selected":t===r,ref:e=>o.push(e),onKeyDown:u,onClick:c,...a,className:(0,s.A)("tabs__item",m.tabItem,a?.className,{"tabs__item--active":t===r}),children:n??r},r)}))})}function y(e){let{lazy:r,children:n,selectedValue:s}=e;const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(r){const e=a.find((e=>e.props.value===s));return e?(0,t.cloneElement)(e,{className:"margin-top--md"}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:a.map(((e,r)=>(0,t.cloneElement)(e,{key:r,hidden:e.props.value!==s})))})}function g(e){const r=j(e);return(0,b.jsxs)("div",{className:(0,s.A)("tabs-container",m.tabList),children:[(0,b.jsx)(v,{...r,...e}),(0,b.jsx)(y,{...r,...e})]})}function _(e){const r=(0,f.A)();return(0,b.jsx)(g,{...e,children:u(e.children)},String(r))}},19365:(e,r,n)=>{n.d(r,{A:()=>l});n(96540);var t=n(34164);const s={tabItem:"tabItem_Ymn6"};var a=n(74848);function l(e){let{children:r,hidden:n,className:l}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,t.A)(s.tabItem,l),hidden:n,children:r})}},59660:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>h,contentTitle:()=>c,default:()=>j,frontMatter:()=>d,metadata:()=>u,toc:()=>p});var t=n(74848),s=n(28453),a=n(11470),l=n(19365),i=n(74732),o=n(2769);const d={title:"   Delete profile with server-side API",description:"",metadataTitle:"",displayed_sidebar:"APISidebar"},c=void 0,u={id:"ss-delete-profile",title:"   Delete profile with server-side API",description:"",source:"@site/versioned_docs/version-3.0/ss-delete-profile.md",sourceDirName:".",slug:"/ss-delete-profile",permalink:"/test_assignment_adapty/docs/ss-delete-profile",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"   Delete profile with server-side API",description:"",metadataTitle:"",displayed_sidebar:"APISidebar"},sidebar:"APISidebar",previous:{title:"Update profile",permalink:"/test_assignment_adapty/docs/ss-update-profile"},next:{title:"Grant access level",permalink:"/test_assignment_adapty/docs/ss-grant-access-level"}},h={},p=[{value:"Method and endpoint",id:"method-and-endpoint",level:2},{value:"Example request",id:"example-request",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Successful response: 204: No Content",id:"successful-response-204-no-content",level:2},{value:"Errors",id:"errors",level:2},{value:"401: Unauthorized",id:"401-unauthorized",level:3},...o.RM,{value:"404: Not found",id:"404-not-found",level:3},...i.RM];function x(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.p,{children:"Deletes an end user of your app in Adapty."}),"\n",(0,t.jsx)(r.p,{children:"Calling this endpoint enables the deletion of a user's profile and all related data, rendering it inaccessible to the client. Any profile history linked to the deleted profile will be detached, and integration events previously sent to integrations will be deleted from the event feed."}),"\n",(0,t.jsx)(r.p,{children:"Should another profile make a purchase from the device with the same Apple ID (or when the subscription is restored), the profile history will be reassigned to the new profile, and integration events will be reissued."}),"\n",(0,t.jsx)(r.p,{children:"Please be aware that this endpoint does not support bulk deletion, therefore each request must be handled individually. For managing a substantial number of users, it is advisable to execute requests concurrently."}),"\n",(0,t.jsx)(r.h2,{id:"method-and-endpoint",children:"Method and endpoint"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-http",children:"DELETE https://api.adapty.io/api/v2/server-side-api/profile/\n"})}),"\n",(0,t.jsx)(r.h2,{id:"example-request",children:"Example request"}),"\n",(0,t.jsxs)(a.A,{groupId:"api-lang",queryString:!0,children:[(0,t.jsx)(l.A,{value:"curl",label:"cURL",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",metastring:"showLineNumbers",children:"curl --location --request DELETE 'https://api.adapty.io/api/v2/server-side-api/profile/' \\\n--header 'Authorization: Api-Key <YOUR_SECRET_API_KEY>' \\\n--header 'adapty-customer-user-id: <YOUR_CUSTOMER_USER_ID>' \\\n--header 'Content-Type: application/json' \\\n--data ''\n"})})}),(0,t.jsx)(l.A,{value:"python",label:"Python",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",metastring:"showLineNumbers",children:'import requests\n\nurl = "https://api.adapty.io/api/v2/server-side-api/profile/"\n\nheaders = {\n    "Authorization": "Api-Key <YOUR_SECRET_API_KEY>",\n    "adapty-customer-user-id": "<YOUR_CUSTOMER_USER_ID>",\n    "Content-Type": "application/json"\n}\n\nresponse = requests.delete(url, headers=headers)\n\nprint(response.text)\n'})})}),(0,t.jsx)(l.A,{value:"js",label:"JavaScript",default:!0,children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",metastring:"showLineNumbers",children:'const myHeaders = new Headers();\nmyHeaders.append("Authorization", "Api-Key <YOUR_SECRET_API_KEY>");\nmyHeaders.append("adapty-customer-user-id", "<YOUR_CUSTOMER_USER_ID>");\nmyHeaders.append("Content-Type", "application/json");\n\nconst raw = "";\n\nconst requestOptions = {\n  method: "DELETE",\n  headers: myHeaders,\n  body: raw,\n  redirect: "follow"\n};\n\nfetch("https://api.adapty.io/api/v2/server-side-api/profile/", requestOptions)\n  .then((response) => response.text())\n  .then((result) => console.log(result))\n  .catch((error) => console.error(error));\n'})})})]}),"\n",(0,t.jsx)(r.p,{children:"Placeholders:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"<YOUR_CUSTOMER_USER_ID>"}),": The unique ID of the customer in your system."]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"<YOUR_SECRET_API_KEY>"}),": Your secret API key for authorization."]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsx)(r.p,{children:"No parameters"}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"successful-response-204-no-content",children:"Successful response: 204: No Content"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"204: No Content"})," with an empty body is a successful response."]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"errors",children:"Errors"}),"\n",(0,t.jsx)(r.h3,{id:"401-unauthorized",children:"401: Unauthorized"}),"\n",(0,t.jsx)(o.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h3,{id:"404-not-found",children:"404: Not found"}),"\n",(0,t.jsx)(i.Ay,{}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.strong,{children:"See also:"})}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"ss-get-profile",children:"Get profile"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"ss-create-profile",children:"Create profile"})}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.a,{href:"ss-update-profile",children:"Update profile"})}),"\n"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{})})]})}function j(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(x,{...e})}):x(e)}},74732:(e,r,n)=>{n.d(r,{Ay:()=>i,RM:()=>a});var t=n(74848),s=n(28453);const a=[{value:"Body",id:"body",level:5},{value:"Response example",id:"response-example",level:5}];function l(e){const r={code:"code",h5:"h5",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{}),"\n",(0,t.jsxs)(r.p,{children:["The request failed because the specified profile wasn\u2019t found. Double-check the ",(0,t.jsx)(r.code,{children:"customer_user_id"})," or ",(0,t.jsx)(r.code,{children:"profile_id"})," for any typos."]}),"\n",(0,t.jsx)(r.h5,{id:"body",children:"Body"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"errors"}),(0,t.jsx)(r.td,{children:"Object"}),(0,t.jsx)(r.td,{children:(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"source"}),": (string) Always ",(0,t.jsx)(r.code,{children:"null"}),"."]}),(0,t.jsxs)("li",{children:[" ",(0,t.jsx)(r.strong,{children:"errors"}),": A description of the error."]})]})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"error_code"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsxs)(r.td,{children:["Short error name. Always ",(0,t.jsx)(r.code,{children:"profile_does_not_exist"}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"status_code"}),(0,t.jsx)(r.td,{children:"Integer"}),(0,t.jsxs)(r.td,{children:["HTTP status. Always ",(0,t.jsx)(r.code,{children:"404"}),"."]})]})]})]}),"\n",(0,t.jsx)(r.h5,{id:"response-example",children:"Response example"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n    "errors": [\n        {\n            "source": null,\n            "errors": [\n                "Profile not found"\n            ]\n        }\n    ],\n    "error_code": "profile_does_not_exist",\n    "status_code": 404\n}\n'})})]})}function i(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}}}]);