"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[7177],{6735:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var s=t(74848),r=t(28453);t(26393);const o={title:"Android \u2013 What's new",description:"Migrate to Android 2 with Adapty for optimized subscription management.",metadataTitle:"Migrating to Android 2 | Adapty Docs"},a=void 0,i={id:"migration-to-android-2",title:"Android \u2013 What's new",description:"Migrate to Android 2 with Adapty for optimized subscription management.",source:"@site/versioned_docs/version-3.0/migration-to-android-2.md",sourceDirName:".",slug:"/migration-to-android-2",permalink:"/docs/migration-to-android-2",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Android \u2013 What's new",description:"Migrate to Android 2 with Adapty for optimized subscription management.",metadataTitle:"Migrating to Android 2 | Adapty Docs"}},l={},d=[{value:"Profile",id:"profile",level:3},{value:"Paywalls",id:"paywalls",level:3},{value:"Products",id:"products",level:3},{value:"In lieu of a conclusion",id:"in-lieu-of-a-conclusion",level:3}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"In the new version of the Adapty SDK, we've made quite a lot of changes to the internal implementation of our SDK, applying all of our accumulated experience. We also redesigned our public API and relationships between some entities so that it causes as little misunderstanding as possible and reduces the number of errors made by developers."}),"\n",(0,s.jsx)(n.p,{children:"First, let's look at the main things that have been changed, and then let's discuss each item individually."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#profile",children:"Profile"})," \u2013 we have renamed ",(0,s.jsx)(n.code,{children:"PurchaserInfo"})," to ",(0,s.jsx)(n.code,{children:"AdaptyProfile"}),". This also affected all related functions."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#paywalls",children:"Paywalls"})," \u2013 now you can get only the necessary paywall."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#products",children:"Products"})," \u2013 we separated the concept of paywall and product, so now the developer first asks for the paywall they want, and then the corresponding product list."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["We've also compiled a full list of changes, which can be found on the release page on our ",(0,s.jsx)(n.a,{href:"https://github.com/adaptyteam/AdaptySDK-Android/releases/tag/2.0.0",children:"GitHub"})]}),"\n",(0,s.jsx)(n.h3,{id:"profile",children:"Profile"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Before:"}),(0,s.jsx)(n.br,{}),"\n","Previously, all information that related to the user was in the ",(0,s.jsx)(n.code,{children:"PurchaserInfo"})," model. This information was obtained by calling the ",(0,s.jsx)(n.code,{children:".getPurchaserInfo(forceUpdate)"})," method:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-kotlin",metastring:'showLineNumbers title="Kotlin"',children:"// AdaptySDK 1.x.x\nAdapty.getPurchaserInfo(forceUpdate) { purchaserInfo, error ->\n    if (error == null) {\n        // check the access \n    }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"After:"}),(0,s.jsx)(n.br,{}),"\n","Now we have renamed the model to ",(0,s.jsx)(n.a,{href:"sdk-models#adaptyprofile",children:(0,s.jsx)(n.code,{children:"AdaptyProfile"})}),". Also it affected the corresponding method:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-kotlin",metastring:'showLineNumbers title="Kotlin"',children:"// AdaptySDK 2.0.0\nAdapty.getProfile { result ->\n    if (result is AdaptyResult.Success) {\n        val profile = result.value\n        //check the access\n    }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Motivation:"}),(0,s.jsx)(n.br,{}),"\n","This name reflects the essence of the model much more correctly, because not every user is a subscriber."]}),"\n",(0,s.jsxs)(n.p,{children:["This change also affected the method ",(0,s.jsx)(n.code,{children:".setOnPurchaserInfoUpdatedListener()"})," to ",(0,s.jsx)(n.code,{children:".setOnProfileUpdatedListener()"})]}),"\n",(0,s.jsx)(n.h3,{id:"paywalls",children:"Paywalls"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Before:"}),(0,s.jsx)(n.br,{}),"\n","Previously, developers used to query a list of paywalls and then search that list for the desired element."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-kotlin",metastring:'showLineNumbers title="Kotlin"',children:"// AdaptySDK 1.x.x\nAdapty.getPaywalls(forceUpdate) { paywalls, products, error ->\n    if (error == null) {\n        // retrieve the products from paywalls\n    }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"After:"}),(0,s.jsx)(n.br,{}),"\n","We have significantly simplified this use case, so now you can get only the requested object, without touching the rest."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-kotlin",metastring:'showLineNumbers title="Kotlin"',children:'// AdaptySDK 2.0.0\nAdapty.getPaywall("YOUR_PLACEMENT_ID") { result ->\n    when (result) {\n        is AdaptyResult.Success -> {\n            val paywall = result.value\n            // the requested paywall\n        }\n        is AdaptyResult.Error -> {\n            val error = result.error\n            // handle the error\n        }\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Motivation:"}),(0,s.jsx)(n.br,{}),"\n","In addition to simplifying the most common usage scenario, we also significantly reduce the load on our servers, which will allow us to get a response from the server as quickly as possible."]}),"\n",(0,s.jsx)(n.h3,{id:"products",children:"Products"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Before:"}),(0,s.jsx)(n.br,{}),"\n","Previously the product entity was a part of the paywall, so you could use it right after ",(0,s.jsx)(n.code,{children:".getPaywalls"})," method was done. Also you could use products out of the paywalls context."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-kotlin",metastring:'showLineNumbers title="Kotlin"',children:"// AdaptySDK 1.x.x\nAdapty.getPaywalls(forceUpdate) { paywalls, products, error ->\n    if (error == null) {\n        // retrieve the products from paywalls\n    }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"After:"}),(0,s.jsx)(n.br,{}),"\n","Once you have obtained the desired paywall, you can query the list of products for it. Now the product entity is independent, although it can only exist in the context of the paywall."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-kotlin",metastring:'showLineNumbers title="Kotlin"',children:"// AdaptySDK 2.0.0\nAdapty.getPaywallProducts(paywall) { result ->\n    when (result) {\n        is AdaptyResult.Success -> {\n            val products = result.value\n            // the requested products\n        }\n        is AdaptyResult.Error -> {\n            val error = result.error\n            // handle the error\n        }\n    }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Motivation:"}),(0,s.jsx)(n.br,{}),"\n","We believe that this architecture will provide more flexibility in terms of receiving paywalls and products (for example, now you are not blocked by Google when you receive a paywall), and will also optimize the load on the servers, which will speed up the response. Also, this approach is less error-prone."]}),"\n",(0,s.jsxs)(n.admonition,{type:"warning",children:[(0,s.jsx)(n.p,{children:"Products outside the paywalls"}),(0,s.jsx)(n.p,{children:"If you for some reason want to work with a product (or an array of products), please create a paywall for it. This approach is great for scaling and analytics."})]}),"\n",(0,s.jsx)(n.h3,{id:"in-lieu-of-a-conclusion",children:"In lieu of a conclusion"}),"\n",(0,s.jsx)(n.p,{children:'In this article, we have listed the most significant changes introduced in the new version, which can be seen in the public API. However, most of the improvements are hidden "under the hood" and are not mentioned here. Of course, we\'ve completely updated our documentation to reflect the new release, so you can feel free to use it.'}),"\n",(0,s.jsxs)(n.p,{children:["You can find the complete list of changes on the ",(0,s.jsx)(n.a,{href:"https://github.com/adaptyteam/AdaptySDK-Android/releases/tag/2.0.0",children:"release page"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Stay tuned for more updates!"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What's next:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"migration-to-adapty-sdk-v3",children:"Migrate to Adapty SDK 3.0.x"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);