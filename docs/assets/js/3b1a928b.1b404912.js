"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[1269],{2099:(e,s,t)=>{t.d(s,{A:()=>n});const n=t.p+"assets/images/actions-makepurchase-1425243bc4e5b75e08db2faee9090529.webp"},13664:(e,s,t)=>{t.d(s,{A:()=>n});const n=t.p+"assets/images/makePurchaseResult-7d42b2d1d4ec02789ee91c0be5cbf372.webp"},15297:(e,s,t)=>{t.d(s,{A:()=>n});const n=t.p+"assets/images/double-click-buy-a1cddf54bbc56491db580117add6fb4a.webp"},23043:(e,s,t)=>{t.d(s,{A:()=>n});const n=t.p+"assets/images/check-makePurchaseResult-42337b3f44371970f60d808300e24620.webp"},24390:(e,s,t)=>{t.d(s,{A:()=>n});const n=t.p+"assets/images/make-purchase-fbc31063f9281ad0f06c048ef1e9fc35.webp"},34437:(e,s,t)=>{t.d(s,{A:()=>n});const n=t.p+"assets/images/open-paid-content-3494cac90191124543c9125040169f1d.webp"},34911:(e,s,t)=>{t.d(s,{A:()=>n});const n=t.p+"assets/images/makePurchase-informational-4d31a6d6d4927f8eb9f3595770a9c114.webp"},57059:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>a,toc:()=>h});var n=t(74848),r=t(28453),i=t(34028);t(26393);const l={title:"Step 4. Enable purchase",description:"Learn how to make purchases using Adapty\u2019s Feature Flags system.",metadataTitle:"Feature Flags: Making Purchases | Adapty Docs"},c=void 0,a={id:"ff-make-purchase",title:"Step 4. Enable purchase",description:"Learn how to make purchases using Adapty\u2019s Feature Flags system.",source:"@site/versioned_docs/version-3.0/ff-make-purchase.md",sourceDirName:".",slug:"/ff-make-purchase",permalink:"/docs/ff-make-purchase",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Step 4. Enable purchase",description:"Learn how to make purchases using Adapty\u2019s Feature Flags system.",metadataTitle:"Feature Flags: Making Purchases | Adapty Docs"},sidebar:"tutorialSidebar",previous:{title:"Step 2. Add data to paywall",permalink:"/docs/ff-add-variables-to-paywalls"},next:{title:"Step 4. Check access to paid content",permalink:"/docs/ff-check-subscription-status"}},d={},h=[{value:"Step 4.1. Enable users make your purchase",id:"step-41-enable-users-make-your-purchase",level:2},{value:"Step 4.2. Check if the purchase was successful",id:"step-42-check-if-the-purchase-was-successful",level:2},{value:"Step 4.3. Open paid content",id:"step-43-open-paid-content",level:2},{value:"Step 4.4 Show error message if purchase failed",id:"step-44-show-error-message-if-purchase-failed",level:2}];function o(e){const s={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:["Congratulations! You've successfully ",(0,n.jsx)(s.a,{href:"ff-add-variables-to-paywalls",children:"set up your paywall to display product data from Adapty"}),", including the product title and price."]}),"\n",(0,n.jsx)(s.p,{children:"Now, let's move on to the final step \u2013 letting users make a purchase through the paywall."}),"\n",(0,n.jsx)(s.h2,{id:"step-41-enable-users-make-your-purchase",children:"Step 4.1. Enable users make your purchase"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:"Double-click the buy button on your paywall page."}),"\n"]}),"\n",(0,n.jsx)(i.A,{children:(0,n.jsx)("img",{src:t(15297).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,n.jsxs)(s.ol,{start:"2",children:["\n",(0,n.jsxs)(s.li,{children:["In the right panel, open the ",(0,n.jsx)(s.strong,{children:"Actions"})," section if it's not already open."]}),"\n"]}),"\n",(0,n.jsx)(i.A,{children:(0,n.jsx)("img",{src:t(2099).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,n.jsxs)(s.ol,{start:"3",children:["\n",(0,n.jsxs)(s.li,{children:["Open the ",(0,n.jsx)(s.strong,{children:"Action Flow Editor"}),"."]}),"\n"]}),"\n",(0,n.jsx)(i.A,{children:(0,n.jsx)("img",{src:t(70852).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,n.jsxs)(s.ol,{start:"4",children:["\n",(0,n.jsxs)(s.li,{children:["In the ",(0,n.jsx)(s.strong,{children:"Select Action Trigger"})," window, choose ",(0,n.jsx)(s.strong,{children:"On Tap"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:["In the ",(0,n.jsx)(s.strong,{children:"No Actions Created"})," window, click the ",(0,n.jsx)(s.strong,{children:"Add Action"})," button."]}),"\n",(0,n.jsxs)(s.li,{children:["In the ",(0,n.jsx)(s.strong,{children:"Actions Flow Editor"})," window, search for ",(0,n.jsx)(s.code,{children:"makePurchase"})," custom action and choose it."]}),"\n"]}),"\n",(0,n.jsx)(i.A,{children:(0,n.jsx)("img",{src:t(24390).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,n.jsxs)(s.ol,{start:"7",children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["In the ",(0,n.jsx)(s.strong,{children:"Set Actions Arguments"})," section, choose ",(0,n.jsx)(s.code,{children:"getPaywallProductsResult"})," variable created earlier."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:"Fill in the fields as follows:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Parameter"}),(0,n.jsx)(s.th,{children:"Value"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Available Options"}),(0,n.jsx)(s.td,{children:"Data Structure Field"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Select Field"}),(0,n.jsx)(s.td,{children:"value"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Available Options"}),(0,n.jsx)(s.td,{children:"Item is Index"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"List Index Options"}),(0,n.jsx)(s.td,{children:"First"})]})]})]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["Click the ",(0,n.jsx)(s.strong,{children:"Confirm"})," button."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["In the ",(0,n.jsx)(s.strong,{children:"Action Output Variable Name"}),", create a new variable and name it ",(0,n.jsx)(s.code,{children:"makePurchaseResult"})," - this will be used later to confirm the purchase was successful."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(i.A,{children:(0,n.jsx)("img",{src:t(13664).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,n.jsx)(s.h2,{id:"step-42-check-if-the-purchase-was-successful",children:"Step 4.2. Check if the purchase was successful"}),"\n",(0,n.jsx)(s.p,{children:"Now, let's set up a check to see if the purchase went through."}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["Click the ",(0,n.jsx)(s.strong,{children:"plus (+)"})," button and click ",(0,n.jsx)(s.strong,{children:"Add Conditional"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["In the ",(0,n.jsx)(s.strong,{children:"Set Condition for Action"})," section, select the ",(0,n.jsx)(s.code,{children:"makePurchaseResult"})," variable."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["In the ",(0,n.jsx)(s.strong,{children:"Set Variable"})," window, fill in the fields as follows:"]}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Parameter"}),(0,n.jsx)(s.th,{children:"Value"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Available Options"}),(0,n.jsx)(s.td,{children:"Has Field"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Select Field"}),(0,n.jsx)(s.td,{children:"profile"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(i.A,{children:(0,n.jsx)("img",{src:t(23043).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,n.jsxs)(s.ol,{start:"4",children:["\n",(0,n.jsxs)(s.li,{children:["Click the ",(0,n.jsx)(s.strong,{children:"Confirm"})," button."]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"step-43-open-paid-content",children:"Step 4.3. Open paid content"}),"\n",(0,n.jsx)(s.p,{children:"If the purchase is successful, you can unlock the paid content. Here\u2019s how to set that up:"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["Click the ",(0,n.jsx)(s.strong,{children:"plus (+)"})," button under the ",(0,n.jsx)(s.strong,{children:"TRUE"})," label and click ",(0,n.jsx)(s.strong,{children:"Add Action"}),"."]}),"\n",(0,n.jsxs)(s.li,{children:["In the ",(0,n.jsx)(s.strong,{children:"Select Action"})," field, search for and select the page you want to open from the ",(0,n.jsx)(s.strong,{children:"Navigate To"})," list. In this example, the page is ",(0,n.jsx)(s.strong,{children:"YogaClessSession"}),"."]}),"\n"]}),"\n",(0,n.jsx)(i.A,{children:(0,n.jsx)("img",{src:t(34437).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,n.jsx)(s.h2,{id:"step-44-show-error-message-if-purchase-failed",children:"Step 4.4 Show error message if purchase failed"}),"\n",(0,n.jsx)(s.p,{children:"If the purchase fails, let's display an alert to the user."}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["Add an ",(0,n.jsx)(s.strong,{children:"Informational Dialog"})," action to the ",(0,n.jsx)(s.strong,{children:"FALSE"})," label."]}),"\n",(0,n.jsxs)(s.li,{children:["In the ",(0,n.jsx)(s.strong,{children:"Title"})," field, enter the text you want for the dialog title, such as ",(0,n.jsx)(s.strong,{children:"Purchase Failed"}),"."]}),"\n"]}),"\n",(0,n.jsx)(i.A,{children:(0,n.jsx)("img",{src:t(34911).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,n.jsxs)(s.ol,{start:"3",children:["\n",(0,n.jsxs)(s.li,{children:["Click at the ",(0,n.jsx)(s.strong,{children:"Value"})," button of the ",(0,n.jsx)(s.strong,{children:"Message"})," box."]}),"\n"]}),"\n",(0,n.jsx)(i.A,{children:(0,n.jsx)("img",{src:t(65358).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,n.jsxs)(s.ol,{start:"4",children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:"Fill in the fields as follows:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Parameter"}),(0,n.jsx)(s.th,{children:"Value"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Set Variable"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"makePurchaseResult"})," variable we've created"]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Available Options"}),(0,n.jsx)(s.td,{children:"Data Structure Field"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Select Field"}),(0,n.jsx)(s.td,{children:"error"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Available Options"}),(0,n.jsx)(s.td,{children:"Data Structure Field"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Select Field"}),(0,n.jsx)(s.td,{children:"errorMessage"})]})]})]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["Click the ",(0,n.jsx)(s.strong,{children:"Confirm"})," button."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["Add a ",(0,n.jsx)(s.strong,{children:"Terminate action"})," to the  ",(0,n.jsx)(s.strong,{children:"FALSE"})," flow."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(i.A,{children:(0,n.jsx)("img",{src:t(79827).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,n.jsxs)(s.ol,{start:"7",children:["\n",(0,n.jsxs)(s.li,{children:["Finally, click the ",(0,n.jsx)(s.strong,{children:"Close"})," button in the top-right corner."]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["Congratulations! Your users can now purchase your products. As an extra step, let's ",(0,n.jsx)(s.a,{href:"ff-check-subscription-status",children:"set up a check for user access to paid content"})," elsewhere to decide whether to display paid content or the paywall to them."]})]})}function p(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},65358:(e,s,t)=>{t.d(s,{A:()=>n});const n=t.p+"assets/images/makePurchase-error-bce98c58fa17747da6402e5825873509.webp"},70852:(e,s,t)=>{t.d(s,{A:()=>n});const n=t.p+"assets/images/new-editor-fb7a1f46b57fa9e64408a216eef8a03a.webp"},79827:(e,s,t)=>{t.d(s,{A:()=>n});const n=t.p+"assets/images/makePurchaseFinal-043c21aaa90ec15e533e21ea6e781367.webp"}}]);