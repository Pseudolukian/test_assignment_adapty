"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[230],{6126:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>o,toc:()=>d});var i=n(74848),t=n(28453),r=n(34028);n(26393);const c={title:"Event flows",description:"Discover detailed schemes of subscription event flows in Adapty. Learn how subscription events are generated and sent to integrations, helping you track key moments in your customers\u2019 journeys.",metadataTitle:"Understanding Event Flows in Adapty: Schemes and Scenarios"},l=void 0,o={id:"event-flows",title:"Event flows",description:"Discover detailed schemes of subscription event flows in Adapty. Learn how subscription events are generated and sent to integrations, helping you track key moments in your customers\u2019 journeys.",source:"@site/versioned_docs/version-3.0/event-flows.md",sourceDirName:".",slug:"/event-flows",permalink:"/docs/event-flows",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Event flows",description:"Discover detailed schemes of subscription event flows in Adapty. Learn how subscription events are generated and sent to integrations, helping you track key moments in your customers\u2019 journeys.",metadataTitle:"Understanding Event Flows in Adapty: Schemes and Scenarios"},sidebar:"tutorialSidebar",previous:{title:"Events to send to third-party integrations",permalink:"/docs/events"},next:{title:"Event statuses",permalink:"/docs/event-statuses"}},a={},d=[{value:"Subscription Lifecycle",id:"subscription-lifecycle",level:2},{value:"Initial Purchase Flow",id:"initial-purchase-flow",level:3},{value:"Subscription Cancellation Flow",id:"subscription-cancellation-flow",level:3},{value:"Subscription Reactivation Flow",id:"subscription-reactivation-flow",level:3},{value:"Subscription Pause Flow (Android only)",id:"subscription-pause-flow-android-only",level:3},{value:"Trial Flows",id:"trial-flows",level:2},{value:"Trial with Successful Conversion Flow",id:"trial-with-successful-conversion-flow",level:3},{value:"Trial without Successful Conversion Flow",id:"trial-without-successful-conversion-flow",level:3},{value:"Subscription Reactivation after Expired Trial Flow",id:"subscription-reactivation-after-expired-trial-flow",level:3},{value:"Product Changes",id:"product-changes",level:2},{value:"Immediate Product Change Flow",id:"immediate-product-change-flow",level:3},{value:"Delayed Product Change Flow",id:"delayed-product-change-flow",level:3},{value:"Billing Issue Outcome Flow",id:"billing-issue-outcome-flow",level:2},{value:"Sharing Purchases Across User Accounts Flows",id:"sharing-purchases-across-user-accounts-flows",level:2},{value:"Transfer Access to New User Flow",id:"transfer-access-to-new-user-flow",level:3},{value:"Shared Access Between Users Flow",id:"shared-access-between-users-flow",level:3},{value:"Access Not Shared Between Users Flow",id:"access-not-shared-between-users-flow",level:3}];function h(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.p,{children:"In Adapty, you'll receive various subscription events throughout a customer\u2019s journey in your app. These subscription flows outline common scenarios to help you understand the events that Adapty generates as users subscribe, cancel, or reactivate subscriptions."}),"\n",(0,i.jsx)(s.p,{children:"Keep in mind that Apple processes subscription payments several hours before the actual start/ renewal time. In the flows below, we show both the subscription start/ renewal and the charge happening at the same time to keep the diagrams clear."}),"\n",(0,i.jsxs)(s.p,{children:["Also, events related to the same action occur simultaneously and may appear in your ",(0,i.jsx)(s.strong,{children:"Event Feed"})," in any order, which might differ from the sequence shown in our diagrams."]}),"\n",(0,i.jsx)(s.h2,{id:"subscription-lifecycle",children:"Subscription Lifecycle"}),"\n",(0,i.jsx)(s.h3,{id:"initial-purchase-flow",children:"Initial Purchase Flow"}),"\n",(0,i.jsx)(s.p,{children:"This flow happens when a customer buys a subscription for the first time without a trial. In this situation, the following events are created:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.strong,{children:"Subscription started"})}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Access level updated"})," to grant access to the user"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"When the subscription renewal date comes, the subscription is renewed. In this case, the following events are created:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Subscription renewal"})," to start a new period of the subscription"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Access level updated"})," to update the subscription expiration date, extending access for another period"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Situations when the payment is not successful or when the user cancels the renewal are described in ",(0,i.jsx)(s.a,{href:"event-flows#billing-issue-outcome-flow",children:"Billing Issue Outcome Flow"})," and ",(0,i.jsx)(s.a,{href:"event-flows#subscription-cancellation-flow",children:"Subscription Cancellation Flow"})," ,respectively."]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(86482).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(s.h3,{id:"subscription-cancellation-flow",children:"Subscription Cancellation Flow"}),"\n",(0,i.jsx)(s.p,{children:"When a user cancels their subscription, the following events are created:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Subscription renewal canceled"})," to indicate that the subscription remains active until the end of the current period, after which the user will lose access"]}),"\n",(0,i.jsxs)(s.li,{children:["The ",(0,i.jsx)(s.strong,{children:"Access level updated"})," event is created to disable auto-renewal for the access"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Once the subscription ends, the ",(0,i.jsx)(s.strong,{children:"Subscription expired (churned)"})," event is triggered to to mark the end of the subscription."]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(66281).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsxs)(s.p,{children:["If a refund is approved, the following event replaces ",(0,i.jsx)(s.strong,{children:"Subscription expired (churned)"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Subscription refunded"})," to end the subscription and provide details about the refund"]}),"\n"]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(31465).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(s.p,{children:"For Stripe, a subscription can be canceled immediately, skipping the remaining period. In this case, all events are created simultaneously:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.strong,{children:"Subscription renewal cancelled"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.strong,{children:"Subscription expired (churned)"})}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Access Level updated"})," to remove the user\u2019s access"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["If a refund is approved, a ",(0,i.jsx)(s.strong,{children:"Subscription refunded"})," event is also triggered when it\u2019s approved."]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(47083).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(s.h3,{id:"subscription-reactivation-flow",children:"Subscription Reactivation Flow"}),"\n",(0,i.jsxs)(s.p,{children:["If a user cancels a subscription, it expires, and they later repurchase the same subscription, a ",(0,i.jsx)(s.strong,{children:"Subscription renewed"})," event will be created. Even if there\u2019s a gap in access, Adapty treats this as a single transaction chain, linked by the ",(0,i.jsx)(s.code,{children:"vendor_original_transaction_id"}),". So, the repurchase is considered a renewal."]}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.strong,{children:"Access level updated"})," events will be created twice:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"at the subscription end to revoke the user's access"}),"\n",(0,i.jsx)(s.li,{children:"at the subscription repurchase to grant access"}),"\n"]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(88868).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(s.h3,{id:"subscription-pause-flow-android-only",children:"Subscription Pause Flow (Android only)"}),"\n",(0,i.jsx)(s.p,{children:"This flow applies when a user pauses and later resumes a subscription on Android. Pausing a subscription is not an immediate action. Even if the user pauses it during an active subscription period, the subscription will remain active, and the user will retain access until the end of that period."}),"\n",(0,i.jsx)(s.p,{children:"The subscription is officially paused at the end of the subscription period. At this point, the user loses access and remains without it until they choose to resume the subscription."}),"\n",(0,i.jsx)(s.p,{children:"No events are triggered when the user pauses the subscription. However, the following events are created at the end of the subscription period:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.strong,{children:"Subscription paused (Android only)"})}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Access level updated"})," to revoke the user's access"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"When the user resumes the subscription, the following events are triggered:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.strong,{children:"Subscription renewed"})}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Access level updated"})," to restore the user's access"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["These subscriptions will belong to the same transaction chain, linked with the same ",(0,i.jsx)(s.strong,{children:"vendor_original_transaction_id"}),"."]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(17046).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(s.h2,{id:"trial-flows",children:"Trial Flows"}),"\n",(0,i.jsx)(s.p,{children:"If you use trials in your app, you\u2019ll receive additional trial-related events."}),"\n",(0,i.jsx)(s.h3,{id:"trial-with-successful-conversion-flow",children:"Trial with Successful Conversion Flow"}),"\n",(0,i.jsx)(s.p,{children:"The most common flow occurs when a user starts a trial, provides a credit card, and successfully converts to a standard subscription at the end of the trial period. In this situation, the following events are created at the moment of teh trial start:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Trial started"})," to mark the trial start"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Access level updated"})," to grant access"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.strong,{children:"Trial converted"})," event is created when the standard subscription starts."]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(77207).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(s.h3,{id:"trial-without-successful-conversion-flow",children:"Trial without Successful Conversion Flow"}),"\n",(0,i.jsx)(s.p,{children:"If a user cancels the trial before it converts to a subscription, the following events are created at the time of cancellation:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Trial renewal cancelled"})," to disable automatic conversion of the trial to a subscription"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Access level updated"})," to disable access renewal"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["The user will have access until the end of the trial when the ",(0,i.jsx)(s.strong,{children:"Trial expired"})," event is created to mark the trial's end."]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(90901).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(s.h3,{id:"subscription-reactivation-after-expired-trial-flow",children:"Subscription Reactivation after Expired Trial Flow"}),"\n",(0,i.jsx)(s.p,{children:"If a trial expires (due to a billing issue or cancellation) and the user later buys a subscription, the following events are created:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Access level updated"})," to grant access to the user"]}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.strong,{children:"Trial converted"})}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Even with a gap between the trial and subscription, Adapty links the two using ",(0,i.jsx)(s.code,{children:"vendor_original_transaction_id"}),". This conversion is treated as part of a continuous transaction chain, starting with a zero-price trial. That is why the ",(0,i.jsx)(s.strong,{children:"Trial converted"})," event is created rather than the ",(0,i.jsx)(s.strong,{children:"Subscription started"}),"."]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(8035).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(s.h2,{id:"product-changes",children:"Product Changes"}),"\n",(0,i.jsx)(s.p,{children:"This section covers any adjustments made to active subscriptions, such as upgrades, downgrades or purchases of a product from another group."}),"\n",(0,i.jsx)(s.h3,{id:"immediate-product-change-flow",children:"Immediate Product Change Flow"}),"\n",(0,i.jsx)(s.p,{children:"After a user changes a product, it can be changed in the system immediately before the subscription ends (mostly in case of an upgrade or replacement of a product). In this case, at the moment of the product change:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["The access level is changed, and two ",(0,i.jsx)(s.strong,{children:"Access level updated"})," events are created:","\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"to remove the access to the first product."}),"\n",(0,i.jsx)(s.li,{children:"to give access to the second product."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["The old subscription ends, and a refund is paid (the ",(0,i.jsx)(s.strong,{children:"Subscription refunded"})," event is created with the ",(0,i.jsx)(s.code,{children:"cancellation_reason"})," = ",(0,i.jsx)(s.code,{children:"upgraded"}),"). Please note that no ",(0,i.jsx)(s.strong,{children:"Subscription expired (churned)"})," event is created; the ",(0,i.jsx)(s.strong,{children:"Subscription refunded"})," event replaces it."]}),"\n",(0,i.jsxs)(s.li,{children:["The new subscription starts (the ",(0,i.jsx)(s.strong,{children:"Subscription started"})," event is created for the new product)."]}),"\n"]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(74297).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsxs)(s.p,{children:["If a user downgrades the subscription, the first subscription will last till the end of the paid period, and when the subscription ends, it will be replaced with a new, lower-tier subscription. In this situation, only the ",(0,i.jsx)(s.strong,{children:"Access level updated"})," event to disable access autorenewal will be created at once. All other events will be created at the moment of the subscription's actual replacement:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Another ",(0,i.jsx)(s.strong,{children:"Access level updated"})," event is created to give access to the second product."]}),"\n",(0,i.jsxs)(s.li,{children:["The ",(0,i.jsx)(s.strong,{children:"Subscription expired (churned)"})," event is created to end the subscription for the first product."]}),"\n",(0,i.jsxs)(s.li,{children:["The ",(0,i.jsx)(s.strong,{children:"Subscription started"})," event is created to start a new subscription for the new product."]}),"\n"]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(60072).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(s.h3,{id:"delayed-product-change-flow",children:"Delayed Product Change Flow"}),"\n",(0,i.jsxs)(s.p,{children:["There is also a variant when a user changes the product at the moment of the subscription renewal. This variant is very similar to the previous one: one ",(0,i.jsx)(s.strong,{children:"Access level updated"})," event will be created at once to disable access autorenewal for the old product. All other events will be created at the moment when the user changes the subscription and it is  changed in the system:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Another ",(0,i.jsx)(s.strong,{children:"Access level updated"})," event is created to give access to the second product."]}),"\n",(0,i.jsxs)(s.li,{children:["The ",(0,i.jsx)(s.strong,{children:"Subscription expired (churned)"})," event is created to end the subscription for the first product."]}),"\n",(0,i.jsxs)(s.li,{children:["The ",(0,i.jsx)(s.strong,{children:"Subscription started"})," event is created to start a new subscription for the new product."]}),"\n"]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(26551).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(s.h2,{id:"billing-issue-outcome-flow",children:"Billing Issue Outcome Flow"}),"\n",(0,i.jsx)(s.p,{children:"If attempts to convert a trial or renew a subscription fail due to a billing issue, what happens next depends on whether a grace period is enabled."}),"\n",(0,i.jsx)(s.p,{children:"With a grace period, if the payment succeeds, the trial converts or the subscription renews. If it fails, the app store will continue to attemp to charge the user for the subscription and if still fails, the app store will end the trial or subscription itself."}),"\n",(0,i.jsx)(s.p,{children:"Therefore, at the moment of the billing issue, the following events are created in Adapty:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.strong,{children:"Billing issue detected"})}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Entered grace period"})," (if the grace period is enabled)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Access level updated"})," to provide the access till the end of the grace period"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["If the payment succeeds later, Adapty records a ",(0,i.jsx)(s.strong,{children:"Trial converted"})," or ",(0,i.jsx)(s.strong,{children:"Subscription renewed"})," event, and the user does not lose access."]}),"\n",(0,i.jsx)(s.p,{children:"If the payment ultimately fails and the app store cancels the subscription, Adapty generates these events:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Trial expired"})," or ",(0,i.jsx)(s.strong,{children:"Subscription expired (churned)"})," with ",(0,i.jsx)(s.code,{children:"cancellation_reason: billing_error"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Access level updated"})," to revoke the user's access"]}),"\n"]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(79736).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(s.p,{children:"Without a grace period, the Billing Retry Period (the period when the app store continues to attempt to charge the user) starts immediately."}),"\n",(0,i.jsx)(s.p,{children:"If the payment never succeeds till the end of the grace period, the flow is the same: the same events are created when the app store ends the subscription automatically:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Trial expired"})," or ",(0,i.jsx)(s.strong,{children:"Subscription expired (churned)"})," event with a ",(0,i.jsx)(s.code,{children:"cancellation_reason"})," of ",(0,i.jsx)(s.code,{children:"billing_error"})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Access level updated"})," to revoke the user's access"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(26918).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(s.h2,{id:"sharing-purchases-across-user-accounts-flows",children:"Sharing Purchases Across User Accounts Flows"}),"\n",(0,i.jsxs)(s.p,{children:["When a ",(0,i.jsx)(s.a,{href:"identifying-users#setting-customer-user-id-on-configuration",children:"Customer User ID"})," attempts to restore or extend a subscription already tied to a different ",(0,i.jsx)(s.a,{href:"identifying-users#setting-customer-user-id-on-configuration",children:"Customer User ID"}),", Adapty\u2019s ",(0,i.jsx)(s.strong,{children:"Sharing paid access between user accounts"})," setting controls how access is managed. The flow will vary depending on the selected option."]}),"\n",(0,i.jsx)(s.h3,{id:"transfer-access-to-new-user-flow",children:"Transfer Access to New User Flow"}),"\n",(0,i.jsxs)(s.p,{children:["The recommended option is to transfer the access level to the new user. This preserves the original user\u2019s transaction history for consistent analytics. Only 2 ",(0,i.jsx)(s.strong,{children:"Access level updated"})," events will be created:"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"to remove the first user's access"}),"\n",(0,i.jsx)(s.li,{children:"to give access to the second user"}),"\n"]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(44763).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(s.p,{children:"Here\u2019s a breakdown of the fields related to access level assignment and transferring in the events generated in this scenario:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"User A: Access level updated (sent when User A purchases a subscription in the app)"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "profile_id": "00000000-0000-0000-0000-000000000000",\n  "customer_user_id": UserA,\n  "event_properties": {\n    "profile_has_access_level": true,\n  },\n  "profiles_sharing_access_level": null\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"User A: Access level updated (sent when the app is reinstalled and User B logs in, revoking User A's access)"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "profile_id": "00000000-0000-0000-0000-000000000000",\n  "customer_user_id": UserA,\n  "event_properties": {\n    "profile_has_access_level": false,\n  },\n  "profiles_sharing_access_level": null\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"User B: Access level updated (sent when User B logs in and access is granted)"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "profile_id": "00000000-0000-0000-0000-000000000001",\n  "customer_user_id": UserB,\n  "event_properties": {\n    "profile_has_access_level": true,\n  },\n  "profiles_sharing_access_level": null\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"shared-access-between-users-flow",children:"Shared Access Between Users Flow"}),"\n",(0,i.jsxs)(s.p,{children:["This option allows multiple users to share the same access level if their device is signed in to the same Apple/Google ID. This is useful when a user reinstalls the app and logs in with a different email \u2014 they\u2019ll still have access to their previous purchase. With this option, multiple identified users can share the same access level. While the access level is shared, all transactions are logged under the original ",(0,i.jsx)(s.a,{href:"identifying-users#setting-customer-user-id-on-configuration",children:"Customer User ID"})," to maintain complete transaction history and analytics."]}),"\n",(0,i.jsxs)(s.p,{children:["Therefore, only 1 event will be created: ",(0,i.jsx)(s.strong,{children:"Access level updated"})," to grant access to the second user."]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(6394).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(s.p,{children:"Here\u2019s a breakdown of the fields related to access level assignment and sharing in the events generated in this scenario:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"User B: Access level updated (sent when User B logs in and access is granted)"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "profile_id": "00000000-0000-0000-0000-000000000000",\n  "customer_user_id": UserA,\n  "event_properties": {\n    "profile_has_access_level": true,\n  },\n  "profiles_sharing_access_level": [\n    {\n      "profile_id": "00000000-0000-0000-0000-000000000001,\n      "customer_user_id": UserB\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(s.h3,{id:"access-not-shared-between-users-flow",children:"Access Not Shared Between Users Flow"}),"\n",(0,i.jsxs)(s.p,{children:["With this option, only the first user profile to receive the access level retains it permanently. This is ideal if purchases need to be tied to a single ",(0,i.jsx)(s.a,{href:"identifying-users#setting-customer-user-id-on-configuration",children:"Customer User ID"}),"."]}),"\n",(0,i.jsx)(r.A,{children:(0,i.jsx)("img",{src:n(50635).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})})]})}function u(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},6394:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Share_Access_Between_Users_Flow-e35d834dcd741e457e31e031e6fdc715.webp"},8035:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Subscription_Reactivation_Flow_after_Expired_Trial-1debe93484cac48e0a9ad5a08826069d.webp"},17046:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Subscription_Paused_Flow-4346847958c7823eabfffce29441986d.webp"},26551:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Product_Change_on_Renewal_Flow-121b935fd83fa971727ee082edcf5691.webp"},26918:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Billing_Issue_Outcome_Flow_without_Grace_Period-6b7c1839887169b2c1c7a2a67ef1b0fe.webp"},31465:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Subscription_Cancellation_Flow_with_a_Refund-0e2aecc2a6fb06fbef1e46a94fff5968.webp"},44763:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Transfer_Access_to_New_User_Flow-3db14dc173936079a51eebf6f5628db3.webp"},47083:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Subscription_Immediate_Cancellation_Flow-7434fec69bb848f34106beb63ad7fbab.webp"},50635:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Share_Access_Between_Users_Disabled_Flow-e6bc46f9374842e6c45c1de9d4fdc62c.webp"},60072:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Delayed_Product_Change_Downgrade-71c6a821449e2e81d9a06e081c03b5c9.webp"},66281:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Subscription_Cancellation_Flow-b75753defb46b5e8a7e2de67ab61830f.webp"},74297:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Immediate_Product_Change_Flow_Upgrade-fc6baa3ea12bc1d3417a98fc945d5ec4.webp"},77207:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Trial_Flow_with_Successful_Conversion-aa0a318748209ebd41cb19854ed52894.webp"},79736:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Billing_Issue_Outcome_Flow_with_Grace_Period-bb548797868d62a8a7b7ab9b25bfd765.webp"},86482:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Initial_Purchase_Flow-e335340951d88728d7b67f3d80c30ff1.webp"},88868:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Subscription_Rejoin_Flow-a8c61acb0fc52e1c46ec17a823b50854.webp"},90901:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/Trial_Flow_without_Successful_Conversion-60b49681e9d3f82e41470ab56a6b410c.webp"}}]);