"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[9956],{11470:(e,t,n)=>{n.d(t,{A:()=>b});var l=n(96540),a=n(34164),s=n(23104),r=n(56347),i=n(205),o=n(57485),d=n(31682),c=n(70679);function u(e){return l.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,l.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:t,children:n}=e;return(0,l.useMemo)((()=>{const e=t??function(e){return u(e).map((e=>{let{props:{value:t,label:n,attributes:l,default:a}}=e;return{value:t,label:n,attributes:l,default:a}}))}(n);return function(e){const t=(0,d.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function y(e){let{queryString:t=!1,groupId:n}=e;const a=(0,r.W6)(),s=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,o.aZ)(s),(0,l.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(a.location.search);t.set(s,e),a.replace({...a.location,search:t.toString()})}),[s,a])]}function w(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,s=p(e),[r,o]=(0,l.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const l=n.find((e=>e.default))??n[0];if(!l)throw new Error("Unexpected error: 0 tabValues");return l.value}({defaultValue:t,tabValues:s}))),[d,u]=y({queryString:n,groupId:a}),[w,f]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,s]=(0,c.Dv)(n);return[a,(0,l.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:a}),g=(()=>{const e=d??w;return h({value:e,tabValues:s})?e:null})();(0,i.A)((()=>{g&&o(g)}),[g]);return{selectedValue:r,selectValue:(0,l.useCallback)((e=>{if(!h({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),f(e)}),[u,f,s]),tabValues:s}}var f=n(92303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=n(74848);function m(e){let{className:t,block:n,selectedValue:l,selectValue:r,tabValues:i}=e;const o=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.a_)(),c=e=>{const t=e.currentTarget,n=o.indexOf(t),a=i[n].value;a!==l&&(d(t),r(a))},u=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=o.indexOf(e.currentTarget)+1;t=o[n]??o[0];break}case"ArrowLeft":{const n=o.indexOf(e.currentTarget)-1;t=o[n]??o[o.length-1];break}}t?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":n},t),children:i.map((e=>{let{value:t,label:n,attributes:s}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,ref:e=>o.push(e),onKeyDown:u,onClick:c,...s,className:(0,a.A)("tabs__item",g.tabItem,s?.className,{"tabs__item--active":l===t}),children:n??t},t)}))})}function v(e){let{lazy:t,children:n,selectedValue:a}=e;const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=s.find((e=>e.props.value===a));return e?(0,l.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map(((e,t)=>(0,l.cloneElement)(e,{key:t,hidden:e.props.value!==a})))})}function j(e){const t=w(e);return(0,x.jsxs)("div",{className:(0,a.A)("tabs-container",g.tabList),children:[(0,x.jsx)(m,{...t,...e}),(0,x.jsx)(v,{...t,...e})]})}function b(e){const t=(0,f.A)();return(0,x.jsx)(j,{...e,children:u(e.children)},String(t))}},19365:(e,t,n)=>{n.d(t,{A:()=>r});n(96540);var l=n(34164);const a={tabItem:"tabItem_Ymn6"};var s=n(74848);function r(e){let{children:t,hidden:n,className:r}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,l.A)(a.tabItem,r),hidden:n,children:t})}},49179:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>u});var l=n(74848),a=n(28453),s=n(11470),r=n(19365);const i={title:"Android - Present legacy Paywall Builder paywalls",description:"Present paywalls in Android (Legacy) and manage subscriptions effectively.",metadataTitle:"Presenting Paywalls on Android (Legacy) | Adapty Docs"},o=void 0,d={id:"android-present-paywalls-legacy",title:"Android - Present legacy Paywall Builder paywalls",description:"Present paywalls in Android (Legacy) and manage subscriptions effectively.",source:"@site/versioned_docs/version-3.0/android-present-paywalls-legacy.md",sourceDirName:".",slug:"/android-present-paywalls-legacy",permalink:"/docs/android-present-paywalls-legacy",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Android - Present legacy Paywall Builder paywalls",description:"Present paywalls in Android (Legacy) and manage subscriptions effectively.",metadataTitle:"Presenting Paywalls on Android (Legacy) | Adapty Docs"},sidebar:"tutorialSidebar",previous:{title:"iOS",permalink:"/docs/ios-present-paywalls-legacy"},next:{title:"Flutter",permalink:"/docs/flutter-present-paywalls-legacy"}},c={},u=[];function p(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.p,{children:"If you've customized a paywall using the Paywall Builder, you don't need to worry about rendering it in your mobile app code to display it to the user. Such a paywall contains both what should be shown within the paywall and how it should be shown."}),"\n",(0,l.jsxs)(t.admonition,{type:"warning",children:[(0,l.jsxs)(t.p,{children:["This guide covers the process for ",(0,l.jsx)(t.strong,{children:"legacy Paywall Builder paywalls"})," only which requires SDK v2.x or earlier. The process for presenting paywalls differs for paywalls designed with different versions of Paywall Builde, remote config paywalls, and ",(0,l.jsx)(t.a,{href:"observer-vs-full-mode",children:"Observer mode"}),"."]}),(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["For presenting ",(0,l.jsx)(t.strong,{children:"New Paywall Builder paywalls"}),", check out ",(0,l.jsx)(t.a,{href:"android-present-paywalls",children:"Android - Present new Paywall Builder paywalls"}),"."]}),"\n",(0,l.jsxs)(t.li,{children:["For presenting ",(0,l.jsx)(t.strong,{children:"Remote config paywalls"}),", see ",(0,l.jsx)(t.a,{href:"present-remote-config-paywalls",children:"Render paywall designed by remote config"}),"."]}),"\n",(0,l.jsxs)(t.li,{children:["For presenting ",(0,l.jsx)(t.strong,{children:"Observer mode paywalls"}),", see ",(0,l.jsx)(t.a,{href:"android-present-paywall-builder-paywalls-in-observer-mode",children:"Android - Present Paywall Builder paywalls in Observer mode"})]}),"\n"]})]}),"\n",(0,l.jsxs)(t.p,{children:["In order to display the visual paywall on the device screen, you must first configure it. To do this, call the method ",(0,l.jsx)(t.code,{children:"AdaptyUI.getPaywallView()"})," or create the ",(0,l.jsx)(t.code,{children:"AdaptyPaywallView"})," directly:"]}),"\n",(0,l.jsxs)(s.A,{groupId:"current-os",queryString:!0,children:[(0,l.jsx)(r.A,{value:"kotlin",label:"Kotlin",default:!0,children:(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-kotlin",metastring:"showLineNumbers",children:"   val paywallView = AdaptyUI.getPaywallView(\n       activity,\n       viewConfiguration,\n       products,\n       AdaptyPaywallInsets.of(topInset, bottomInset),\n       eventListener,\n       personalizedOfferResolver,\n       tagResolver,\n   )\n\n   //======= OR =======\n\n   val paywallView =\n        AdaptyPaywallView(activity) // or retrieve it from xml\n   ...\n   with(paywallView) {\n       setEventListener(eventListener)\n       setObserverModeHandler(observerModeHandler)\n       showPaywall(\n           viewConfiguration,\n           products,\n           AdaptyPaywallInsets.of(topInset, bottomInset),\n           personalizedOfferResolver,\n           tagResolver,\n       )\n   }\n"})})}),(0,l.jsx)(r.A,{value:"java",label:"Java",default:!0,children:(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-java",metastring:"showLineNumbers",children:"AdaptyPaywallView paywallView = AdaptyUI.getPaywallView(\n        activity,\n        viewConfiguration,\n        products,\n        AdaptyPaywallInsets.of(topInset, bottomInset),\n        eventListener,\n        personalizedOfferResolver,\n        tagResolver\n);\n\n//======= OR =======\n\nAdaptyPaywallView paywallView =\n  new AdaptyPaywallView(activity); //add to the view hierarchy if needed, or you receive it from xml\n...\npaywallView.setEventListener(eventListener);\npaywallView.showPaywall(viewConfiguration, products, AdaptyPaywallInsets.of(topInset, bottomInset), personalizedOfferResolver);\n"})})}),(0,l.jsx)(r.A,{value:"XML",label:"XML",default:!0,children:(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-xml",metastring:"showLineNumbers",children:'<com.adapty.ui.AdaptyPaywallView xmlns:android="http://schemas.android.com/apk/res/android"\n    android:layout_width="match_parent"\n    android:layout_height="match_parent" />\n'})})})]}),"\n",(0,l.jsx)(t.p,{children:"After the view has been successfully created, you can add it to the view hierarchy and display it on the screen of the device."}),"\n",(0,l.jsxs)(t.p,{children:["If you get ",(0,l.jsx)(t.code,{children:"AdaptyPaywallView"})," ",(0,l.jsx)(t.em,{children:"not"})," by calling ",(0,l.jsx)(t.code,{children:"AdaptyUI.getPaywallView()"}),", you will also need to call ",(0,l.jsx)(t.code,{children:".setEventListener()"})," and ",(0,l.jsx)(t.code,{children:".showPaywall()"})," methods."]}),"\n",(0,l.jsx)(t.p,{children:"Request parameters:"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Presence"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"Paywall"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"required"}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["Specify an ",(0,l.jsx)(t.code,{children:"AdaptyPaywall"})," object, for which you are trying to get a screen representation."]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"Products"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"optional"}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["Provide an array of ",(0,l.jsx)(t.code,{children:"AdaptyPaywallProduct "}),"to optimize the display timing of products on the screen. If ",(0,l.jsx)(t.code,{children:"null"})," is passed, AdaptyUI will automatically fetch the required products."]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"ViewConfiguration"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"required"}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["Supply an ",(0,l.jsx)(t.code,{children:"AdaptyViewConfiguration"})," object containing visual details of the paywall. Use the ",(0,l.jsx)(t.code,{children:"Adapty.getViewConfiguration(paywall)"})," method to load it. Refer to ",(0,l.jsx)(t.a,{href:"get-pb-paywalls#fetch-the-view-configuration-of-paywall-designed-using-paywall-builder",children:"Fetch the visual configuration of paywall"})," topic for more details."]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"Insets"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"required"}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["Define an ",(0,l.jsx)(t.code,{children:"AdaptyPaywallInsets"})," object containing information about the area overlapped by system bars, creating vertical margins for content. If neither the status bar nor the navigation bar overlaps the ",(0,l.jsx)(t.code,{children:"AdaptyPaywallView"}),", pass ",(0,l.jsx)(t.code,{children:"AdaptyPaywallInsets.NONE"}),". For fullscreen mode where system bars overlap part of your UI, obtain insets as shown under the table."]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"EventListener"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"optional"}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["Provide an ",(0,l.jsx)(t.code,{children:"AdaptyUiEventListener"})," to observe paywall events. Extending AdaptyUiDefaultEventListener is recommended for ease of use. Refer to ",(0,l.jsx)(t.a,{href:"android-handling-events",children:"Handling paywall events"}),"  topic for more details."]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"PersonalizedOfferResolver"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"optional"}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["To indicate personalized pricing (",(0,l.jsx)(t.a,{href:"https://developer.android.com/google/play/billing/integrate#personalized-price",children:"read more"}),"  ), implement ",(0,l.jsx)(t.code,{children:"AdaptyUiPersonalizedOfferResolver"}),"  and pass your own logic that maps ",(0,l.jsx)(t.code,{children:"AdaptyPaywallProduct"})," to true if the product's price is personalized, otherwise false."]})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.strong,{children:"TagResolver"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"optional"}),(0,l.jsxs)(t.td,{style:{textAlign:"left"},children:["Use ",(0,l.jsx)(t.code,{children:"AdaptyUiTagResolver"})," to resolve custom tags within the paywall text. This resolver takes a tag parameter and resolves it to a corresponding string. Refer to ",(0,l.jsx)(t.a,{href:"custom-tags-in-paywall-builder",children:"Custom tags in Paywall Builder"}),"  topic for more details."]})]})]})]}),"\n",(0,l.jsx)(t.p,{children:"For fullscreen mode where system bars overlap part of your UI, obtain insets in the following way:"}),"\n",(0,l.jsxs)(s.A,{groupId:"current-os",queryString:!0,children:[(0,l.jsx)(r.A,{value:"kotlin",label:"Kotlin",default:!0,children:(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-kotlin",metastring:"showLineNumbers",children:"import androidx.core.graphics.Insets\nimport androidx.core.view.ViewCompat\nimport androidx.core.view.WindowInsetsCompat\n\n//create extension function\nfun View.onReceiveSystemBarsInsets(action: (insets: Insets) -> Unit) {\n    ViewCompat.setOnApplyWindowInsetsListener(this) { _, insets ->\n        val systemBarInsets = insets.getInsets(WindowInsetsCompat.Type.systemBars())\n        ViewCompat.setOnApplyWindowInsetsListener(this, null)\n        action(systemBarInsets)\n        insets\n    }\n}\n//and then use it with the view\npaywallView.onReceiveSystemBarsInsets { insets ->\n    val paywallInsets = AdaptyPaywallInsets.of(insets.top, insets.bottom)\n    paywallView.showPaywall(paywall, products, viewConfig, paywallInsets, productTitleResolver)\n}\n"})})}),(0,l.jsx)(r.A,{value:"java",label:"Java",default:!0,children:(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-java",metastring:"showLineNumbers",children:"import androidx.core.graphics.Insets;\nimport androidx.core.view.ViewCompat;\nimport androidx.core.view.WindowInsetsCompat;\n\n...\n\nViewCompat.setOnApplyWindowInsetsListener(paywallView, (view, insets) -> {\n    Insets systemBarInsets = insets.getInsets(WindowInsetsCompat.Type.systemBars());\n    ViewCompat.setOnApplyWindowInsetsListener(paywallView, null);\n  \n    AdaptyPaywallInsets paywallInsets =\n                AdaptyPaywallInsets.of(systemBarInsets.top, systemBarInsets.bottom);\n    paywallView.showPaywall(paywall, products, viewConfiguration, paywallInsets, productTitleResolver);\n            \n    return insets;\n});\n"})})})]}),"\n",(0,l.jsx)(t.p,{children:"Returns:"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Object"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,l.jsx)(t.tbody,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"AdaptyPaywallView"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"object, representing the requested paywall screen."})]})})]}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.strong,{children:"Next step:"})}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"android-handling-events-legacy",children:"Handle paywall events"})}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(p,{...e})}):p(e)}}}]);