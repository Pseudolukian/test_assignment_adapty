"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[8068],{11470:(e,n,t)=>{t.d(n,{A:()=>j});var r=t(96540),s=t(34164),a=t(23104),i=t(56347),o=t(205),l=t(57485),d=t(31682),p=t(70679);function c(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return c(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:s}}=e;return{value:n,label:t,attributes:r,default:s}}))}(t);return function(e){const n=(0,d.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function h(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function y(e){let{queryString:n=!1,groupId:t}=e;const s=(0,i.W6)(),a=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l.aZ)(a),(0,r.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(s.location.search);n.set(a,e),s.replace({...s.location,search:n.toString()})}),[a,s])]}function f(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,a=u(e),[i,l]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:a}))),[d,c]=y({queryString:t,groupId:s}),[f,g]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[s,a]=(0,p.Dv)(t);return[s,(0,r.useCallback)((e=>{t&&a.set(e)}),[t,a])]}({groupId:s}),b=(()=>{const e=d??f;return h({value:e,tabValues:a})?e:null})();(0,o.A)((()=>{b&&l(b)}),[b]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!h({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);l(e),c(e),g(e)}),[c,g,a]),tabValues:a}}var g=t(92303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var m=t(74848);function x(e){let{className:n,block:t,selectedValue:r,selectValue:i,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:d}=(0,a.a_)(),p=e=>{const n=e.currentTarget,t=l.indexOf(n),s=o[t].value;s!==r&&(d(n),i(s))},c=e=>{let n=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,m.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":t},n),children:o.map((e=>{let{value:n,label:t,attributes:a}=e;return(0,m.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>l.push(e),onKeyDown:c,onClick:p,...a,className:(0,s.A)("tabs__item",b.tabItem,a?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function A(e){let{lazy:n,children:t,selectedValue:s}=e;const a=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,m.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function v(e){const n=f(e);return(0,m.jsxs)("div",{className:(0,s.A)("tabs-container",b.tabList),children:[(0,m.jsx)(x,{...n,...e}),(0,m.jsx)(A,{...n,...e})]})}function j(e){const n=(0,g.A)();return(0,m.jsx)(v,{...e,children:c(e.children)},String(n))}},19365:(e,n,t)=>{t.d(n,{A:()=>i});t(96540);var r=t(34164);const s={tabItem:"tabItem_Ymn6"};var a=t(74848);function i(e){let{children:n,hidden:t,className:i}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.A)(s.tabItem,i),hidden:t,children:n})}},28345:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/61bff5a-appsflyer_iOS_app_id-77d15b02624e85cf2c0b215b8541a146.webp"},39558:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/c2991f6-CleanShot_2023-08-04_at_16.29.202x-ccec79bd6d00381dd19c4c93b4b04c7f.webp"},51709:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/7934920-appsflyer_new_token-c6eaf8a2412d187abc588e2836f25d63.webp"},54455:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/a7d1c31-appsflyer_dev_keys-9b07781d779fb7f6019dbc66be5ea01e.webp"},66924:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/1c18c50-appsflyer_security_center-9c50d2e96b4f704032a6ec3892816f6a.webp"},68330:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/1b0c777-CleanShot_2023-08-11_at_14.56.362x-0b871a8a1df630a42f4deb5435e47325.webp"},87108:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>y,frontMatter:()=>l,metadata:()=>p,toc:()=>u});var r=t(74848),s=t(28453),a=t(34028),i=(t(26393),t(11470)),o=t(19365);const l={title:"AppsFlyer",description:"Integrate AppsFlyer with Adapty for advanced mobile attribution tracking.",metadataTitle:"AppsFlyer Integration | Adapty Docs"},d=void 0,p={id:"appsflyer",title:"AppsFlyer",description:"Integrate AppsFlyer with Adapty for advanced mobile attribution tracking.",source:"@site/versioned_docs/version-3.0/appsflyer.md",sourceDirName:".",slug:"/appsflyer",permalink:"/docs/appsflyer",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"AppsFlyer",description:"Integrate AppsFlyer with Adapty for advanced mobile attribution tracking.",metadataTitle:"AppsFlyer Integration | Adapty Docs"},sidebar:"tutorialSidebar",previous:{title:"Apple Search Ads",permalink:"/docs/apple-search-ads"},next:{title:"Switch from AppsFlyer S2S API 2 to 3",permalink:"/docs/switch-from-appsflyer-s2s-api-2-to-3"}},c={},u=[{value:"How to set up AppsFlyer integration",id:"how-to-set-up-appsflyer-integration",level:2},{value:"Events and tags",id:"events-and-tags",level:2},{value:"SDK configuration",id:"sdk-configuration",level:2}];function h(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://www.appsflyer.com/",children:"AppsFlyer"})," is a leading platform for mobile attribution and marketing analytics. It stands as a third-party service that gathers and organizes data from marketing campaigns. This helps companies see how well their campaigns are performing in one place."]}),"\n",(0,r.jsxs)(n.p,{children:["Adapty provides a complete set of data that lets you track ",(0,r.jsx)(n.a,{href:"events",children:"subscription events"})," from stores in one place. With Adapty, you can easily see how your subscribers are behaving, learn what they like, and use that information to communicate with them in a way that's targeted and effective. Therefore, this integration allows you to track subscription events in AppsFlyer and analyze precisely how much revenue your campaigns generate."]}),"\n",(0,r.jsx)(n.p,{children:"The integration between Adapty and AppsFlyer operates in two main ways."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Receiving attribution data from AppsFlyer"}),(0,r.jsx)(n.br,{}),"\n","Once you've ",(0,r.jsx)(n.a,{href:"appsflyer#sdk-configuration",children:"set up sending Appsflyer attribution to Adapty in your app code"}),", Adapty will start receiving attribution data from AppsFlyer. You can easily access and view this data on the user's profile page."]}),"\n"]}),"\n",(0,r.jsx)(a.A,{children:(0,r.jsx)("img",{src:t(39558).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sending subscription events to AppsFlyer"}),(0,r.jsx)(n.br,{}),"\n","Adapty can send all subscription events that are configured in your integration to AppsFlyer. As a result, you'll be able to track these events within the AppsFlyer dashboard. This integration is beneficial for evaluating the effectiveness of your advertising campaigns."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"how-to-set-up-appsflyer-integration",children:"How to set up AppsFlyer integration"}),"\n",(0,r.jsx)(n.p,{children:"To setup the integration with AppsFlyer:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Open ",(0,r.jsxs)(n.a,{href:"https://app.adapty.io/integrations/appsflyer",children:[(0,r.jsx)(n.strong,{children:"Integrations"})," -> ",(0,r.jsx)(n.strong,{children:"AppsFlyer"})]})," in the Adapty Dashboard."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Turn on the toggle to enable the integration."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["The next step of the integration is to set credentials.\nFor iOS, find App ID in the copy ",(0,r.jsx)(n.strong,{children:"Apple ID"})," in the App Store Connect (to do it, open your app page in ",(0,r.jsx)(n.a,{href:"https://appstoreconnect.apple.com/",children:"App Store Connect"}),", go to the ",(0,r.jsx)(n.strong,{children:"App Information"})," page in ",(0,r.jsx)(n.strong,{children:"General"})," section, and find ",(0,r.jsx)(n.strong,{children:"Apple ID"})," in the left bottom part of the screen)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(a.A,{children:(0,r.jsx)("img",{src:t(98423).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,r.jsxs)(n.p,{children:["3.2. Paste the copied ",(0,r.jsx)(n.strong,{children:"Apple ID"})," to the ",(0,r.jsx)(n.strong,{children:"iOS App ID"})," in the Adapty Dashboard."]}),"\n",(0,r.jsx)(a.A,{children:(0,r.jsx)("img",{src:t(28345).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["If you use AppsFlyer API 2, you need to switch to API 3, since the previous version will be deprecated by AppsFlyer soon. To do so, in the ",(0,r.jsx)(n.strong,{children:"AppsFlyer S2S API"})," list, select ",(0,r.jsx)(n.strong,{children:"API 3"}),"."]})}),"\n",(0,r.jsxs)(n.ol,{start:"5",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["For both iOS and Android, open the ",(0,r.jsx)(n.a,{href:"https://appsflyer.com/home",children:"AppsFlyer site"})," and log in."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Your account name"})," -> ",(0,r.jsx)(n.strong,{children:"Security Center"})," in the top-right corner of the dashboard."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(a.A,{children:(0,r.jsx)("img",{src:t(66924).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,r.jsxs)(n.ol,{start:"7",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.strong,{children:"Manage your account security"})," window, click the ",(0,r.jsx)(n.strong,{children:"Manage your AppsFlyer API and S2S tokens"})," button."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["If you have an S2S token, please proceed to step 12. If you do not have it, click the ",(0,r.jsx)(n.strong,{children:"New token"})," button."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(a.A,{children:(0,r.jsx)("img",{src:t(51709).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,r.jsxs)(n.ol,{start:"9",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.strong,{children:"New token"})," window, enter the name of the token. This name is solely for your reference."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Choose ",(0,r.jsx)(n.strong,{children:"S2S"})," in the ",(0,r.jsx)(n.strong,{children:"Choose type"})," list."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click the ",(0,r.jsx)(n.strong,{children:"Create new token"})," button to save the new token."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.strong,{children:"Tokens"})," window, copy the S2S token."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In the Adapty Dashboard, paste the copied S2S key into the ",(0,r.jsx)(n.strong,{children:"Dev key for iOS"})," and ",(0,r.jsx)(n.strong,{children:"Dev key for Android"})," fields."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(a.A,{children:(0,r.jsx)("img",{src:t(54455).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,r.jsxs)(n.ol,{start:"14",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click the ",(0,r.jsx)(n.strong,{children:"Save"})," button to save the changes."]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"AppsFlyer doesn't have a Sandbox mode for server2server integration. So you need a different application/account in AppsFlyer for Sandbox Dev Key. If you want to send sandbox events to the same app, just use the same key for production and sandbox."})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Adapty maps some events to AppsFlyer ",(0,r.jsx)(n.a,{href:"https://support.appsflyer.com/hc/en-us/articles/115005544169-Rich-in-app-events-for-Android-and-iOS#event-types",children:"standard events"})," by default. With such a configuration, AppsFlyer can then forward events to each ad network that you use without additional setup."]}),"\n",(0,r.jsx)(n.p,{children:"Another important thing is that AppsFlyer doesn't support events older than 24 hours. So, if you have an event that is more than a day old, Adapty will send it to Appsflyer, but the event date and time will be replaced by the current timestamp."}),"\n",(0,r.jsx)(n.h2,{id:"events-and-tags",children:"Events and tags"}),"\n",(0,r.jsxs)(n.p,{children:["Below the credentials, there are three groups of events you can send to AppsFlyer from Adapty. Simply turn on the ones you need. Check the full list of the events offered by Adapty ",(0,r.jsx)(n.a,{href:"events",children:"here"}),"."]}),"\n",(0,r.jsx)(a.A,{children:(0,r.jsx)("img",{src:t(68330).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})}),"\n",(0,r.jsx)(n.p,{children:"We recommend using the default event names provided by Adapty. But you can change the event names based on your needs."}),"\n",(0,r.jsx)(n.p,{children:"Adapty will send subscription events to AppsFlyer using a server-to-server integration, allowing you to view all subscription events in your AppsFlyer dashboard and link them to your acquisition campaigns."}),"\n",(0,r.jsx)(n.h2,{id:"sdk-configuration",children:"SDK configuration"}),"\n",(0,r.jsxs)(n.p,{children:["It's very important to send AppsFlyer attribution data from the device to Adapty using the ",(0,r.jsx)(n.code,{children:"Adapty.updateAttribution()"})," SDK method and the ",(0,r.jsx)(n.code,{children:"Adapty.setIntegrationIdentifier()"})," method to set the integration identifier. The example below shows how to do that."]}),"\n",(0,r.jsxs)(i.A,{groupId:"current-os",queryString:!0,children:[(0,r.jsx)(o.A,{value:"swift",label:"iOS (Swift)",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-swift",metastring:"showLineNumbers",children:'class YourAppsFlyerLibDelegateImplementation {\n    // Find your implementation of AppsFlyerLibDelegate \n    // and update onConversionDataSuccess method:\n    func onConversionDataSuccess(_ conversionInfo: [AnyHashable : Any]) {\n        let uid = AppsFlyerLib.shared().getAppsFlyerUID()\n        Adapty.setIntegrationIdentifier(key: "appsflyer_id", value: uid)\n        Adapty.updateAttribution(conversionInfo, source: "appsflyer")\n    }\n}\n'})})}),(0,r.jsx)(o.A,{value:"kotlin",label:"Android (Kotlin)",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-kotlin",metastring:"showLineNumbers",children:'val conversionListener: AppsFlyerConversionListener = object : AppsFlyerConversionListener {\n    override fun onConversionDataSuccess(conversionData: Map<String, Any>) {\n        val uid = AppsFlyerLib.getInstance().getAppsFlyerUID(context)\n        Adapty.setIntegrationIdentifier("appsflyer_id", uid) { error ->\n            if (error != null) {\n                // handle the error\n            }\n        }\n        Adapty.updateAttribution(conversionData, "appsflyer") { error ->\n            if (error != null) {\n                //handle the error\n            }\n        }\n    }\n}\n'})})}),(0,r.jsx)(o.A,{value:"flutter",label:"Flutter (Dart)",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",metastring:"showLineNumbers",children:'import \'package:appsflyer_sdk/appsflyer_sdk.dart\';\n\nAppsflyerSdk appsflyerSdk = AppsflyerSdk(<YOUR_OPTIONS>);\n\nappsflyerSdk.onInstallConversionData((data) async {\n    try {\n        final appsFlyerUID = await appsFlyerSdk.getAppsFlyerUID();\n        \n        await Adapty().setIntegrationIdentifier(\n          key: "appsflyer_id", \n          value: appsFlyerUID,\n        );\n        \n        await Adapty().updateAttribution(data, source: "appsflyer");\n    } on AdaptyError catch (adaptyError) {\n        // handle the error\n    } catch (e) {\n        // handle the error\n    }\n});\n\nappsflyerSdk.initSdk(\n    registerConversionDataCallback: true,\n    registerOnAppOpenAttributionCallback: true,\n    registerOnDeepLinkingCallback: true,\n);\n'})})}),(0,r.jsx)(o.A,{value:"unity",label:"Unity (C#)",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:"showLineNumbers",children:'using AdaptySDK;\nusing AppsFlyerSDK;\n\n// before SDK initialization\nAppsFlyer.getConversionData(this.name);\n\n// in your IAppsFlyerConversionData\nvoid onConversionDataSuccess(string conversionData) {\n    string appsFlyerId = AppsFlyer.getAppsFlyerId();\n    \n    Adapty.SetIntegrationIdentifier(\n      "appsflyer_id", \n      appsFlyerId, \n      (error) => {\n        // handle the error\n    });\n    \n    Adapty.UpdateAttribution(\n      conversionData, \n      "appsflyer",\n      (error) => {\n        // handle the error\n    });\n}\n'})})}),(0,r.jsx)(o.A,{value:"rn",label:"React Native (TS)",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",metastring:"showLineNumbers",children:"import { adapty, AttributionSource } from 'react-native-adapty';\nimport appsFlyer from 'react-native-appsflyer';\n\nappsFlyer.onInstallConversionData(installData => {\n    try {\n        const uid = appsFlyer.getAppsFlyerUID();\n        adapty.setIntegrationIdentifier(\"appsflyer_id\", uid);\n        adapty.updateAttribution(installData, \"appsflyer\");\n    } catch (error) {\n        // handle the error\n    }\n});\n\n// ...\nappsFlyer.initSdk(/*...*/);\n"})})})]})]})}function y(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},98423:(e,n,t)=>{t.d(n,{A:()=>r});const r=t.p+"assets/images/43a5cc6-apple_id-c372c543f43f1dd82fb394cac86d452a.webp"}}]);