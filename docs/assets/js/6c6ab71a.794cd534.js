"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[5070],{11470:(e,n,r)=>{r.d(n,{A:()=>A});var t=r(96540),a=r(34164),i=r(23104),d=r(56347),l=r(205),s=r(57485),o=r(31682),c=r(70679);function h(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:r}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:r,attributes:t,default:a}}=e;return{value:n,label:r,attributes:t,default:a}}))}(r);return function(e){const n=(0,o.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function u(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function y(e){let{queryString:n=!1,groupId:r}=e;const a=(0,d.W6)(),i=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r});return[(0,s.aZ)(i),(0,t.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(a.location.search);n.set(i,e),a.replace({...a.location,search:n.toString()})}),[i,a])]}function g(e){const{defaultValue:n,queryString:r=!1,groupId:a}=e,i=p(e),[d,s]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!u({value:n,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=r.find((e=>e.default))??r[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:i}))),[o,h]=y({queryString:r,groupId:a}),[g,f]=function(e){let{groupId:n}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,i]=(0,c.Dv)(r);return[a,(0,t.useCallback)((e=>{r&&i.set(e)}),[r,i])]}({groupId:a}),m=(()=>{const e=o??g;return u({value:e,tabValues:i})?e:null})();(0,l.A)((()=>{m&&s(m)}),[m]);return{selectedValue:d,selectValue:(0,t.useCallback)((e=>{if(!u({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);s(e),h(e),f(e)}),[h,f,i]),tabValues:i}}var f=r(92303);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=r(74848);function b(e){let{className:n,block:r,selectedValue:t,selectValue:d,tabValues:l}=e;const s=[],{blockElementScrollPositionUntilNextRender:o}=(0,i.a_)(),c=e=>{const n=e.currentTarget,r=s.indexOf(n),a=l[r].value;a!==t&&(o(n),d(a))},h=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const r=s.indexOf(e.currentTarget)+1;n=s[r]??s[0];break}case"ArrowLeft":{const r=s.indexOf(e.currentTarget)-1;n=s[r]??s[s.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":r},n),children:l.map((e=>{let{value:n,label:r,attributes:i}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>s.push(e),onKeyDown:h,onClick:c,...i,className:(0,a.A)("tabs__item",m.tabItem,i?.className,{"tabs__item--active":t===n}),children:r??n},n)}))})}function j(e){let{lazy:n,children:r,selectedValue:a}=e;const i=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=i.find((e=>e.props.value===a));return e?(0,t.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function w(e){const n=g(e);return(0,x.jsxs)("div",{className:(0,a.A)("tabs-container",m.tabList),children:[(0,x.jsx)(b,{...n,...e}),(0,x.jsx)(j,{...n,...e})]})}function A(e){const n=(0,f.A)();return(0,x.jsx)(w,{...e,children:h(e.children)},String(n))}},19365:(e,n,r)=>{r.d(n,{A:()=>d});r(96540);var t=r(34164);const a={tabItem:"tabItem_Ymn6"};var i=r(74848);function d(e){let{children:n,hidden:r,className:d}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,t.A)(a.tabItem,d),hidden:r,children:n})}},62374:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>s,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>o});var t=r(74848),a=r(28453);r(11470),r(19365);const i={title:"Migration guide to Adapty Unity SDK 3.3.x",description:"",metadataTitle:""},d=void 0,l={id:"migration-to-unity330",title:"Migration guide to Adapty Unity SDK 3.3.x",description:"",source:"@site/versioned_docs/version-3.0/migration-to-unity330.md",sourceDirName:".",slug:"/migration-to-unity330",permalink:"/docs/migration-to-unity330",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Migration guide to Adapty Unity SDK 3.3.x",description:"",metadataTitle:""},sidebar:"tutorialSidebar",previous:{title:"Migration guide to Flutter Adapty SDK 3.3",permalink:"/docs/migration-to-flutter330"},next:{title:"Migration guide to React Native Adapty SDK 3.3",permalink:"/docs/migration-to-react-native330"}},s={},o=[{value:"Upgrade Adapty Unity SDK to 3.3.x",id:"upgrade-adapty-unity-sdk-to-33x",level:2},{value:"Renamings",id:"renamings",level:2},{value:"Change the SetLogLevel method",id:"change-the-setloglevel-method",level:2},{value:"Change the PresentCodeRedemptionSheet method",id:"change-the-presentcoderedemptionsheet-method",level:2},{value:"Change how the paywall view is created",id:"change-how-the-paywall-view-is-created",level:2},{value:"Remove the GetProductsIntroductoryOfferEligibility method",id:"remove-the-getproductsintroductoryoffereligibility-method",level:2},{value:"Update method for providing fallback paywalls",id:"update-method-for-providing-fallback-paywalls",level:2},{value:"Update making purchase",id:"update-making-purchase",level:2},{value:"Update handling of Paywall Builder events",id:"update-handling-of-paywall-builder-events",level:2},{value:"Update handling of Paywall Builder paywall errors",id:"update-handling-of-paywall-builder-paywall-errors",level:2},{value:"Update third-party integration SDK configuration",id:"update-third-party-integration-sdk-configuration",level:2},{value:"Adjust",id:"adjust",level:3},{value:"Amplitude",id:"amplitude",level:3},{value:"AppMetrica",id:"appmetrica",level:3},{value:"AppsFlyer",id:"appsflyer",level:3},{value:"Branch",id:"branch",level:3},{value:"Firebase and Google Analytics",id:"firebase-and-google-analytics",level:3},{value:"Mixpanel",id:"mixpanel",level:3},{value:"OneSignal",id:"onesignal",level:3},{value:"Pushwoosh",id:"pushwoosh",level:3},{value:"Update Observer mode implementation",id:"update-observer-mode-implementation",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Adapty SDK 3.3.0 is a major release that brought some improvements which however may require some migration steps from you."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Upgrade to Adapty SDK v3.3.x."}),"\n",(0,t.jsx)(n.li,{children:"Renamed multiple classes, properties, and methods in the Adapty and AdaptyUI modules of Adapty SDK."}),"\n",(0,t.jsxs)(n.li,{children:["From now on, the ",(0,t.jsx)(n.code,{children:"SetLogLevel"})," method accepts a callback as an argument."]}),"\n",(0,t.jsxs)(n.li,{children:["From now on, the ",(0,t.jsx)(n.code,{children:"PresentCodeRedemptionSheet"})," method accepts a callback as an argument."]}),"\n",(0,t.jsx)(n.li,{children:"Change how the paywall view is created"}),"\n",(0,t.jsxs)(n.li,{children:["Remove the ",(0,t.jsx)(n.code,{children:"GetProductsIntroductoryOfferEligibility"})," method."]}),"\n",(0,t.jsxs)(n.li,{children:["Save fallback paywalls to separate files (one per platform) in ",(0,t.jsx)(n.code,{children:"Assets/StreamingAssets/"})," and pass the file names to the ",(0,t.jsx)(n.code,{children:"SetFallbackPaywalls"})," method."]}),"\n",(0,t.jsx)(n.li,{children:"Update making purchase"}),"\n",(0,t.jsx)(n.li,{children:"Update handling of Paywall Builder events."}),"\n",(0,t.jsx)(n.li,{children:"Update handling of Paywall Builder paywall errors."}),"\n",(0,t.jsx)(n.li,{children:"Update integration configurations for Adjust, Amplitude, AppMetrica, Appsflyer, Branch, Firebase and Google Analytics, Mixpanel, OneSignal, Pushwoosh."}),"\n",(0,t.jsx)(n.li,{children:"Update Observer mode implementation."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"upgrade-adapty-unity-sdk-to-33x",children:"Upgrade Adapty Unity SDK to 3.3.x"}),"\n",(0,t.jsx)(n.p,{children:"Up to this version, Adapty SDK was the core and mandatory SDK necessary for the proper functioning of Adapty within your app, and AdaptyUI SDK was an optional SDK that becomes necessary only if you use the Adapty Paywall Builder."}),"\n",(0,t.jsx)(n.p,{children:"Starting with version 3.3.0, AdaptyUI SDK is deprecated, and AdaptyUI is merged to Adapty SDK as a module. Because of these changes, you need to remove AdaptyUISDK and reinstall AdaptySDK."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Remove both ",(0,t.jsx)(n.strong,{children:"AdaptySDK"})," and ",(0,t.jsx)(n.strong,{children:"AdaptyUISDK"})," package dependencies from your project."]}),"\n",(0,t.jsxs)(n.li,{children:["Delete the ",(0,t.jsx)(n.strong,{children:"AdaptySDK"})," and ",(0,t.jsx)(n.strong,{children:"AdaptyUISDK"})," folders."]}),"\n",(0,t.jsxs)(n.li,{children:["Import the AdaptySDK package again as described in the ",(0,t.jsx)(n.a,{href:"sdk-installation-unity",children:"Adapty SDK installation & configuration for Unity"})," page."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"renamings",children:"Renamings"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Rename in Adapty module:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Old version"}),(0,t.jsx)(n.th,{children:"New version"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Adapty.sdkVersion"}),(0,t.jsx)(n.td,{children:"Adapty.SDKVersion"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Adapty.LogLevel"}),(0,t.jsx)(n.td,{children:"AdaptyLogLevel"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Adapty.Paywall"}),(0,t.jsx)(n.td,{children:"AdaptyPaywall"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Adapty.PaywallFetchPolicy"}),(0,t.jsx)(n.td,{children:"AdaptyPaywallFetchPolicy"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"PaywallProduct"}),(0,t.jsx)(n.td,{children:"AdaptyPaywallProduct"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Adapty.Profile"}),(0,t.jsx)(n.td,{children:"AdaptyProfile"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Adapty.ProfileParameters"}),(0,t.jsx)(n.td,{children:"AdaptyProfileParameters"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ProfileGender"}),(0,t.jsx)(n.td,{children:"AdaptyProfileGender"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Error"}),(0,t.jsx)(n.td,{children:"AdaptyError"})]})]})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Rename in AdaptyUI module:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Old version"}),(0,t.jsx)(n.th,{children:"New version"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"CreatePaywallView"}),(0,t.jsx)(n.td,{children:"CreateView"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"PresentPaywallView"}),(0,t.jsx)(n.td,{children:"PresentView"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"DismissPaywallView"}),(0,t.jsx)(n.td,{children:"DismissView"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"AdaptyUI.View"}),(0,t.jsx)(n.td,{children:"AdaptyUIView"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"AdaptyUI.Action"}),(0,t.jsx)(n.td,{children:"AdaptyUIUserAction"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"change-the-setloglevel-method",children:"Change the SetLogLevel method"}),"\n",(0,t.jsxs)(n.p,{children:["From now on, the ",(0,t.jsx)(n.code,{children:"SetLogLevel"})," method accepts a callback as an argument."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:"- Adapty.SetLogLevel(Adapty.LogLevel.Verbose);\n+ Adapty.SetLogLevel(Adapty.LogLevel.Verbose, null); // or you can pass the callback to handle the possible error\n"})}),"\n",(0,t.jsx)(n.h2,{id:"change-the-presentcoderedemptionsheet-method",children:"Change the PresentCodeRedemptionSheet method"}),"\n",(0,t.jsxs)(n.p,{children:["From now on, the ",(0,t.jsx)(n.code,{children:"PresentCodeRedemptionSheet"})," method accepts a callback as an argument."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:"- Adapty.PresentCodeRedemptionSheet();\n+ Adapty.PresentCodeRedemptionSheet(null); // or you can pass the callback to handle the possible error\n"})}),"\n",(0,t.jsx)(n.h2,{id:"change-how-the-paywall-view-is-created",children:"Change how the paywall view is created"}),"\n",(0,t.jsxs)(n.p,{children:["For the complete code example, check out the ",(0,t.jsx)(n.a,{href:"get-pb-paywalls#fetch-the-view-configuration-of-paywall-designed-using-paywall-builder",children:"Fetch the view configuration of paywall designed using Paywall Builder"})," section."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:"+ var parameters = new AdaptyUICreateViewParameters()\n+   .SetPreloadProducts(true);\n\n- AdaptyUI.CreatePaywallView(\n+ AdaptyUI.CreateView(\n   paywall, \n-  preloadProducts: true,\n+  parameters,\n  (view, error) => {\n  // use the view\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"remove-the-getproductsintroductoryoffereligibility-method",children:"Remove the GetProductsIntroductoryOfferEligibility method"}),"\n",(0,t.jsx)(n.p,{children:"Before Adapty iOS SDK 3.3.0, the product object always included offers, regardless of whether the user was eligible. You had to manually check eligibility before using the offer."}),"\n",(0,t.jsx)(n.p,{children:"Now, the product object only includes an offer if the user is eligible. This means you no longer need to check eligibility \u2014 if an offer is present, the user is eligible."}),"\n",(0,t.jsx)(n.h2,{id:"update-method-for-providing-fallback-paywalls",children:"Update method for providing fallback paywalls"}),"\n",(0,t.jsx)(n.p,{children:"Up to this version, the fallback paywalls were passed as a serialized JSON. Starting from v 3.3.0, the mechanism is changed:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Save fallback paywalls to files in ",(0,t.jsx)(n.code,{children:"/Assets/StreamingAssets/"}),", 1 file for Android and another for iOS."]}),"\n",(0,t.jsxs)(n.li,{children:["Pass the file names to the ",(0,t.jsx)(n.code,{children:"SetFallbackPaywalls"})," method."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Your code will change this way:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:'using AdaptySDK;\n\nvoid SetFallBackPaywalls() {\n\n+ #if UNITY_IOS\n+   var assetId = "adapty_fallback_ios.json";\n+ #elif UNITY_ANDROID\n+   var assetId = "adapty_fallback_android.json";\n+ #else\n+   var assetId = "";\n+ #endif\n\n-   Adapty.SetFallbackPaywalls("FALLBACK_PAYWALLS_JSON_STRING", (error) => {\n+   Adapty.SetFallbackPaywalls(assetId, (error) => {\n    // handle the error\n  });\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Check out the final code example in the ",(0,t.jsx)(n.a,{href:"unity-use-fallback-paywalls",children:"Use fallback paywalls in Unity"})," page."]}),"\n",(0,t.jsx)(n.h2,{id:"update-making-purchase",children:"Update making purchase"}),"\n",(0,t.jsxs)(n.p,{children:["Previously canceled and pending purchases were considered errors and returned the ",(0,t.jsx)(n.code,{children:"PaymentCancelled"})," and ",(0,t.jsx)(n.code,{children:"PendingPurchase"})," codes, respectively."]}),"\n",(0,t.jsxs)(n.p,{children:["Now a new ",(0,t.jsx)(n.code,{children:"AdaptyPurchaseResultType"})," class is used to process canceled, successful, and pending purchases. Update the code of purchasing in the following way:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:"using AdaptySDK;\n\nvoid MakePurchase(AdaptyPaywallProduct product) {\n- Adapty.MakePurchase(product, (profile, error) => {\n-   // handle successfull purchase\n+ Adapty.MakePurchase(product, (result, error) => {\n+   switch (result.Type) {\n+     case AdaptyPurchaseResultType.Pending:\n+       // handle pending purchase\n+       break;\n+     case AdaptyPurchaseResultType.UserCancelled:\n+       // handle purchase cancellation\n+       break;\n+     case AdaptyPurchaseResultType.Success:\n+       var profile = result.Profile;\n+       // handle successful purchase\n+       break;\n+     default:\n+       break;\n    }\n  });\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Check out the final code example in the ",(0,t.jsx)(n.a,{href:"making-purchases",children:"Make purchases in mobile app"})," page."]}),"\n",(0,t.jsx)(n.h2,{id:"update-handling-of-paywall-builder-events",children:"Update handling of Paywall Builder events"}),"\n",(0,t.jsxs)(n.p,{children:["Canceled and pending purchases are not considered to be errors any more, all these cases are processed with the ",(0,t.jsx)(n.code,{children:"PaywallViewDidFinishPurchase"})," method."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Delete processing of the ",(0,t.jsx)(n.a,{href:"unity-handling-events-legacy#canceled-purchase",children:"Canceled purchase"})," event."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Update handling of the Successful purchase event in the following way:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:"- public void OnFinishPurchase(\n-   AdaptyUI.View view, \n-   Adapty.PaywallProduct product, \n-   Adapty.Profile profile\n- ) { }\n\n+ public void PaywallViewDidFinishPurchase(\n+   AdaptyUIView view, \n+   AdaptyPaywallProduct product, \n+   AdaptyPurchaseResult purchasedResult\n+ ) { }\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Update handling of actions:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:"- public void OnPerformAction(\n-   AdaptyUI.View view, \n-   AdaptyUI.Action action\n- ) {\n+ public void PaywallViewDidPerformAction(\n+   AdaptyUIView view, \n+   AdaptyUIUserAction action\n+ ) {\n    switch (action.Type) {\n-     case AdaptyUI.ActionType.Close:\n+     case AdaptyUIUserActionType.Close:\n        view.Dismiss(null);\n        break;\n-     case AdaptyUI.ActionType.OpenUrl:\n+     case AdaptyUIUserActionType.OpenUrl:\n        var urlString = action.Value;\n        if (urlString != null {\n        \tApplication.OpenURL(urlString); \n        }\n      default:\n        // handle other events\n        break;\n    }\n}\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Update handling of started purchase:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:"- public void OnSelectProduct(\n-   AdaptyUI.View view, \n-   Adapty.PaywallProduct product\n- ) { }\n\n+ public void PaywallViewDidSelectProduct(\n+   AdaptyUIView view, \n+   string productId\n+ ) { }\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Update handling of failed purchase:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:"- public void OnFailPurchase(\n-   AdaptyUI.View view, \n-   Adapty.PaywallProduct product, \n-   Adapty.Error error\n- ) { }\n\n+ public void PaywallViewDidFailPurchase(\n+   AdaptyUIView view, \n+   AdaptyPaywallProduct product, \n+   AdaptyError error\n+ ) { }\n\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Update handling of successful restore event:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:"- public void OnFailRestore(\n-   AdaptyUI.View view, \n-   Adapty.Error error\n- ) { }\n\n+ public void PaywallViewDidFailRestore(\n+   AdaptyUIView view, \n+   AdaptyError error\n+ ) { }\n\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Check out the final code example in the ",(0,t.jsx)(n.a,{href:"unity-handling-events",children:"Handle paywall events"})," page."]}),"\n",(0,t.jsx)(n.h2,{id:"update-handling-of-paywall-builder-paywall-errors",children:"Update handling of Paywall Builder paywall errors"}),"\n",(0,t.jsx)(n.p,{children:"The handling of errors is changed as well, please update your code according to the guidance below."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Update the handling of the product loading errors:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:"- public void OnFailLoadingProducts(\n-   AdaptyUI.View view, \n-   Adapty.Error error\n- ) { }\n\n+ public void PaywallViewDidFailLoadingProducts(\n+   AdaptyUIView view, \n+   AdaptyError error\n+ ) { }\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Update the handling of the rendering errors:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:"- public void OnFailRendering(\n-   AdaptyUI.View view, \n-   Adapty.Error error\n- ) { }\n\n+ public void PaywallViewDidFailRendering(\n+   AdaptyUIView view, \n+   AdaptyError error\n+ ) { }\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"update-third-party-integration-sdk-configuration",children:"Update third-party integration SDK configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Starting with Adapty Unity SDK 3.3.0, we\u2019ve updated the public API for the ",(0,t.jsx)(n.code,{children:"updateAttribution"})," method. Previously, it accepted a ",(0,t.jsx)(n.code,{children:"[AnyHashable: Any]"})," dictionary, allowing you to pass attribution objects directly from various services. Now, it requires a ",(0,t.jsx)(n.code,{children:"[String: any Sendable]"}),", so you\u2019ll need to convert attribution objects before passing them."]}),"\n",(0,t.jsx)(n.p,{children:"To ensure integrations work properly with Adapty Unity SDK 3.3.0 and later, update your SDK configurations for the following integrations as described in the sections below."}),"\n",(0,t.jsx)(n.h3,{id:"adjust",children:"Adjust"}),"\n",(0,t.jsxs)(n.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,t.jsx)(n.a,{href:"adjust#sdk-configuration",children:"SDK configuration for Adjust integration"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:'- using static AdaptySDK.Adapty;\n using AdaptySDK;\n\n Adjust.GetAdid((adid) => {\n-   Adjust.GetAttribution((attribution) => {\n-     Dictionary<String, object> data = new Dictionary<String, object>();\n-\n-     data["network"] = attribution.Network;\n-     data["campaign"] = attribution.Campaign;\n-     data["adgroup"] = attribution.Adgroup;\n-     data["creative"] = attribution.Creative;\n-\n-     String attributionString = JsonUtility.ToJson(data);\n-     Adapty.UpdateAttribution(attributionString, AttributionSource.Adjust, adid, (error) => {\n-       // handle the error\n-     });\n+   if (adid != null) {\n+     Adapty.SetIntegrationIdentifier(\n+       "adjust_device_id", \n+       adid, \n+       (error) => {\n+         // handle the error\n+     });\n    }\n });\n\n Adjust.GetAttribution((attribution) => {\n   Dictionary<String, object> data = new Dictionary<String, object>();\n\n   data["network"] = attribution.Network;\n   data["campaign"] = attribution.Campaign;\n   data["adgroup"] = attribution.Adgroup;\n   data["creative"] = attribution.Creative;\n\n   String attributionString = JsonUtility.ToJson(data);\n    \n-   Adapty.UpdateAttribution(attributionString, AttributionSource.Adjust, adid, (error) => {\n+   Adapty.UpdateAttribution(attributionString, "adjust", (error) => {\n       // handle the error\n   });\n });\n'})}),"\n",(0,t.jsx)(n.h3,{id:"amplitude",children:"Amplitude"}),"\n",(0,t.jsxs)(n.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,t.jsx)(n.a,{href:"amplitude#sdk-configuration",children:"SDK configuration for Amplitude integration"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:'using AdaptySDK;\n- var builder = new Adapty.ProfileParameters.Builder();\n- builder.SetAmplitudeUserId("YOUR_AMPLITUDE_USER_ID");\n- builder.SetAmplitudeDeviceId(amplitude.getDeviceId());\n\n- Adapty.UpdateProfile(builder.Build(), (error) => {\n-     // handle error\n- });\n\n+ Adapty.SetIntegrationIdentifier(\n+   "amplitude_user_id", \n+   "YOUR_AMPLITUDE_USER_ID", \n+   (error) => {\n+   // handle the error\n+ });\n\n+ Adapty.SetIntegrationIdentifier(\n+   "amplitude_device_id", \n+   amplitude.getDeviceId(), \n+   (error) => {\n+   // handle the error\n+ });\n'})}),"\n",(0,t.jsx)(n.h3,{id:"appmetrica",children:"AppMetrica"}),"\n",(0,t.jsxs)(n.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,t.jsx)(n.a,{href:"appmetrica#sdk-configuration",children:"SDK configuration for AppMetrica integration"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:'using AdaptySDK;\n\n- var deviceId = AppMetrica.GetDeviceId();\n\n- if (deviceId != null {\n-   var builder = new Adapty.ProfileParameters.Builder();\n\n-   builder.SetAppmetricaProfileId("YOUR_ADAPTY_CUSTOMER_USER_ID");\n-   builder.SetAppmetricaDeviceId(deviceId);\n\n-   Adapty.UpdateProfile(builder.Build(), (error) => {\n-       // handle error\n-   });\n- }\n\n+ var deviceId = AppMetrica.GetDeviceId();\n\n+ if (deviceId != null {\n+   Adapty.SetIntegrationIdentifier(\n+     "appmetrica_device_id", \n+     deviceId, \n+     (error) => {\n+     // handle the error\n+   });\n+   \n+   Adapty.SetIntegrationIdentifier(\n+     "appmetrica_profile_id", \n+     "YOUR_ADAPTY_CUSTOMER_USER_ID", \n+     (error) => {\n+     // handle the error\n+   });\n+ }\n'})}),"\n",(0,t.jsx)(n.h3,{id:"appsflyer",children:"AppsFlyer"}),"\n",(0,t.jsxs)(n.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,t.jsx)(n.a,{href:"appsflyer#sdk-configuration",children:"SDK configuration for AppsFlyer integration"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:' using AppsFlyerSDK;\n using AdaptySDK;\n\n // before SDK initialization\n AppsFlyer.getConversionData(this.name);\n\n // in your IAppsFlyerConversionData\n void onConversionDataSuccess(string conversionData) {\n     // It\'s important to include the network user ID\n-    string appsFlyerId = AppsFlyer.getAppsFlyerId();\n-    Adapty.UpdateAttribution(conversionData, AttributionSource.Appsflyer, appsFlyerId, (error) => {\n+    string appsFlyerId = AppsFlyer.getAppsFlyerId();\n+    \n+    Adapty.SetIntegrationIdentifier(\n+      "appsflyer_id", \n+      appsFlyerId, \n+      (error) => {\n         // handle the error\n     });\n+    \n+    Adapty.UpdateAttribution(\n+      conversionData, \n+      "appsflyer",\n+      (error) => {\n+        // handle the error\n+      });\n }\n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"branch",children:"Branch"}),"\n",(0,t.jsxs)(n.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,t.jsx)(n.a,{href:"branch#sdk-configuration",children:"SDK configuration for Branch integration"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:'using AdaptySDK;\n\n- class YourBranchImplementation {\n-     func initializeBranch() {\n-         Branch.getInstance().initSession(launchOptions: launchOptions) { (data, error) in\n-             if let data {\n-                 Adapty.updateAttribution(data, source: .branch)\n-             }\n-         }\n-     }\n- }\n\n+ Branch.initSession(delegate(Dictionary<string, object> parameters, string error) {\n+     string attributionString = JsonUtility.ToJson(parameters);\n+     \n+     Adapty.UpdateAttribution(\n+       attributionString, \n+       "branch", \n+       (error) => {\n+         // handle the error\n+       });\n+ });\n'})}),"\n",(0,t.jsx)(n.h3,{id:"firebase-and-google-analytics",children:"Firebase and Google Analytics"}),"\n",(0,t.jsxs)(n.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,t.jsx)(n.a,{href:"firebase-and-google-analytics",children:"SDK configuration for Firebase and Google Analytics integration"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:' // We suppose FirebaseAnalytics Unity Plugin is already installed\n\n using AdaptySDK;\n\n Firebase.Analytics\n   .FirebaseAnalytics\n   .GetAnalyticsInstanceIdAsync()\n   .ContinueWithOnMainThread((task) => {\n     if (!task.IsCompletedSuccessfully) {\n       // handle error\n       return;\n     }\n\n     var firebaseId = task.Result\n     var builder = new Adapty.ProfileParameters.Builder();\n     \n-    builder.SetFirebaseAppInstanceId(firebaseId);\n-\n-    Adapty.UpdateProfile(builder.Build(), (error) => {\n-        // handle error\n   \n+     Adapty.SetIntegrationIdentifier(\n+       "firebase_app_instance_id", \n+       firebaseId, \n+       (error) => {\n+         // handle the error\n     });\n   });\n'})}),"\n",(0,t.jsx)(n.h3,{id:"mixpanel",children:"Mixpanel"}),"\n",(0,t.jsxs)(n.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,t.jsx)(n.a,{href:"mixpanel#sdk-configuration",children:"SDK configuration for Mixpanel integration"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:'using AdaptySDK;\n\n- var builder = new Adapty.ProfileParameters.Builder();\n- builder.SetMixpanelUserId(Mixpanel.DistinctId);\n\n- Adapty.UpdateProfile(builder.Build(), (error) => {\n-     // handle error\n- });\n\n+ var distinctId = Mixpanel.DistinctId;\n\n+ if (distinctId != null) {\n+   Adapty.SetIntegrationIdentifier(\n+     "mixpanel_user_id", \n+     distinctId, \n+     (error) => {\n+       // handle the error\n+   });\n+ }\n'})}),"\n",(0,t.jsx)(n.h3,{id:"onesignal",children:"OneSignal"}),"\n",(0,t.jsxs)(n.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,t.jsx)(n.a,{href:"onesignal#sdk-configuration",children:"SDK configuration for OneSignal integration"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:'using AdaptySDK;\n\n- using OneSignalSDK;\n\n- var pushUserId = OneSignal.Default.PushSubscriptionState.userId;\n\n- var builder = new Adapty.ProfileParameters.Builder();\n- builder.SetOneSignalPlayerId(pushUserId);\n\n- Adapty.UpdateProfile(builder.Build(), (error) => {\n-     // handle error\n- });\n\n+ var distinctId = Mixpanel.DistinctId;\n\n+ if (distinctId != null) {\n+   Adapty.SetIntegrationIdentifier(\n+     "mixpanel_user_id", \n+     distinctId, \n+     (error) => {\n+       // handle the error\n+   });\n+ }\n'})}),"\n",(0,t.jsx)(n.h3,{id:"pushwoosh",children:"Pushwoosh"}),"\n",(0,t.jsxs)(n.p,{children:["Update your mobile app code as shown below. For the complete code example, check out the ",(0,t.jsx)(n.a,{href:"pushwoosh#sdk-configuration",children:"SDK configuration for Pushwoosh integration"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:'using AdaptySDK;\n\n- var builder = new Adapty.ProfileParameters.Builder();\n- builder.SetPushwooshHWID(Pushwoosh.Instance.HWID);\n\n- Adapty.UpdateProfile(builder.Build(), (error) => {\n-     // handle error\n- });\n\n+ Adapty.SetIntegrationIdentifier(\n+   "pushwoosh_hwid", \n+   Pushwoosh.Instance.HWID, \n+   (error) => {\n+   // handle the error\n+ });\n'})}),"\n",(0,t.jsx)(n.h2,{id:"update-observer-mode-implementation",children:"Update Observer mode implementation"}),"\n",(0,t.jsxs)(n.p,{children:["Update how you link paywalls to transactions. Previously, you used the ",(0,t.jsx)(n.code,{children:"setVariationId"})," method to assign the ",(0,t.jsx)(n.code,{children:"variationId"}),". Now, you can include the ",(0,t.jsx)(n.code,{children:"variationId"})," directly when recording the transaction using the new ",(0,t.jsx)(n.code,{children:"reportTransaction"})," method. Check out the final code example in the ",(0,t.jsx)(n.a,{href:"report-transactions-observer-mode",children:"Associate paywalls with purchase transactions in Observer mode"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",metastring:"showLineNumbers",children:' // every time when calling transaction.finish()\n- Adapty.SetVariationForTransaction("<variationId>", "<transactionId>", (error) => { \n-     if(error != null) {\n-         // handle the error\n-         return;\n-     }\n-\n-     // successful binding\n- });\n\n+ Adapty.ReportTransaction(\n+   "YOUR_TRANSACTION_ID", \n+   "PAYWALL_VARIATION_ID", // optional\n+   (error) => {\n+   // handle the error\n+ });\n'})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);