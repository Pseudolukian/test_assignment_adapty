"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[7195],{4257:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/posthog-settings-f0e9e48ae2f9cd44fa53c35cdae18918.webp"},11470:(e,t,n)=>{n.d(t,{A:()=>w});var s=n(96540),r=n(34164),i=n(23104),a=n(56347),o=n(205),l=n(57485),d=n(31682),c=n(70679);function h(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:t,children:n}=e;return(0,s.useMemo)((()=>{const e=t??function(e){return h(e).map((e=>{let{props:{value:t,label:n,attributes:s,default:r}}=e;return{value:t,label:n,attributes:s,default:r}}))}(n);return function(e){const t=(0,d.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function p(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function g(e){let{queryString:t=!1,groupId:n}=e;const r=(0,a.W6)(),i=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l.aZ)(i),(0,s.useCallback)((e=>{if(!i)return;const t=new URLSearchParams(r.location.search);t.set(i,e),r.replace({...r.location,search:t.toString()})}),[i,r])]}function x(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,i=u(e),[a,l]=(0,s.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const s=n.find((e=>e.default))??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:t,tabValues:i}))),[d,h]=g({queryString:n,groupId:r}),[x,j]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,i]=(0,c.Dv)(n);return[r,(0,s.useCallback)((e=>{n&&i.set(e)}),[n,i])]}({groupId:r}),m=(()=>{const e=d??x;return p({value:e,tabValues:i})?e:null})();(0,o.A)((()=>{m&&l(m)}),[m]);return{selectedValue:a,selectValue:(0,s.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),h(e),j(e)}),[h,j,i]),tabValues:i}}var j=n(92303);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=n(74848);function b(e){let{className:t,block:n,selectedValue:s,selectValue:a,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:d}=(0,i.a_)(),c=e=>{const t=e.currentTarget,n=l.indexOf(t),r=o[n].value;r!==s&&(d(t),a(r))},h=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;t=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;t=l[n]??l[l.length-1];break}}t?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},t),children:o.map((e=>{let{value:t,label:n,attributes:i}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,ref:e=>l.push(e),onKeyDown:h,onClick:c,...i,className:(0,r.A)("tabs__item",m.tabItem,i?.className,{"tabs__item--active":s===t}),children:n??t},t)}))})}function v(e){let{lazy:t,children:n,selectedValue:r}=e;const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=i.find((e=>e.props.value===r));return e?(0,s.cloneElement)(e,{className:"margin-top--md"}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:i.map(((e,t)=>(0,s.cloneElement)(e,{key:t,hidden:e.props.value!==r})))})}function y(e){const t=x(e);return(0,f.jsxs)("div",{className:(0,r.A)("tabs-container",m.tabList),children:[(0,f.jsx)(b,{...t,...e}),(0,f.jsx)(v,{...t,...e})]})}function w(e){const t=(0,j.A)();return(0,f.jsx)(y,{...e,children:h(e.children)},String(t))}},19365:(e,t,n)=>{n.d(t,{A:()=>a});n(96540);var s=n(34164);const r={tabItem:"tabItem_Ymn6"};var i=n(74848);function a(e){let{children:t,hidden:n,className:a}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,s.A)(r.tabItem,a),hidden:n,children:t})}},29629:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/posthog-on-e6c31c7ff8cb2a238c074808b92a5a79.webp"},52574:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>d,default:()=>g,frontMatter:()=>l,metadata:()=>c,toc:()=>u});var s=n(74848),r=n(28453),i=n(11470),a=n(19365),o=n(34028);n(26393);const l={title:"PostHog",description:"",metadataTitle:""},d=void 0,c={id:"posthog",title:"PostHog",description:"",source:"@site/versioned_docs/version-3.0/posthog.md",sourceDirName:".",slug:"/posthog",permalink:"/test_assignment_adapty/docs/posthog",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"PostHog",description:"",metadataTitle:""},sidebar:"tutorialSidebar",previous:{title:"Mixpanel",permalink:"/test_assignment_adapty/docs/mixpanel"},next:{title:"SplitMetrics Acquire",permalink:"/test_assignment_adapty/docs/splitmetrics"}},h={},u=[{value:"Integration Characteristics",id:"integration-characteristics",level:2},{value:"PostHog event structure",id:"posthog-event-structure",level:2},{value:"properties.$set parameters",id:"propertiesset-parameters",level:3},{value:"Setting up PostHog integration",id:"setting-up-posthog-integration",level:2},{value:"SDK configuration",id:"sdk-configuration",level:2}];function p(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"PostHog is an analytics platform that provides tools for tracking user behavior, visualizing product usage, and analyzing retention. With features like event tracking, user flows, and feature flags, it\u2019s designed to help you better understand and improve your product."}),"\n",(0,s.jsx)(t.p,{children:"Integrating PostHog with Adapty enables seamless tracking of subscription-related events, such as trial starts, renewals, and cancellations. By sending these events to PostHog, you can analyze how subscription changes affect user behavior, evaluate paywall performance, and gain deeper insights into your monetization strategies \u2014 all within your existing analytics workflow."}),"\n",(0,s.jsx)(t.h2,{id:"integration-characteristics",children:"Integration Characteristics"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Integration characteristic"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Schedule"}),(0,s.jsx)(t.td,{children:"Real-time; events may not appear immediately on the PostHog dashboard."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Data direction"}),(0,s.jsx)(t.td,{children:"Adapty events are sent from the Adapty server to the PostHog server."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Adapty integration point"}),(0,s.jsx)(t.td,{children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:" PostHog and Adapty SDKs in the mobile app code"}),(0,s.jsx)("li",{children:" Adapty server"})]})})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"posthog-event-structure",children:"PostHog event structure"}),"\n",(0,s.jsxs)(t.p,{children:["Adapty sends selected events to PostHog as configured in the ",(0,s.jsx)(t.strong,{children:"Events names"})," section on the ",(0,s.jsx)(t.a,{href:"https://app.adapty.io/integrations/posthog",children:"PostHog Integration page"}),". Each event is structured like this:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",metastring:"showLineNumbers",children:'{\n  "distinct_id": "john.doe@example.com",\n  "timestamp": "2025-01-08T11:06:12+00:00",\n  "event": "subscription_started",\n  "properties": {\n    "$set": {\n      "email": "user@example.com",\n      "first_name": "John",\n      "last_name": "Doe",\n      "birthday": "1990-01-01",\n      "gender": "male",\n      "os": "iOS"\n    },\n    "timezone": "America/New_York",\n    "ip_address": "10.168.1.1",\n    "*": "{{other_event_properties}}"\n  }\n}\n'})}),"\n",(0,s.jsx)(t.p,{children:"Where"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:(0,s.jsx)(t.strong,{children:"Parameter"})}),(0,s.jsx)(t.th,{children:(0,s.jsx)(t.strong,{children:"Type"})}),(0,s.jsx)(t.th,{children:(0,s.jsx)(t.strong,{children:"Description"})})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"distinct_id"})}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsxs)(t.td,{children:["Unique identifier for the user (e.g., ",(0,s.jsx)(t.code,{children:"profile.posthog_distinct_user_id"}),", ",(0,s.jsx)(t.code,{children:"customer_user_id"}),", or ",(0,s.jsx)(t.code,{children:"profile_id"}),")."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"timestamp"})}),(0,s.jsx)(t.td,{children:"ISO 8601 date & time"}),(0,s.jsx)(t.td,{children:"The date and time of the event."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"event"})}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsxs)(t.td,{children:["The name of the event as you defined it in the Events names section of the ",(0,s.jsx)(t.a,{href:"https://app.adapty.io/integrations/posthog",children:"PostHog configuration"}),"."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"properties"})}),(0,s.jsx)(t.td,{children:"Object"}),(0,s.jsxs)(t.td,{children:["Contains the ",(0,s.jsx)(t.a,{href:"posthog#propertiesset-parameters",children:"properties.$set"})," and all the ",(0,s.jsx)(t.a,{href:"messaging#event-properties",children:"event-specific properties"}),". Each property is optional and won't be sent to PostHog if missing."]})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"propertiesset-parameters",children:"properties.$set parameters"}),"\n",(0,s.jsxs)(t.p,{children:["Each ",(0,s.jsx)(t.code,{children:"properties.$set"})," object parameter is optional and won't be sent to PostHog if missing."]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:(0,s.jsx)(t.strong,{children:"Parameter"})}),(0,s.jsx)(t.th,{children:(0,s.jsx)(t.strong,{children:"Type"})}),(0,s.jsx)(t.th,{children:(0,s.jsx)(t.strong,{children:"Description"})})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"email"})}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsx)(t.td,{children:"User's email address."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"first_name"})}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsx)(t.td,{children:"User's first name."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"last_name"})}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsx)(t.td,{children:"User's last name."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"birthday"})}),(0,s.jsx)(t.td,{children:"String (Date)"}),(0,s.jsx)(t.td,{children:"User's date of birth."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"gender"})}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsx)(t.td,{children:"User's gender."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"os"})}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsx)(t.td,{children:"Operating system of the user's device."})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"setting-up-posthog-integration",children:"Setting up PostHog integration"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Open the ",(0,s.jsx)(t.a,{href:"https://app.adapty.io/integrations/posthog",children:"Integrations -> PostHog"})," page in the Adapty Dashboard and enable the toggle."]}),"\n",(0,s.jsx)(o.A,{children:(0,s.jsx)("img",{src:n(29629).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Log into the ",(0,s.jsx)(t.a,{href:"https://posthog.com/",children:"PostHog Dashboard"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Navigate to ",(0,s.jsx)(t.strong,{children:"Settings -> Project"}),"."]}),"\n",(0,s.jsx)(o.A,{children:(0,s.jsx)("img",{src:n(4257).A,style:{border:"none",width:"700px",display:"block",margin:"0 auto"}})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["In the ",(0,s.jsx)(t.strong,{children:"Project"})," window, scroll down to the ",(0,s.jsx)(t.strong,{children:"Project ID"})," section and copy the ",(0,s.jsx)(t.strong,{children:"Project API key"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Paste the API key into the ",(0,s.jsx)(t.strong,{children:"Project API key"})," field in the Adapty Dashboard. PostHog doesn\u2019t have a specific Sandbox mode for server-to-server integration."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Choose your ",(0,s.jsx)(t.strong,{children:"PostHog Deployment"}),":"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Option"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"us/eu"}),(0,s.jsx)(t.td,{children:"Default PostHog-hosted deployments."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Custom"}),(0,s.jsxs)(t.td,{children:["For self-hosted instances. Enter your instance URL in the ",(0,s.jsx)(t.strong,{children:"PostHog Instance URL"})," field."]})]})]})]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["(optional) If you're using a self-hosted PostHog deployment, enter your deployment's address in the ",(0,s.jsx)(t.strong,{children:"PostHog Instance URL"})," field."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["(optional) Tweak settings like ",(0,s.jsx)(t.strong,{children:"Reporting Proceeds"}),", ",(0,s.jsx)(t.strong,{children:"Exclude Historical Events"}),", ",(0,s.jsx)(t.strong,{children:"Report User's Currency"}),", and ",(0,s.jsx)(t.strong,{children:"Send Trial Price"}),". Check the ",(0,s.jsx)(t.a,{href:"https://adapty.io/docs/configuration#integration-settings",children:"Integration settings"})," for details on these options."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["(optional) You can also customize which events are sent to PostHog in the ",(0,s.jsx)(t.strong,{children:"Events names"})," section. Disable unwanted events or rename them as needed."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Click ",(0,s.jsx)(t.strong,{children:"Save"})," to finalize the setup."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"sdk-configuration",children:"SDK configuration"}),"\n",(0,s.jsxs)(t.p,{children:["To enable receiving attribution data from PostHog, pass the ",(0,s.jsx)(t.code,{children:"distinctId"})," value to Adapty as shown below:"]}),"\n",(0,s.jsxs)(i.A,{groupId:"current-os",queryString:!0,children:[(0,s.jsx)(a.A,{value:"swift",label:"Swift",default:!0,children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-swift",metastring:"showLineNumbers",children:'do {\n    let distinctId = PostHogSDK.shared.getDistinctId()\n\n    try await Adapty.setIntegrationIdentifier(\n        key: "posthog_distinct_user_id",\n        value: distinctId\n    )                \n} catch {\n    // handle the error\n}\n'})})}),(0,s.jsx)(a.A,{value:"kotlin",label:"Kotlin",default:!0,children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-Kotlin",metastring:"showLineNumbers",children:'Adapty.setIntegrationIdentifier("posthog_distinct_user_id", PostHog.distinctId()) { error ->\n \xa0 \xa0if (error != null) {\n \xa0 \xa0 \xa0 \xa0// handle the error\n \xa0 \xa0}\n\n'})})}),(0,s.jsx)(a.A,{value:"java",label:"Java",default:!0,children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",metastring:"showLineNumbers",children:'Adapty.setIntegrationIdentifier("posthog_distinct_user_id", PostHog.distinctId(), error -> {\n    if (error != null) {\n        // handle the error\n    }\n});\n'})})}),(0,s.jsx)(a.A,{value:"flutter",label:"Flutter",default:!0,children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",metastring:"showLineNumbers",children:'try {\n    final distinctId = await Posthog().getDistinctId();\n\n    await Adapty().setIntegrationIdentifier(\n        key: "posthog_distinct_user_id",\n        value: distinctId,\n    );\n} catch (e) {\n    // handle the error\n}\n'})})}),(0,s.jsx)(a.A,{value:"unity",label:"Unity",default:!0,children:(0,s.jsx)(t.p,{children:"There is no official PostHog SDK for Unity."})}),(0,s.jsx)(a.A,{value:"rn",label:"React Native (TS)",default:!0,children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",metastring:"showLineNumbers",children:"import { adapty } from 'react-native-adapty';\nimport { usePostHog } from 'posthog-react-native'\n\n// ...\nconst posthog = usePostHog();\n\n// ...\ntry {\n  await adapty.setIntegrationIdentifier(\"posthog_distinct_user_id\", posthog.getDistinctId());\n} catch (error) {\n  // handle `AdaptyError`\n}\n"})})})]}),"\n",(0,s.jsx)(t.p,{children:"Adapty will now send events to PostHog and receive attribution from it."})]})}function g(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}}}]);