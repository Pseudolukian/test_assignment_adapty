"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[9104],{11470:(e,n,r)=>{r.d(n,{A:()=>b});var t=r(96540),a=r(34164),s=r(23104),i=r(56347),l=r(205),o=r(57485),d=r(31682),c=r(70679);function h(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:r}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:r,attributes:t,default:a}}=e;return{value:n,label:r,attributes:t,default:a}}))}(r);return function(e){const n=(0,d.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function p(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function y(e){let{queryString:n=!1,groupId:r}=e;const a=(0,i.W6)(),s=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r});return[(0,o.aZ)(s),(0,t.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(a.location.search);n.set(s,e),a.replace({...a.location,search:n.toString()})}),[s,a])]}function x(e){const{defaultValue:n,queryString:r=!1,groupId:a}=e,s=u(e),[i,o]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=r.find((e=>e.default))??r[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:s}))),[d,h]=y({queryString:r,groupId:a}),[x,j]=function(e){let{groupId:n}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,s]=(0,c.Dv)(r);return[a,(0,t.useCallback)((e=>{r&&s.set(e)}),[r,s])]}({groupId:a}),w=(()=>{const e=d??x;return p({value:e,tabValues:s})?e:null})();(0,l.A)((()=>{w&&o(w)}),[w]);return{selectedValue:i,selectValue:(0,t.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),h(e),j(e)}),[h,j,s]),tabValues:s}}var j=r(92303);const w={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=r(74848);function v(e){let{className:n,block:r,selectedValue:t,selectValue:i,tabValues:l}=e;const o=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.a_)(),c=e=>{const n=e.currentTarget,r=o.indexOf(n),a=l[r].value;a!==t&&(d(n),i(a))},h=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const r=o.indexOf(e.currentTarget)+1;n=o[r]??o[0];break}case"ArrowLeft":{const r=o.indexOf(e.currentTarget)-1;n=o[r]??o[o.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":r},n),children:l.map((e=>{let{value:n,label:r,attributes:s}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>o.push(e),onKeyDown:h,onClick:c,...s,className:(0,a.A)("tabs__item",w.tabItem,s?.className,{"tabs__item--active":t===n}),children:r??n},n)}))})}function m(e){let{lazy:n,children:r,selectedValue:a}=e;const s=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===a));return e?(0,t.cloneElement)(e,{className:"margin-top--md"}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function g(e){const n=x(e);return(0,f.jsxs)("div",{className:(0,a.A)("tabs-container",w.tabList),children:[(0,f.jsx)(v,{...n,...e}),(0,f.jsx)(m,{...n,...e})]})}function b(e){const n=(0,j.A)();return(0,f.jsx)(g,{...e,children:h(e.children)},String(n))}},19365:(e,n,r)=>{r.d(n,{A:()=>i});r(96540);var t=r(34164);const a={tabItem:"tabItem_Ymn6"};var s=r(74848);function i(e){let{children:n,hidden:r,className:i}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,t.A)(a.tabItem,i),hidden:r,children:n})}},45322:(e,n,r)=>{r.d(n,{A:()=>a});r(96540);var t=r(74848);const a=e=>{let{children:n,...r}=e;return(0,t.jsx)("details",{...r,children:n})}},78225:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>h,contentTitle:()=>d,default:()=>y,frontMatter:()=>o,metadata:()=>c,toc:()=>u});var t=r(74848),a=r(28453),s=(r(26393),r(11470)),i=r(19365),l=r(45322);const o={title:"Android - Present Paywall Builder paywalls in Observer mode",description:"Learn how to present paywalls in observer mode using Adapty\u2019s Paywall Builder.",metadataTitle:"Presenting Paywalls in Observer Mode | Adapty Docs"},d=void 0,c={id:"android-present-paywall-builder-paywalls-in-observer-mode",title:"Android - Present Paywall Builder paywalls in Observer mode",description:"Learn how to present paywalls in observer mode using Adapty\u2019s Paywall Builder.",source:"@site/versioned_docs/version-3.0/android-present-paywall-builder-paywalls-in-observer-mode.md",sourceDirName:".",slug:"/android-present-paywall-builder-paywalls-in-observer-mode",permalink:"/docs/android-present-paywall-builder-paywalls-in-observer-mode",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Android - Present Paywall Builder paywalls in Observer mode",description:"Learn how to present paywalls in observer mode using Adapty\u2019s Paywall Builder.",metadataTitle:"Presenting Paywalls in Observer Mode | Adapty Docs"},sidebar:"tutorialSidebar",previous:{title:"iOS - Present Paywall Builder paywalls in Observer mode",permalink:"/docs/ios-present-paywall-builder-paywalls-in-observer-mode"},next:{title:"Report transactions in Observer mode",permalink:"/docs/report-transactions-observer-mode"}},h={},u=[];function p(e){const n={a:"a",admonition:"admonition",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"If you've customized a paywall using the Paywall Builder, you don't need to worry about rendering it in your mobile app code to display it to the user. Such a paywall contains both what should be shown within the paywall and how it should be shown."}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["This section refers to ",(0,t.jsx)(n.a,{href:"observer-vs-full-mode",children:"Observer mode"})," only. If you do not work in the Observer mode, refer to the ",(0,t.jsx)(n.a,{href:"android-present-paywalls",children:"Android - Present Paywall Builder paywalls"})," topic instead."]})}),"\n",(0,t.jsxs)(s.A,{groupId:"current-os",queryString:!0,children:[(0,t.jsxs)(i.A,{value:"SDK3",label:"New Paywall Builder (SDK 3.0+)",default:!0,children:[(0,t.jsxs)(l.A,{children:[(0,t.jsx)("summary",{children:"Before you start presenting paywalls (Click to Expand)"}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Set up initial integration of Adapty ",(0,t.jsx)(n.a,{href:"initial-android",children:"with the Google Play"})," and ",(0,t.jsx)(n.a,{href:"initial_ios",children:"with the App Store"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Install and configure Adapty SDK. Make sure to set the ",(0,t.jsx)(n.code,{children:"observerMode"})," parameter to ",(0,t.jsx)(n.code,{children:"true"}),". Refer to our framework-specific instructions ",(0,t.jsx)(n.a,{href:"sdk-installation-android",children:"for Android"}),", ",(0,t.jsx)(n.a,{href:"sdk-installation-flutter#configure-adapty-sdk",children:"Flutter"}),", ",(0,t.jsx)(n.a,{href:"sdk-installation-reactnative#configure-adapty-sdks",children:"React Native"}),", and ",(0,t.jsx)(n.a,{href:"sdk-installation-unity#configure-adapty-sdk",children:"Unity"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"create-product",children:"Create products"})," in the Adapty Dashboard."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"create-paywall",children:"Configure paywalls, assign products to them"}),", and customize them using Paywall Builder in the Adapty Dashboard."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"create-placement",children:"Create placements and assign your paywalls to them"})," in the Adapty Dashboard."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"get-pb-paywalls",children:"Fetch Paywall Builder paywalls and their configuration"})," in your mobile app code."]}),"\n"]})]}),(0,t.jsx)("p",{}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Implement the ",(0,t.jsx)(n.code,{children:"AdaptyUiObserverModeHandler"}),". The ",(0,t.jsx)(n.code,{children:"AdaptyUiObserverModeHandler"}),"'s callback (",(0,t.jsx)(n.code,{children:"onPurchaseInitiated"}),") informs you when the user initiates a purchase. You can trigger your custom purchase flow in response to this callback like this:"]}),"\n"]}),(0,t.jsxs)(s.A,{groupId:"current-os",queryString:!0,children:[(0,t.jsx)(i.A,{value:"kotlin",label:"Kotlin",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:"showLineNumbers",children:"val observerModeHandler =\nAdaptyUiObserverModeHandler { product, paywall, paywallView, onStartPurchase, onFinishPurchase ->\n    onStartPurchase()\n    yourBillingClient.makePurchase(\n        product,\n        onSuccess = { purchase ->\n            onFinishPurchase()\n            //handle success\n        },\n        onError = {\n            onFinishPurchase()\n            //handle error\n        },\n        onCancel = {\n            onFinishPurchase()\n            //handle cancel\n        }\n    )\n}\n"})})}),(0,t.jsx)(i.A,{value:"java",label:"Java",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:"showLineNumbers",children:"AdaptyUiObserverModeHandler observerModeHandler = (product, paywall, paywallView, onStartPurchase, onFinishPurchase) -> {\n    onStartPurchase.invoke();\n    yourBillingClient.makePurchase(\n        product,\n        purchase -> {\n            onFinishPurchase.invoke();\n            //handle success\n        },\n        error -> {\n            onFinishPurchase.invoke();\n            //handle error\n        },\n        () -> { //cancellation\n            onFinishPurchase.invoke();\n            //handle cancel\n        }\n    );\n};\n"})})})]}),(0,t.jsx)(n.p,{children:"Also, remember to invoke these callbacks to AdaptyUI. This is necessary for proper paywall behavior, such as showing the loader, among other things:"}),(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Callback in Kotlin"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Callback in Java"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"onStartPurchase()"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"onStartPurchase.invoke()"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"The callback should be invoked to notify AdaptyUI that the purchase is started."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"onFinishPurchase()"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"onFinishPurchase.invoke()"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"The callback should be invoked to notify AdaptyUI that the purchase is finished successfully or not, or the purchase is canceled."})]})]})]}),(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"In order to display the visual paywall on the device screen, you must first configure it."}),"\n"]}),(0,t.jsxs)(s.A,{groupId:"current-os",queryString:!0,children:[(0,t.jsxs)(i.A,{value:"views",label:"Views",default:!0,children:[(0,t.jsxs)(n.p,{children:["To do this, call the method ",(0,t.jsx)(n.code,{children:"AdaptyUI.getPaywallView()"})," or create the ",(0,t.jsx)(n.code,{children:"AdaptyPaywallView"})," directly:"]}),(0,t.jsxs)(s.A,{groupId:"current-os",queryString:!0,children:[(0,t.jsx)(i.A,{value:"kotlin",label:"Kotlin (option 1)",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:"showLineNumbers",children:"   val paywallView = AdaptyUI.getPaywallView(\n       activity,\n       viewConfiguration,\n       products,\n       eventListener,\n       personalizedOfferResolver,\n       tagResolver,\n       timerResolver,\n       observerModeHandler, \n   )\n"})})}),(0,t.jsx)(i.A,{value:"kotlin2",label:"Kotlin (option 2)",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:"showLineNumbers",children:"   val paywallView =\n        AdaptyPaywallView(activity) // or retrieve it from xml\n   ...\n   with(paywallView) {\n       showPaywall(\n           viewConfiguration,\n           products,\n\t\t\t\t\t eventListener,\n           personalizedOfferResolver,\n           tagResolver,\n           timerResolver,\n\t\t\t\t\t observerModeHandler,\n       )\n   }\n"})})}),(0,t.jsx)(i.A,{value:"java",label:"Java (option 1)",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:"showLineNumbers",children:"AdaptyPaywallView paywallView = AdaptyUI.getPaywallView(\n        activity,\n        viewConfiguration,\n        products,\n        eventListener,\n        personalizedOfferResolver,\n        tagResolver,\n        timerResolver,\n        observerModeHandler\n);\n"})})}),(0,t.jsx)(i.A,{value:"java2",label:"Java (option 2)",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:"showLineNumbers",children:"AdaptyPaywallView paywallView =\n  new AdaptyPaywallView(activity); //add to the view hierarchy if needed, or you receive it from xml\n...\npaywallView.showPaywall(viewConfiguration, products, eventListener, personalizedOfferResolver, tagResolver, timerResolver, observerModeHandler);\n"})})}),(0,t.jsx)(i.A,{value:"XML",label:"XML",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",metastring:"showLineNumbers",children:'<com.adapty.ui.AdaptyPaywallView xmlns:android="http://schemas.android.com/apk/res/android"\n    android:layout_width="match_parent"\n    android:layout_height="match_parent" />\n'})})})]}),(0,t.jsx)(n.p,{children:"After the view has been successfully created, you can add it to the view hierarchy and display it."})]}),(0,t.jsxs)(i.A,{value:"compose",label:"Jetpack Compose",default:!0,children:[(0,t.jsx)(n.p,{children:"To do this, use this composable function:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:"showLineNumbers",children:"AdaptyPaywallScreen(\n    viewConfiguration,\n    products,\n    eventListener,\n    personalizedOfferResolver,\n    tagResolver,\n    timerResolver,\n)\n"})})]})]}),(0,t.jsx)(n.p,{children:"Request parameters:"}),(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Presence"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Products"})}),(0,t.jsx)(n.td,{children:"optional"}),(0,t.jsxs)(n.td,{children:["Provide an array of ",(0,t.jsx)(n.code,{children:"AdaptyPaywallProduct "}),"to optimize the display timing of products on the screen. If ",(0,t.jsx)(n.code,{children:"null"})," is passed, AdaptyUI will automatically fetch the required products."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"ViewConfiguration"})}),(0,t.jsx)(n.td,{children:"required"}),(0,t.jsxs)(n.td,{children:["Supply an ",(0,t.jsx)(n.code,{children:"AdaptyViewConfiguration"})," object containing visual details of the paywall. Use the ",(0,t.jsx)(n.code,{children:"Adapty.getViewConfiguration(paywall)"})," method to load it. Refer to ",(0,t.jsx)(n.a,{href:"get-pb-paywalls#fetch-the-view-configuration-of-paywall-designed-using-paywall-builder",children:"Fetch the visual configuration of paywall"})," topic for more details."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"EventListener"})}),(0,t.jsx)(n.td,{children:"optional"}),(0,t.jsxs)(n.td,{children:["Provide an ",(0,t.jsx)(n.code,{children:"AdaptyUiEventListener"})," to observe paywall events. Extending AdaptyUiDefaultEventListener is recommended for ease of use. Refer to ",(0,t.jsx)(n.a,{href:"android-handling-events",children:"Handling paywall events"}),"  topic for more details."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"PersonalizedOfferResolver"})}),(0,t.jsx)(n.td,{children:"optional"}),(0,t.jsxs)(n.td,{children:["To indicate personalized pricing (",(0,t.jsx)(n.a,{href:"https://developer.android.com/google/play/billing/integrate#personalized-price",children:"read more"}),"  ), implement ",(0,t.jsx)(n.code,{children:"AdaptyUiPersonalizedOfferResolver"}),"  and pass your own logic that maps ",(0,t.jsx)(n.code,{children:"AdaptyPaywallProduct"})," to true if the product's price is personalized, otherwise false."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"TagResolver"})}),(0,t.jsx)(n.td,{children:"optional"}),(0,t.jsxs)(n.td,{children:["Use ",(0,t.jsx)(n.code,{children:"AdaptyUiTagResolver"})," to resolve custom tags within the paywall text. This resolver takes a tag parameter and resolves it to a corresponding string. Refer to ",(0,t.jsx)(n.a,{href:"custom-tags-in-paywall-builder",children:"Custom tags in Paywall Builder"}),"  topic for more details."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"ObserverModeHandler"})}),(0,t.jsx)(n.td,{children:"required for Observer mode"}),(0,t.jsxs)(n.td,{children:["The  ",(0,t.jsx)(n.code,{children:"AdaptyUiObserverModeHandler"})," you've implemented in the previous step."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"variationId"})}),(0,t.jsx)(n.td,{children:"required"}),(0,t.jsxs)(n.td,{children:["The string identifier of the variation. You can get it using ",(0,t.jsx)(n.code,{children:"variationId"})," property  of the ",(0,t.jsx)(n.a,{href:"sdk-models#adaptypaywall",children:(0,t.jsx)(n.code,{children:"AdaptyPaywall"})}),"   object."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"transaction"})}),(0,t.jsx)(n.td,{children:"required"}),(0,t.jsxs)(n.td,{children:[(0,t.jsxs)("p",{children:["For iOS, StoreKit1: an ",(0,t.jsx)(n.a,{href:"https://developer.apple.com/documentation/storekit/skpaymenttransaction",children:(0,t.jsx)(n.code,{children:"SKPaymentTransaction"})}),"   object."]}),(0,t.jsxs)("p",{children:["For iOS, StoreKit 2: ",(0,t.jsx)(n.a,{href:"https://developer.apple.com/documentation/storekit/transaction",children:"Transaction"}),"   object."]}),(0,t.jsxs)("p",{children:["For Android: String identifier (",(0,t.jsx)(n.code,{children:"purchase.getOrderId()"}),") of the purchase, where the purchase is an instance of the billing library ",(0,t.jsx)(n.a,{href:"https://developer.android.com/reference/com/android/billingclient/api/Purchase",children:"Purchase"}),"  class."]})]})]})]})]})]}),(0,t.jsxs)(i.A,{value:"SDK2",label:"Legacy Paywall Builder (SDK up to 2.x)",default:!0,children:[(0,t.jsxs)(l.A,{children:[(0,t.jsx)("summary",{children:"Before you start presenting paywalls (Click to Expand)"}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Set up initial integration of Adapty ",(0,t.jsx)(n.a,{href:"initial-android",children:"with the Google Play"})," and ",(0,t.jsx)(n.a,{href:"initial_ios",children:"with the App Store"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Install and configure Adapty SDK. Make sure to set the ",(0,t.jsx)(n.code,{children:"observerMode"})," parameter to ",(0,t.jsx)(n.code,{children:"true"}),". Refer to our framework-specific instructions ",(0,t.jsx)(n.a,{href:"sdk-installation-android",children:"for Android"}),", ",(0,t.jsx)(n.a,{href:"sdk-installation-flutter#configure-adapty-sdk",children:"Flutter"}),", ",(0,t.jsx)(n.a,{href:"sdk-installation-reactnative#configure-adapty-sdks",children:"React Native"}),", and ",(0,t.jsx)(n.a,{href:"sdk-installation-unity#configure-adapty-sdk",children:"Unity"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"create-product",children:"Create products"})," in the Adapty Dashboard."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"create-paywall",children:"Configure paywalls, assign products to them"}),", and customize them using Paywall Builder in the Adapty Dashboard."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"create-placement",children:"Create placements and assign your paywalls to them"})," in the Adapty Dashboard."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"get-pb-paywalls",children:"Fetch Paywall Builder paywalls and their configuration"})," in your mobile app code."]}),"\n"]})]}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Implement the ",(0,t.jsx)(n.code,{children:"AdaptyUiObserverModeHandler"}),". The ",(0,t.jsx)(n.code,{children:"AdaptyUiObserverModeHandler"}),"'s callback (",(0,t.jsx)(n.code,{children:"onPurchaseInitiated"}),") informs you when the user initiates a purchase. You can trigger your custom purchase flow in response to this callback like this:"]}),"\n"]}),(0,t.jsxs)(s.A,{groupId:"current-os",queryString:!0,children:[(0,t.jsx)(i.A,{value:"kotlin",label:"Kotlin",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:"showLineNumbers",children:"val observerModeHandler =\nAdaptyUiObserverModeHandler { product, paywall, paywallView, onStartPurchase, onFinishPurchase ->\n    onStartPurchase()\n    yourBillingClient.makePurchase(\n        product,\n        onSuccess = { purchase ->\n            onFinishPurchase()\n            //handle success\n        },\n        onError = {\n            onFinishPurchase()\n            //handle error\n        },\n        onCancel = {\n            onFinishPurchase()\n            //handle cancel\n        }\n    )\n}\n"})})}),(0,t.jsx)(i.A,{value:"java",label:"Java",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:"showLineNumbers",children:"AdaptyUiObserverModeHandler observerModeHandler = (product, paywall, paywallView, onStartPurchase, onFinishPurchase) -> {\n    onStartPurchase.invoke();\n    yourBillingClient.makePurchase(\n        product,\n        purchase -> {\n            onFinishPurchase.invoke();\n            //handle success\n        },\n        error -> {\n            onFinishPurchase.invoke();\n            //handle error\n        },\n        () -> { //cancellation\n            onFinishPurchase.invoke();\n            //handle cancel\n        }\n    );\n};\n"})})})]}),(0,t.jsx)(n.p,{children:"Also, remember to invoke these callbacks to AdaptyUI. This is necessary for proper paywall behavior, such as showing the loader, among other things:"}),(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Callback in Kotlin"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Callback in Java"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"onStartPurchase()"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"onStartPurchase.invoke()"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"The callback should be invoked to notify AdaptyUI that the purchase is started."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"onFinishPurchase()"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"onFinishPurchase.invoke()"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"The callback should be invoked to notify AdaptyUI that the purchase is finished successfully or not, or the purchase is canceled."})]})]})]}),(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:["In order to display the visual paywall, you must first initialize it. To do this, call the method ",(0,t.jsx)(n.code,{children:"AdaptyUI.getPaywallView()"})," or create the ",(0,t.jsx)(n.code,{children:"AdaptyPaywallView"})," directly:"]}),"\n"]}),(0,t.jsxs)(s.A,{groupId:"current-os",queryString:!0,children:[(0,t.jsx)(i.A,{value:"kotlin",label:"Kotlin",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:"showLineNumbers",children:"val paywallView = AdaptyUI.getPaywallView(\n    activity,\n    viewConfiguration,\n    products,\n    AdaptyPaywallInsets.of(topInset, bottomInset),\n    eventListener,\n    personalizedOfferResolver,\n    tagResolver,\n    observerModeHandler,\n)\n\n//======= OR =======\n\nval paywallView =\n     AdaptyPaywallView(activity) // or retrieve it from xml\n...\nwith(paywallView) {\n    setEventListener(eventListener)\n    setObserverModeHandler(observerModeHandler)\n    showPaywall(\n        viewConfiguration,\n        products,\n        AdaptyPaywallInsets.of(topInset, bottomInset),\n        personalizedOfferResolver,\n        tagResolver,\n    )\n}\n"})})}),(0,t.jsx)(i.A,{value:"java",label:"Java",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:"showLineNumbers",children:"AdaptyPaywallView paywallView = AdaptyUI.getPaywallView(\n        activity,\n        viewConfiguration,\n        products,\n        AdaptyPaywallInsets.of(topInset, bottomInset),\n        eventListener,\n        personalizedOfferResolver,\n        tagResolver,\n        observerModeHandler\n);\n\n//======= OR =======\n\nAdaptyPaywallView paywallView =\n  new AdaptyPaywallView(activity); //add to the view hierarchy if needed, or you receive it from xml\n...\npaywallView.setEventListener(eventListener);\npaywallView.setObserverModeHandler(observerModeHandler);\npaywallView.showPaywall(viewConfiguration, products, AdaptyPaywallInsets.of(topInset, bottomInset), personalizedOfferResolver);\n"})})}),(0,t.jsx)(i.A,{value:"XML",label:"XML",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",metastring:"showLineNumbers",children:'<com.adapty.ui.AdaptyPaywallView xmlns:android="http://schemas.android.com/apk/res/android"\n    android:layout_width="match_parent"\n    android:layout_height="match_parent" />\n'})})})]}),(0,t.jsx)(n.p,{children:"After the view has been successfully created, you can add it to the view hierarchy and display it."}),(0,t.jsx)(n.p,{children:"Request parameters:"}),(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Presence"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Products"})}),(0,t.jsx)(n.td,{children:"optional"}),(0,t.jsxs)(n.td,{children:["Provide an array of ",(0,t.jsx)(n.code,{children:"AdaptyPaywallProduct "}),"to optimize the display timing of products on the screen. If ",(0,t.jsx)(n.code,{children:"null"})," is passed, AdaptyUI will automatically fetch the required products."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"ViewConfiguration"})}),(0,t.jsx)(n.td,{children:"required"}),(0,t.jsxs)(n.td,{children:["Supply an ",(0,t.jsx)(n.code,{children:"AdaptyViewConfiguration"})," object containing visual details of the paywall. Use the ",(0,t.jsx)(n.code,{children:"Adapty.getViewConfiguration(paywall)"})," method to load it. Refer to ",(0,t.jsx)(n.a,{href:"get-pb-paywalls#fetch-the-view-configuration-of-paywall-designed-using-paywall-builder",children:"Fetch the visual configuration of paywall"})," topic for more details."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Insets"})}),(0,t.jsx)(n.td,{children:"required"}),(0,t.jsxs)(n.td,{children:["Define an ",(0,t.jsx)(n.code,{children:"AdaptyPaywallInsets"})," object containing information about the area overlapped by system bars, creating vertical margins for content. If neither the status bar nor the navigation bar overlaps the ",(0,t.jsx)(n.code,{children:"AdaptyPaywallView"}),", pass ",(0,t.jsx)(n.code,{children:"AdaptyPaywallInsets.NONE"}),". For fullscreen mode where system bars overlap part of your UI, obtain insets as shown under the table."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"EventListener"})}),(0,t.jsx)(n.td,{children:"optional"}),(0,t.jsxs)(n.td,{children:["Provide an ",(0,t.jsx)(n.code,{children:"AdaptyUiEventListener"})," to observe paywall events. Extending AdaptyUiDefaultEventListener is recommended for ease of use. Refer to ",(0,t.jsx)(n.a,{href:"android-handling-events",children:"Handling paywall events"}),"  topic for more details."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"PersonalizedOfferResolver"})}),(0,t.jsx)(n.td,{children:"optional"}),(0,t.jsxs)(n.td,{children:["To indicate personalized pricing (",(0,t.jsx)(n.a,{href:"https://developer.android.com/google/play/billing/integrate#personalized-price",children:"read more"}),"  ), implement ",(0,t.jsx)(n.code,{children:"AdaptyUiPersonalizedOfferResolver"}),"  and pass your own logic that maps ",(0,t.jsx)(n.code,{children:"AdaptyPaywallProduct"})," to true if the product's price is personalized, otherwise false."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"TagResolver"})}),(0,t.jsx)(n.td,{children:"optional"}),(0,t.jsxs)(n.td,{children:["Use ",(0,t.jsx)(n.code,{children:"AdaptyUiTagResolver"})," to resolve custom tags within the paywall text. This resolver takes a tag parameter and resolves it to a corresponding string. Refer to ",(0,t.jsx)(n.a,{href:"custom-tags-in-paywall-builder",children:"Custom tags in Paywall Builder"}),"  topic for more details."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"ObserverModeHandler"})}),(0,t.jsx)(n.td,{children:"required for Observer mode"}),(0,t.jsxs)(n.td,{children:["The  ",(0,t.jsx)(n.code,{children:"AdaptyUiObserverModeHandler"})," you've implemented in the previous step."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"variationId"})}),(0,t.jsx)(n.td,{children:"required"}),(0,t.jsxs)(n.td,{children:["The string identifier of the variation. You can get it using ",(0,t.jsx)(n.code,{children:"variationId"})," property  of the ",(0,t.jsx)(n.a,{href:"sdk-models#adaptypaywall",children:(0,t.jsx)(n.code,{children:"AdaptyPaywall"})}),"   object."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"transaction"})}),(0,t.jsx)(n.td,{children:"required"}),(0,t.jsxs)(n.td,{children:[(0,t.jsxs)("p",{children:["For iOS, StoreKit1: an ",(0,t.jsx)(n.a,{href:"https://developer.apple.com/documentation/storekit/skpaymenttransaction",children:(0,t.jsx)(n.code,{children:"SKPaymentTransaction"})}),"   object."]}),(0,t.jsxs)("p",{children:["For iOS, StoreKit 2: ",(0,t.jsx)(n.a,{href:"https://developer.apple.com/documentation/storekit/transaction",children:"Transaction"}),"   object."]}),(0,t.jsxs)("p",{children:["For Android: String identifier (",(0,t.jsx)(n.code,{children:"purchase.getOrderId()"}),") of the purchase, where the purchase is an instance of the billing library ",(0,t.jsx)(n.a,{href:"https://developer.android.com/reference/com/android/billingclient/api/Purchase",children:"Purchase"}),"  class."]})]})]})]})]}),(0,t.jsx)(n.p,{children:"For fullscreen mode where system bars overlap part of your UI, obtain insets in the following way:"}),(0,t.jsxs)(s.A,{groupId:"current-os",queryString:!0,children:[(0,t.jsx)(i.A,{value:"kotlin",label:"Kotlin",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",metastring:"showLineNumbers",children:"import androidx.core.graphics.Insets\nimport androidx.core.view.ViewCompat\nimport androidx.core.view.WindowInsetsCompat\n\n//create extension function\nfun View.onReceiveSystemBarsInsets(action: (insets: Insets) -> Unit) {\n    ViewCompat.setOnApplyWindowInsetsListener(this) { _, insets ->\n        val systemBarInsets = insets.getInsets(WindowInsetsCompat.Type.systemBars())\n        ViewCompat.setOnApplyWindowInsetsListener(this, null)\n        action(systemBarInsets)\n        insets\n    }\n}\n//and then use it with the view\npaywallView.onReceiveSystemBarsInsets { insets ->\n    val paywallInsets = AdaptyPaywallInsets.of(insets.top, insets.bottom)\n    paywallView.setEventListener(eventListener)\n    paywallView.setObserverModeHandler(observerModeHandler)\n    paywallView.showPaywall(viewConfig, products, paywallInsets, personalizedOfferResolver, tagResolver)\n}\n"})})}),(0,t.jsx)(i.A,{value:"java",label:"Java",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",metastring:"showLineNumbers",children:"import androidx.core.graphics.Insets;\nimport androidx.core.view.ViewCompat;\nimport androidx.core.view.WindowInsetsCompat;\n\n...\n\nViewCompat.setOnApplyWindowInsetsListener(paywallView, (view, insets) -> {\n    Insets systemBarInsets = insets.getInsets(WindowInsetsCompat.Type.systemBars());\n    ViewCompat.setOnApplyWindowInsetsListener(paywallView, null);\n  \n    AdaptyPaywallInsets paywallInsets =\n                 AdaptyPaywallInsets.of(systemBarInsets.top, systemBarInsets.bottom);\n    paywallView.setEventListener(eventListener);\n    paywallView.setObserverModeHandler(observerModeHandler);\n    paywallView.showPaywall(viewConfiguration, products, paywallInsets, personalizedOfferResolver, tagResolver);\n            \n    return insets;\n});\n"})})})]}),(0,t.jsx)(n.p,{children:"Returns:"}),(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Object"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"AdaptyPaywallView"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"object, representing the requested paywall screen."})]})})]}),(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["Don't forget to ",(0,t.jsx)(n.a,{href:"report-transactions-observer-mode",children:"Associate paywalls to purchase transactions"}),". Otherwise, Adapty will not determine the source paywall of the purchase."]})})]})]})]})}function y(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}}}]);