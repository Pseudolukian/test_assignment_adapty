"use strict";(self.webpackChunkadapty_docs=self.webpackChunkadapty_docs||[]).push([[9351],{67833:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/98d0dad-non-original_profile-6908bc63116fb7381458e1d7dc724231.webp"},73896:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>c,toc:()=>h});var n=s(74848),r=s(28453),i=s(34028);s(26393);const o={title:"Troubleshooting test purchases",description:"Troubleshoot test purchases in Adapty and resolve common in-app transaction issues.",metadataTitle:"Troubleshooting Test Purchases | Adapty Docs"},a=void 0,c={id:"troubleshooting-test-purchases",title:"Troubleshooting test purchases",description:"Troubleshoot test purchases in Adapty and resolve common in-app transaction issues.",source:"@site/versioned_docs/version-3.0/troubleshooting-test-purchases.md",sourceDirName:".",slug:"/troubleshooting-test-purchases",permalink:"/test_assignment_adapty/docs/troubleshooting-test-purchases",draft:!1,unlisted:!1,tags:[],version:"3.0",frontMatter:{title:"Troubleshooting test purchases",description:"Troubleshoot test purchases in Adapty and resolve common in-app transaction issues.",metadataTitle:"Troubleshooting Test Purchases | Adapty Docs"},sidebar:"tutorialSidebar",previous:{title:"Validate test purchases",permalink:"/test_assignment_adapty/docs/validate-test-purchases"},next:{title:"Testing devices",permalink:"/test_assignment_adapty/docs/test-devices"}},l={},h=[];function d(e){const t={a:"a",code:"code",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["If you encounter transaction issues, please first make sure you have completed all the steps outlined in the ",(0,n.jsx)(t.a,{href:"release-checklist",children:"release checklist"}),". If you've completed all the steps and still encounter issues, please follow the guidance provided below to resolve them:"]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Issue"}),(0,n.jsx)(t.th,{children:"Solution"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"An error is returned in the mobile app"}),(0,n.jsxs)(t.td,{children:["Refer to the error list for your platform: ",(0,n.jsx)(t.a,{href:"ios-sdk-error-handling",children:"for iOS"}),", ",(0,n.jsx)(t.a,{href:"android-sdk-error-handling",children:"for Android"}),", ",(0,n.jsx)(t.a,{href:"error-handling-on-flutter-react-native-unity",children:"for Flutter, React Native, or Unity"})," and follow our recommendations to resolve the issue."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsxs)(t.td,{children:["Transaction is absent from the ",(0,n.jsx)(t.strong,{children:"Event Feed"})," although no error is returned in the mobile app"]}),(0,n.jsx)(t.td,{children:(0,n.jsxs)("ol",{children:[(0,n.jsx)("li",{children:" For iOS: Ensure you use a real device rather than a simulator."}),(0,n.jsxs)("li",{children:[" Ensure that the ",(0,n.jsx)(t.code,{children:"Bundle ID"}),"/",(0,n.jsx)(t.code,{children:"Package name"})," of your app matches the one in the ",(0,n.jsx)(t.a,{href:"https://app.adapty.io/settings/general",children:(0,n.jsx)(t.strong,{children:"App settings"})}),"."]}),(0,n.jsxs)("li",{children:[" Ensure the ",(0,n.jsx)(t.code,{children:"PUBLIC_SDK_KEY"})," in your app matches the ",(0,n.jsx)(t.strong,{children:"Public SDK key"})," in the Adapty Dashboard: ",(0,n.jsxs)(t.a,{href:"https://app.adapty.io/settings/general",children:[(0,n.jsx)(t.strong,{children:"App settings"}),"-> ",(0,n.jsx)(t.strong,{children:"General"})," tab -> ",(0,n.jsx)(t.strong,{children:"API keys"})," subsection"]}),"."]})]})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"No event is present in my testing profile"}),(0,n.jsxs)(t.td,{children:[(0,n.jsx)("p",{children:"A new user profile record is automatically created in Adapty in the following cases:"}),(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:" When a user runs your app for the first time"}),(0,n.jsx)("li",{children:" When a user logs out of your app"})]}),(0,n.jsxs)("p",{children:["All transactions and events in a chain are tied to the profile that generated the first transaction. This helps keep the entire transaction history, including trial periods, subscription purchases, renewals, and more linked to the same profile. This means that a new profile record that generated a subsequent translation - we call it a non-original profile - may not have any events associated with it but will retain the granted access level. In some cases, you'll also see ",(0,n.jsx)(t.code,{children:"access_level_updated"})," events here. It's advised to ignore these new, empty profiles and focus on the original ones for a clearer view of the user's transaction history."]}),(0,n.jsx)("p",{children:"This behavior is more prominent for testing scenarios but also normal for production. It should not be treated as a bug or SDK misconfiguration.In order to run the test with only one profile and have fun concise history in one place, create a new test account (Sandbox Apple ID) each time you reinstall the mobile app."}),(0,n.jsxs)("p",{children:["Please see an example of a non-original profile under the table. For more details on profile creation, please see ",(0,n.jsx)(t.a,{href:"profiles-crm#profile-record-creation",children:"Profile record creation"}),"."]})]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Prices do not reflect the actual prices set in App Store Connect"}),(0,n.jsxs)(t.td,{children:[(0,n.jsx)("p",{children:"In both Sandbox and TestFlight which uses the sandbox environment for in-app purchases, it's important to verify that the purchase flow functions correctly, rather than focusing on the accuracy of prices. It's worth noting that Apple's API can occasionally provide inaccurate data, particularly when different regions are configured for devices or accounts. And since the prices come directly from the Store and the Adapty backend does not affect purchase prices in any way, you can ignore any inaccuracy in prices during the testing of the purchases through Adapty."}),(0,n.jsx)("p",{}),(0,n.jsx)("p",{children:"Therefore, prioritize testing the purchase flow itself over the accuracy of prices to ensure it functions as intended."})]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsxs)(t.td,{children:["The transaction time in the ",(0,n.jsx)(t.strong,{children:"Event Feed"})," is incorrect"]}),(0,n.jsxs)(t.td,{children:["The ",(0,n.jsx)(t.strong,{children:"Event Feed"})," uses the time zone set in the ",(0,n.jsx)(t.strong,{children:"App Settings"}),". To align the time zone of events with your local time, adjust the ",(0,n.jsx)(t.strong,{children:"Reporting timezone"})," in ",(0,n.jsxs)(t.a,{href:"https://app.adapty.io/settings/general",children:[(0,n.jsx)(t.strong,{children:"App settings"})," -> ",(0,n.jsx)(t.strong,{children:"General"})," tab"]}),"."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Paywalls and products take a long time to load"}),(0,n.jsxs)(t.td,{children:[(0,n.jsxs)("p",{children:["This issue can occur if your test account has a long transaction history. We highly recommend creating a new test account each time, as outlined in our ",(0,n.jsx)(t.a,{href:"test-purchases-in-sandbox#step-1-create-a-sandbox-test-account--sandbox-apple-id-in-the-app-store-connect",children:"Create a Sandbox Test Account (Sandbox Apple ID) in App Store Connect"})," section."]})," ",(0,n.jsx)("p",{children:"If you're unable to create a new account, you can clear the transaction history on your current account by following these steps on your iOS device:"})," ",(0,n.jsxs)("ol",{children:[(0,n.jsxs)("li",{children:[" Open ",(0,n.jsx)(t.strong,{children:"Settings"})," and tap ",(0,n.jsx)(t.strong,{children:"App Store"}),"."]}),(0,n.jsxs)("li",{children:[" Tap your ",(0,n.jsx)(t.strong,{children:"Sandbox Apple ID"}),"."]}),(0,n.jsxs)("li",{children:[" In the popup, select ",(0,n.jsx)(t.strong,{children:"Manage"}),"."]}),(0,n.jsxs)("li",{children:[" On the ",(0,n.jsx)(t.strong,{children:"Account Settings"})," page, tap ",(0,n.jsx)(t.strong,{children:"Clear Purchase History"}),"."]})]})," ",(0,n.jsxs)("p",{children:["For more details, check out the ",(0,n.jsx)(t.a,{href:"https://developer.apple.com/documentation/storekit/in-app_purchase/testing_in-app_purchases_with_sandbox/#3894622",children:"Apple Developer documentation"}),"."]})]})]})]})]}),"\n",(0,n.jsxs)(t.p,{children:["Here is an example of a non-original profile. Notice the absence of events in the ",(0,n.jsx)(t.strong,{children:"User history"})," and the presence of an access level."]}),"\n",(0,n.jsx)(i.A,{children:(0,n.jsx)("img",{src:s(67833).A,style:{border:"1px solid #727272",width:"700px",display:"block",margin:"0 auto"}})})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}}}]);